import{r as A,R as qu,L as z0,C as Bu,X as _u,Y as Ru,T as Hu,a as ku,b as Yu,B as Vf,c as Kf,d as O0}from"./charts-C-8LSjAo.js";import{r as U0,a as q0,g as B0}from"./vendor-gH-7aFTg.js";import{_ as Xu}from"./pdf-DwZK_Abh.js";import{i as um,g as rm,d as Ws,o as _0,s as Is,a as R0,b as H0,c as k0}from"./firebase-BAzZL3ZZ.js";(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))o(p);new MutationObserver(p=>{for(const D of p)if(D.type==="childList")for(const N of D.addedNodes)N.tagName==="LINK"&&N.rel==="modulepreload"&&o(N)}).observe(document,{childList:!0,subtree:!0});function m(p){const D={};return p.integrity&&(D.integrity=p.integrity),p.referrerPolicy&&(D.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?D.credentials="include":p.crossOrigin==="anonymous"?D.credentials="omit":D.credentials="same-origin",D}function o(p){if(p.ep)return;p.ep=!0;const D=m(p);fetch(p.href,D)}})();var Lu={exports:{}},Qs={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jf;function Y0(){if(Jf)return Qs;Jf=1;var u=Symbol.for("react.transitional.element"),d=Symbol.for("react.fragment");function m(o,p,D){var N=null;if(D!==void 0&&(N=""+D),p.key!==void 0&&(N=""+p.key),"key"in p){D={};for(var O in p)O!=="key"&&(D[O]=p[O])}else D=p;return p=D.ref,{$$typeof:u,type:o,key:N,ref:p!==void 0?p:null,props:D}}return Qs.Fragment=d,Qs.jsx=m,Qs.jsxs=m,Qs}var $f;function X0(){return $f||($f=1,Lu.exports=Y0()),Lu.exports}var s=X0(),Gu={exports:{}},Zs={},Qu={exports:{}},Zu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ff;function L0(){return Ff||(Ff=1,(function(u){function d(g,B){var V=g.length;g.push(B);e:for(;0<V;){var ne=V-1>>>1,re=g[ne];if(0<p(re,B))g[ne]=B,g[V]=re,V=ne;else break e}}function m(g){return g.length===0?null:g[0]}function o(g){if(g.length===0)return null;var B=g[0],V=g.pop();if(V!==B){g[0]=V;e:for(var ne=0,re=g.length,we=re>>>1;ne<we;){var oe=2*(ne+1)-1,Q=g[oe],ce=oe+1,ee=g[ce];if(0>p(Q,V))ce<re&&0>p(ee,Q)?(g[ne]=ee,g[ce]=V,ne=ce):(g[ne]=Q,g[oe]=V,ne=oe);else if(ce<re&&0>p(ee,V))g[ne]=ee,g[ce]=V,ne=ce;else break e}}return B}function p(g,B){var V=g.sortIndex-B.sortIndex;return V!==0?V:g.id-B.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var D=performance;u.unstable_now=function(){return D.now()}}else{var N=Date,O=N.now();u.unstable_now=function(){return N.now()-O}}var C=[],R=[],E=1,X=null,L=3,Y=!1,K=!1,T=!1,H=!1,S=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;function G(g){for(var B=m(R);B!==null;){if(B.callback===null)o(R);else if(B.startTime<=g)o(R),B.sortIndex=B.expirationTime,d(C,B);else break;B=m(R)}}function te(g){if(T=!1,G(g),!K)if(m(C)!==null)K=!0,ue||(ue=!0,h());else{var B=m(R);B!==null&&W(te,B.startTime-g)}}var ue=!1,ye=-1,he=5,ve=-1;function Ue(){return H?!0:!(u.unstable_now()-ve<he)}function k(){if(H=!1,ue){var g=u.unstable_now();ve=g;var B=!0;try{e:{K=!1,T&&(T=!1,$(ye),ye=-1),Y=!0;var V=L;try{t:{for(G(g),X=m(C);X!==null&&!(X.expirationTime>g&&Ue());){var ne=X.callback;if(typeof ne=="function"){X.callback=null,L=X.priorityLevel;var re=ne(X.expirationTime<=g);if(g=u.unstable_now(),typeof re=="function"){X.callback=re,G(g),B=!0;break t}X===m(C)&&o(C),G(g)}else o(C);X=m(C)}if(X!==null)B=!0;else{var we=m(R);we!==null&&W(te,we.startTime-g),B=!1}}break e}finally{X=null,L=V,Y=!1}B=void 0}}finally{B?h():ue=!1}}}var h;if(typeof J=="function")h=function(){J(k)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,Z=_.port2;_.port1.onmessage=k,h=function(){Z.postMessage(null)}}else h=function(){S(k,0)};function W(g,B){ye=S(function(){g(u.unstable_now())},B)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(g){g.callback=null},u.unstable_forceFrameRate=function(g){0>g||125<g?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):he=0<g?Math.floor(1e3/g):5},u.unstable_getCurrentPriorityLevel=function(){return L},u.unstable_next=function(g){switch(L){case 1:case 2:case 3:var B=3;break;default:B=L}var V=L;L=B;try{return g()}finally{L=V}},u.unstable_requestPaint=function(){H=!0},u.unstable_runWithPriority=function(g,B){switch(g){case 1:case 2:case 3:case 4:case 5:break;default:g=3}var V=L;L=g;try{return B()}finally{L=V}},u.unstable_scheduleCallback=function(g,B,V){var ne=u.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ne+V:ne):V=ne,g){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=V+re,g={id:E++,callback:B,priorityLevel:g,startTime:V,expirationTime:re,sortIndex:-1},V>ne?(g.sortIndex=V,d(R,g),m(C)===null&&g===m(R)&&(T?($(ye),ye=-1):T=!0,W(te,V-ne))):(g.sortIndex=re,d(C,g),K||Y||(K=!0,ue||(ue=!0,h()))),g},u.unstable_shouldYield=Ue,u.unstable_wrapCallback=function(g){var B=L;return function(){var V=L;L=B;try{return g.apply(this,arguments)}finally{L=V}}}})(Zu)),Zu}var Wf;function G0(){return Wf||(Wf=1,Qu.exports=L0()),Qu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var If;function Q0(){if(If)return Zs;If=1;var u=G0(),d=U0(),m=q0();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)t+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function p(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function D(e){var t=e,l=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(l=t.return),e=t.return;while(e)}return t.tag===3?l:null}function N(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function O(e){if(D(e)!==e)throw Error(o(188))}function C(e){var t=e.alternate;if(!t){if(t=D(e),t===null)throw Error(o(188));return t!==e?null:e}for(var l=e,a=t;;){var n=l.return;if(n===null)break;var i=n.alternate;if(i===null){if(a=n.return,a!==null){l=a;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===l)return O(n),e;if(i===a)return O(n),t;i=i.sibling}throw Error(o(188))}if(l.return!==a.return)l=n,a=i;else{for(var c=!1,r=n.child;r;){if(r===l){c=!0,l=n,a=i;break}if(r===a){c=!0,a=n,l=i;break}r=r.sibling}if(!c){for(r=i.child;r;){if(r===l){c=!0,l=i,a=n;break}if(r===a){c=!0,a=i,l=n;break}r=r.sibling}if(!c)throw Error(o(189))}}if(l.alternate!==a)throw Error(o(190))}if(l.tag!==3)throw Error(o(188));return l.stateNode.current===l?e:t}function R(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=R(e),t!==null)return t;e=e.sibling}return null}var E=Object.assign,X=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),Y=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),$=Symbol.for("react.consumer"),J=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),ye=Symbol.for("react.memo"),he=Symbol.for("react.lazy"),ve=Symbol.for("react.activity"),Ue=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function h(e){return e===null||typeof e!="object"?null:(e=k&&e[k]||e["@@iterator"],typeof e=="function"?e:null)}var _=Symbol.for("react.client.reference");function Z(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===_?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case K:return"Fragment";case H:return"Profiler";case T:return"StrictMode";case te:return"Suspense";case ue:return"SuspenseList";case ve:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Y:return"Portal";case J:return(e.displayName||"Context")+".Provider";case $:return(e._context.displayName||"Context")+".Consumer";case G:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ye:return t=e.displayName||null,t!==null?t:Z(e.type)||"Memo";case he:t=e._payload,e=e._init;try{return Z(e(t))}catch{}}return null}var W=Array.isArray,g=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=m.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V={pending:!1,data:null,method:null,action:null},ne=[],re=-1;function we(e){return{current:e}}function oe(e){0>re||(e.current=ne[re],ne[re]=null,re--)}function Q(e,t){re++,ne[re]=e.current,e.current=t}var ce=we(null),ee=we(null),q=we(null),fe=we(null);function be(e,t){switch(Q(q,t),Q(ee,e),Q(ce,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=vf(t),e=jf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}oe(ce),Q(ce,e)}function pe(){oe(ce),oe(ee),oe(q)}function We(e){e.memoizedState!==null&&Q(fe,e);var t=ce.current,l=jf(t,e.type);t!==l&&(Q(ee,e),Q(ce,l))}function Ze(e){ee.current===e&&(oe(ce),oe(ee)),fe.current===e&&(oe(fe),ks._currentValue=V)}var Ve=Object.prototype.hasOwnProperty,Fl=u.unstable_scheduleCallback,Va=u.unstable_cancelCallback,vi=u.unstable_shouldYield,ji=u.unstable_requestPaint,dt=u.unstable_now,Ni=u.unstable_getCurrentPriorityLevel,Ps=u.unstable_ImmediatePriority,en=u.unstable_UserBlockingPriority,Wl=u.unstable_NormalPriority,Si=u.unstable_LowPriority,Ka=u.unstable_IdlePriority,tn=u.log,ln=u.unstable_setDisableYieldValue,nl=null,tt=null;function Et(e){if(typeof tn=="function"&&ln(e),tt&&typeof tt.setStrictMode=="function")try{tt.setStrictMode(nl,e)}catch{}}var le=Math.clz32?Math.clz32:Mt,je=Math.log,qe=Math.LN2;function Mt(e){return e>>>=0,e===0?32:31-(je(e)/qe|0)|0}var il=256,Il=4194304;function Yt(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Pl(e,t,l){var a=e.pendingLanes;if(a===0)return 0;var n=0,i=e.suspendedLanes,c=e.pingedLanes;e=e.warmLanes;var r=a&134217727;return r!==0?(a=r&~i,a!==0?n=Yt(a):(c&=r,c!==0?n=Yt(c):l||(l=r&~e,l!==0&&(n=Yt(l))))):(r=a&~i,r!==0?n=Yt(r):c!==0?n=Yt(c):l||(l=a&~e,l!==0&&(n=Yt(l)))),n===0?0:t!==0&&t!==n&&(t&i)===0&&(i=n&-n,l=t&-t,i>=l||i===32&&(l&4194048)!==0)?t:n}function cl(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Ja(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ea(){var e=il;return il<<=1,(il&4194048)===0&&(il=256),e}function an(){var e=Il;return Il<<=1,(Il&62914560)===0&&(Il=4194304),e}function $a(e){for(var t=[],l=0;31>l;l++)t.push(e);return t}function st(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Xt(e,t,l,a,n,i){var c=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var r=e.entanglements,f=e.expirationTimes,v=e.hiddenUpdates;for(l=c&~l;0<l;){var M=31-le(l),U=1<<M;r[M]=0,f[M]=-1;var j=v[M];if(j!==null)for(v[M]=null,M=0;M<j.length;M++){var w=j[M];w!==null&&(w.lane&=-536870913)}l&=~U}a!==0&&ar(e,a,0),i!==0&&n===0&&e.tag!==0&&(e.suspendedLanes|=i&~(c&~t))}function ar(e,t,l){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-le(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|l&4194090}function sr(e,t){var l=e.entangledLanes|=t;for(e=e.entanglements;l;){var a=31-le(l),n=1<<a;n&t|e[a]&t&&(e[a]|=t),l&=~n}}function wi(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Di(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function nr(){var e=B.p;return e!==0?e:(e=window.event,e===void 0?32:Yf(e.type))}function vm(e,t){var l=B.p;try{return B.p=e,t()}finally{B.p=l}}var ul=Math.random().toString(36).slice(2),lt="__reactFiber$"+ul,it="__reactProps$"+ul,ta="__reactContainer$"+ul,Ti="__reactEvents$"+ul,jm="__reactListeners$"+ul,Nm="__reactHandles$"+ul,ir="__reactResources$"+ul,Fa="__reactMarker$"+ul;function Ai(e){delete e[lt],delete e[it],delete e[Ti],delete e[jm],delete e[Nm]}function la(e){var t=e[lt];if(t)return t;for(var l=e.parentNode;l;){if(t=l[ta]||l[lt]){if(l=t.alternate,t.child!==null||l!==null&&l.child!==null)for(e=Df(e);e!==null;){if(l=e[lt])return l;e=Df(e)}return t}e=l,l=e.parentNode}return null}function aa(e){if(e=e[lt]||e[ta]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function Wa(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function sa(e){var t=e[ir];return t||(t=e[ir]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ke(e){e[Fa]=!0}var cr=new Set,ur={};function Ul(e,t){na(e,t),na(e+"Capture",t)}function na(e,t){for(ur[e]=t,e=0;e<t.length;e++)cr.add(t[e])}var Sm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rr={},or={};function wm(e){return Ve.call(or,e)?!0:Ve.call(rr,e)?!1:Sm.test(e)?or[e]=!0:(rr[e]=!0,!1)}function sn(e,t,l){if(wm(t))if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+l)}}function nn(e,t,l){if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+l)}}function Lt(e,t,l,a){if(a===null)e.removeAttribute(l);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(t,l,""+a)}}var Ci,dr;function ia(e){if(Ci===void 0)try{throw Error()}catch(l){var t=l.stack.trim().match(/\n( *(at )?)/);Ci=t&&t[1]||"",dr=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ci+e+dr}var Ei=!1;function Mi(e,t){if(!e||Ei)return"";Ei=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var U=function(){throw Error()};if(Object.defineProperty(U.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(U,[])}catch(w){var j=w}Reflect.construct(e,[],U)}else{try{U.call()}catch(w){j=w}e.call(U.prototype)}}else{try{throw Error()}catch(w){j=w}(U=e())&&typeof U.catch=="function"&&U.catch(function(){})}}catch(w){if(w&&j&&typeof w.stack=="string")return[w.stack,j.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=a.DetermineComponentFrameRoot(),c=i[0],r=i[1];if(c&&r){var f=c.split(`
`),v=r.split(`
`);for(n=a=0;a<f.length&&!f[a].includes("DetermineComponentFrameRoot");)a++;for(;n<v.length&&!v[n].includes("DetermineComponentFrameRoot");)n++;if(a===f.length||n===v.length)for(a=f.length-1,n=v.length-1;1<=a&&0<=n&&f[a]!==v[n];)n--;for(;1<=a&&0<=n;a--,n--)if(f[a]!==v[n]){if(a!==1||n!==1)do if(a--,n--,0>n||f[a]!==v[n]){var M=`
`+f[a].replace(" at new "," at ");return e.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",e.displayName)),M}while(1<=a&&0<=n);break}}}finally{Ei=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?ia(l):""}function Dm(e){switch(e.tag){case 26:case 27:case 5:return ia(e.type);case 16:return ia("Lazy");case 13:return ia("Suspense");case 19:return ia("SuspenseList");case 0:case 15:return Mi(e.type,!1);case 11:return Mi(e.type.render,!1);case 1:return Mi(e.type,!0);case 31:return ia("Activity");default:return""}}function fr(e){try{var t="";do t+=Dm(e),e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}function vt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function mr(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Tm(e){var t=mr(e)?"checked":"value",l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var n=l.get,i=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(c){a=""+c,i.call(this,c)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(c){a=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cn(e){e._valueTracker||(e._valueTracker=Tm(e))}function hr(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var l=t.getValue(),a="";return e&&(a=mr(e)?e.checked?"true":"false":e.value),e=a,e!==l?(t.setValue(e),!0):!1}function un(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Am=/[\n"\\]/g;function jt(e){return e.replace(Am,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function zi(e,t,l,a,n,i,c,r){e.name="",c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"?e.type=c:e.removeAttribute("type"),t!=null?c==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+vt(t)):e.value!==""+vt(t)&&(e.value=""+vt(t)):c!=="submit"&&c!=="reset"||e.removeAttribute("value"),t!=null?Oi(e,c,vt(t)):l!=null?Oi(e,c,vt(l)):a!=null&&e.removeAttribute("value"),n==null&&i!=null&&(e.defaultChecked=!!i),n!=null&&(e.checked=n&&typeof n!="function"&&typeof n!="symbol"),r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?e.name=""+vt(r):e.removeAttribute("name")}function xr(e,t,l,a,n,i,c,r){if(i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(e.type=i),t!=null||l!=null){if(!(i!=="submit"&&i!=="reset"||t!=null))return;l=l!=null?""+vt(l):"",t=t!=null?""+vt(t):l,r||t===e.value||(e.value=t),e.defaultValue=t}a=a??n,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=r?e.checked:!!a,e.defaultChecked=!!a,c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.name=c)}function Oi(e,t,l){t==="number"&&un(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function ca(e,t,l,a){if(e=e.options,t){t={};for(var n=0;n<l.length;n++)t["$"+l[n]]=!0;for(l=0;l<e.length;l++)n=t.hasOwnProperty("$"+e[l].value),e[l].selected!==n&&(e[l].selected=n),n&&a&&(e[l].defaultSelected=!0)}else{for(l=""+vt(l),t=null,n=0;n<e.length;n++){if(e[n].value===l){e[n].selected=!0,a&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function gr(e,t,l){if(t!=null&&(t=""+vt(t),t!==e.value&&(e.value=t),l==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=l!=null?""+vt(l):""}function br(e,t,l,a){if(t==null){if(a!=null){if(l!=null)throw Error(o(92));if(W(a)){if(1<a.length)throw Error(o(93));a=a[0]}l=a}l==null&&(l=""),t=l}l=vt(t),e.defaultValue=l,a=e.textContent,a===l&&a!==""&&a!==null&&(e.value=a)}function ua(e,t){if(t){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=t;return}}e.textContent=t}var Cm=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pr(e,t,l){var a=t.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,l):typeof l!="number"||l===0||Cm.has(t)?t==="float"?e.cssFloat=l:e[t]=(""+l).trim():e[t]=l+"px"}function yr(e,t,l){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,l!=null){for(var a in l)!l.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var n in t)a=t[n],t.hasOwnProperty(n)&&l[n]!==a&&pr(e,n,a)}else for(var i in t)t.hasOwnProperty(i)&&pr(e,i,t[i])}function Ui(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Em=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mm=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rn(e){return Mm.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var qi=null;function Bi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ra=null,oa=null;function vr(e){var t=aa(e);if(t&&(e=t.stateNode)){var l=e[it]||null;e:switch(e=t.stateNode,t.type){case"input":if(zi(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),t=l.name,l.type==="radio"&&t!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+jt(""+t)+'"][type="radio"]'),t=0;t<l.length;t++){var a=l[t];if(a!==e&&a.form===e.form){var n=a[it]||null;if(!n)throw Error(o(90));zi(a,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<l.length;t++)a=l[t],a.form===e.form&&hr(a)}break e;case"textarea":gr(e,l.value,l.defaultValue);break e;case"select":t=l.value,t!=null&&ca(e,!!l.multiple,t,!1)}}}var _i=!1;function jr(e,t,l){if(_i)return e(t,l);_i=!0;try{var a=e(t);return a}finally{if(_i=!1,(ra!==null||oa!==null)&&(Jn(),ra&&(t=ra,e=oa,oa=ra=null,vr(t),e)))for(t=0;t<e.length;t++)vr(e[t])}}function Ia(e,t){var l=e.stateNode;if(l===null)return null;var a=l[it]||null;if(a===null)return null;l=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(o(231,t,typeof l));return l}var Gt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ri=!1;if(Gt)try{var Pa={};Object.defineProperty(Pa,"passive",{get:function(){Ri=!0}}),window.addEventListener("test",Pa,Pa),window.removeEventListener("test",Pa,Pa)}catch{Ri=!1}var rl=null,Hi=null,on=null;function Nr(){if(on)return on;var e,t=Hi,l=t.length,a,n="value"in rl?rl.value:rl.textContent,i=n.length;for(e=0;e<l&&t[e]===n[e];e++);var c=l-e;for(a=1;a<=c&&t[l-a]===n[i-a];a++);return on=n.slice(e,1<a?1-a:void 0)}function dn(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fn(){return!0}function Sr(){return!1}function ct(e){function t(l,a,n,i,c){this._reactName=l,this._targetInst=n,this.type=a,this.nativeEvent=i,this.target=c,this.currentTarget=null;for(var r in e)e.hasOwnProperty(r)&&(l=e[r],this[r]=l?l(i):i[r]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?fn:Sr,this.isPropagationStopped=Sr,this}return E(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=fn)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=fn)},persist:function(){},isPersistent:fn}),t}var ql={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mn=ct(ql),es=E({},ql,{view:0,detail:0}),zm=ct(es),ki,Yi,ts,hn=E({},es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Li,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ts&&(ts&&e.type==="mousemove"?(ki=e.screenX-ts.screenX,Yi=e.screenY-ts.screenY):Yi=ki=0,ts=e),ki)},movementY:function(e){return"movementY"in e?e.movementY:Yi}}),wr=ct(hn),Om=E({},hn,{dataTransfer:0}),Um=ct(Om),qm=E({},es,{relatedTarget:0}),Xi=ct(qm),Bm=E({},ql,{animationName:0,elapsedTime:0,pseudoElement:0}),_m=ct(Bm),Rm=E({},ql,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Hm=ct(Rm),km=E({},ql,{data:0}),Dr=ct(km),Ym={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Lm[e])?!!t[e]:!1}function Li(){return Gm}var Qm=E({},es,{key:function(e){if(e.key){var t=Ym[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=dn(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Xm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Li,charCode:function(e){return e.type==="keypress"?dn(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?dn(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Zm=ct(Qm),Vm=E({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tr=ct(Vm),Km=E({},es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Li}),Jm=ct(Km),$m=E({},ql,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fm=ct($m),Wm=E({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Im=ct(Wm),Pm=E({},ql,{newState:0,oldState:0}),eh=ct(Pm),th=[9,13,27,32],Gi=Gt&&"CompositionEvent"in window,ls=null;Gt&&"documentMode"in document&&(ls=document.documentMode);var lh=Gt&&"TextEvent"in window&&!ls,Ar=Gt&&(!Gi||ls&&8<ls&&11>=ls),Cr=" ",Er=!1;function Mr(e,t){switch(e){case"keyup":return th.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zr(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var da=!1;function ah(e,t){switch(e){case"compositionend":return zr(t);case"keypress":return t.which!==32?null:(Er=!0,Cr);case"textInput":return e=t.data,e===Cr&&Er?null:e;default:return null}}function sh(e,t){if(da)return e==="compositionend"||!Gi&&Mr(e,t)?(e=Nr(),on=Hi=rl=null,da=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ar&&t.locale!=="ko"?null:t.data;default:return null}}var nh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Or(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!nh[e.type]:t==="textarea"}function Ur(e,t,l,a){ra?oa?oa.push(a):oa=[a]:ra=a,t=ei(t,"onChange"),0<t.length&&(l=new mn("onChange","change",null,l,a),e.push({event:l,listeners:t}))}var as=null,ss=null;function ih(e){xf(e,0)}function xn(e){var t=Wa(e);if(hr(t))return e}function qr(e,t){if(e==="change")return t}var Br=!1;if(Gt){var Qi;if(Gt){var Zi="oninput"in document;if(!Zi){var _r=document.createElement("div");_r.setAttribute("oninput","return;"),Zi=typeof _r.oninput=="function"}Qi=Zi}else Qi=!1;Br=Qi&&(!document.documentMode||9<document.documentMode)}function Rr(){as&&(as.detachEvent("onpropertychange",Hr),ss=as=null)}function Hr(e){if(e.propertyName==="value"&&xn(ss)){var t=[];Ur(t,ss,e,Bi(e)),jr(ih,t)}}function ch(e,t,l){e==="focusin"?(Rr(),as=t,ss=l,as.attachEvent("onpropertychange",Hr)):e==="focusout"&&Rr()}function uh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return xn(ss)}function rh(e,t){if(e==="click")return xn(t)}function oh(e,t){if(e==="input"||e==="change")return xn(t)}function dh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ft=typeof Object.is=="function"?Object.is:dh;function ns(e,t){if(ft(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var l=Object.keys(e),a=Object.keys(t);if(l.length!==a.length)return!1;for(a=0;a<l.length;a++){var n=l[a];if(!Ve.call(t,n)||!ft(e[n],t[n]))return!1}return!0}function kr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yr(e,t){var l=kr(e);e=0;for(var a;l;){if(l.nodeType===3){if(a=e+l.textContent.length,e<=t&&a>=t)return{node:l,offset:t-e};e=a}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=kr(l)}}function Xr(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Xr(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Lr(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=un(e.document);t instanceof e.HTMLIFrameElement;){try{var l=typeof t.contentWindow.location.href=="string"}catch{l=!1}if(l)e=t.contentWindow;else break;t=un(e.document)}return t}function Vi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var fh=Gt&&"documentMode"in document&&11>=document.documentMode,fa=null,Ki=null,is=null,Ji=!1;function Gr(e,t,l){var a=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;Ji||fa==null||fa!==un(a)||(a=fa,"selectionStart"in a&&Vi(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),is&&ns(is,a)||(is=a,a=ei(Ki,"onSelect"),0<a.length&&(t=new mn("onSelect","select",null,t,l),e.push({event:t,listeners:a}),t.target=fa)))}function Bl(e,t){var l={};return l[e.toLowerCase()]=t.toLowerCase(),l["Webkit"+e]="webkit"+t,l["Moz"+e]="moz"+t,l}var ma={animationend:Bl("Animation","AnimationEnd"),animationiteration:Bl("Animation","AnimationIteration"),animationstart:Bl("Animation","AnimationStart"),transitionrun:Bl("Transition","TransitionRun"),transitionstart:Bl("Transition","TransitionStart"),transitioncancel:Bl("Transition","TransitionCancel"),transitionend:Bl("Transition","TransitionEnd")},$i={},Qr={};Gt&&(Qr=document.createElement("div").style,"AnimationEvent"in window||(delete ma.animationend.animation,delete ma.animationiteration.animation,delete ma.animationstart.animation),"TransitionEvent"in window||delete ma.transitionend.transition);function _l(e){if($i[e])return $i[e];if(!ma[e])return e;var t=ma[e],l;for(l in t)if(t.hasOwnProperty(l)&&l in Qr)return $i[e]=t[l];return e}var Zr=_l("animationend"),Vr=_l("animationiteration"),Kr=_l("animationstart"),mh=_l("transitionrun"),hh=_l("transitionstart"),xh=_l("transitioncancel"),Jr=_l("transitionend"),$r=new Map,Fi="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fi.push("scrollEnd");function zt(e,t){$r.set(e,t),Ul(t,[e])}var Fr=new WeakMap;function Nt(e,t){if(typeof e=="object"&&e!==null){var l=Fr.get(e);return l!==void 0?l:(t={value:e,source:t,stack:fr(t)},Fr.set(e,t),t)}return{value:e,source:t,stack:fr(t)}}var St=[],ha=0,Wi=0;function gn(){for(var e=ha,t=Wi=ha=0;t<e;){var l=St[t];St[t++]=null;var a=St[t];St[t++]=null;var n=St[t];St[t++]=null;var i=St[t];if(St[t++]=null,a!==null&&n!==null){var c=a.pending;c===null?n.next=n:(n.next=c.next,c.next=n),a.pending=n}i!==0&&Wr(l,n,i)}}function bn(e,t,l,a){St[ha++]=e,St[ha++]=t,St[ha++]=l,St[ha++]=a,Wi|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function Ii(e,t,l,a){return bn(e,t,l,a),pn(e)}function xa(e,t){return bn(e,null,null,t),pn(e)}function Wr(e,t,l){e.lanes|=l;var a=e.alternate;a!==null&&(a.lanes|=l);for(var n=!1,i=e.return;i!==null;)i.childLanes|=l,a=i.alternate,a!==null&&(a.childLanes|=l),i.tag===22&&(e=i.stateNode,e===null||e._visibility&1||(n=!0)),e=i,i=i.return;return e.tag===3?(i=e.stateNode,n&&t!==null&&(n=31-le(l),e=i.hiddenUpdates,a=e[n],a===null?e[n]=[t]:a.push(t),t.lane=l|536870912),i):null}function pn(e){if(50<zs)throw zs=0,su=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var ga={};function gh(e,t,l,a){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mt(e,t,l,a){return new gh(e,t,l,a)}function Pi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Qt(e,t){var l=e.alternate;return l===null?(l=mt(e.tag,t,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=t,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,t=e.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function Ir(e,t){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,t=l.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function yn(e,t,l,a,n,i){var c=0;if(a=e,typeof e=="function")Pi(e)&&(c=1);else if(typeof e=="string")c=p0(e,l,ce.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ve:return e=mt(31,l,t,n),e.elementType=ve,e.lanes=i,e;case K:return Rl(l.children,n,i,t);case T:c=8,n|=24;break;case H:return e=mt(12,l,t,n|2),e.elementType=H,e.lanes=i,e;case te:return e=mt(13,l,t,n),e.elementType=te,e.lanes=i,e;case ue:return e=mt(19,l,t,n),e.elementType=ue,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case S:case J:c=10;break e;case $:c=9;break e;case G:c=11;break e;case ye:c=14;break e;case he:c=16,a=null;break e}c=29,l=Error(o(130,e===null?"null":typeof e,"")),a=null}return t=mt(c,l,t,n),t.elementType=e,t.type=a,t.lanes=i,t}function Rl(e,t,l,a){return e=mt(7,e,a,t),e.lanes=l,e}function ec(e,t,l){return e=mt(6,e,null,t),e.lanes=l,e}function tc(e,t,l){return t=mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=l,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var ba=[],pa=0,vn=null,jn=0,wt=[],Dt=0,Hl=null,Zt=1,Vt="";function kl(e,t){ba[pa++]=jn,ba[pa++]=vn,vn=e,jn=t}function Pr(e,t,l){wt[Dt++]=Zt,wt[Dt++]=Vt,wt[Dt++]=Hl,Hl=e;var a=Zt;e=Vt;var n=32-le(a)-1;a&=~(1<<n),l+=1;var i=32-le(t)+n;if(30<i){var c=n-n%5;i=(a&(1<<c)-1).toString(32),a>>=c,n-=c,Zt=1<<32-le(t)+n|l<<n|a,Vt=i+e}else Zt=1<<i|l<<n|a,Vt=e}function lc(e){e.return!==null&&(kl(e,1),Pr(e,1,0))}function ac(e){for(;e===vn;)vn=ba[--pa],ba[pa]=null,jn=ba[--pa],ba[pa]=null;for(;e===Hl;)Hl=wt[--Dt],wt[Dt]=null,Vt=wt[--Dt],wt[Dt]=null,Zt=wt[--Dt],wt[Dt]=null}var nt=null,Re=null,De=!1,Yl=null,qt=!1,sc=Error(o(519));function Xl(e){var t=Error(o(418,""));throw rs(Nt(t,e)),sc}function eo(e){var t=e.stateNode,l=e.type,a=e.memoizedProps;switch(t[lt]=e,t[it]=a,l){case"dialog":ge("cancel",t),ge("close",t);break;case"iframe":case"object":case"embed":ge("load",t);break;case"video":case"audio":for(l=0;l<Us.length;l++)ge(Us[l],t);break;case"source":ge("error",t);break;case"img":case"image":case"link":ge("error",t),ge("load",t);break;case"details":ge("toggle",t);break;case"input":ge("invalid",t),xr(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0),cn(t);break;case"select":ge("invalid",t);break;case"textarea":ge("invalid",t),br(t,a.value,a.defaultValue,a.children),cn(t)}l=a.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||t.textContent===""+l||a.suppressHydrationWarning===!0||yf(t.textContent,l)?(a.popover!=null&&(ge("beforetoggle",t),ge("toggle",t)),a.onScroll!=null&&ge("scroll",t),a.onScrollEnd!=null&&ge("scrollend",t),a.onClick!=null&&(t.onclick=ti),t=!0):t=!1,t||Xl(e)}function to(e){for(nt=e.return;nt;)switch(nt.tag){case 5:case 13:qt=!1;return;case 27:case 3:qt=!0;return;default:nt=nt.return}}function cs(e){if(e!==nt)return!1;if(!De)return to(e),De=!0,!1;var t=e.tag,l;if((l=t!==3&&t!==27)&&((l=t===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||vu(e.type,e.memoizedProps)),l=!l),l&&Re&&Xl(e),to(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(l=e.data,l==="/$"){if(t===0){Re=Ut(e.nextSibling);break e}t--}else l!=="$"&&l!=="$!"&&l!=="$?"||t++;e=e.nextSibling}Re=null}}else t===27?(t=Re,Dl(e.type)?(e=wu,wu=null,Re=e):Re=t):Re=nt?Ut(e.stateNode.nextSibling):null;return!0}function us(){Re=nt=null,De=!1}function lo(){var e=Yl;return e!==null&&(ot===null?ot=e:ot.push.apply(ot,e),Yl=null),e}function rs(e){Yl===null?Yl=[e]:Yl.push(e)}var nc=we(null),Ll=null,Kt=null;function ol(e,t,l){Q(nc,t._currentValue),t._currentValue=l}function Jt(e){e._currentValue=nc.current,oe(nc)}function ic(e,t,l){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===l)break;e=e.return}}function cc(e,t,l,a){var n=e.child;for(n!==null&&(n.return=e);n!==null;){var i=n.dependencies;if(i!==null){var c=n.child;i=i.firstContext;e:for(;i!==null;){var r=i;i=n;for(var f=0;f<t.length;f++)if(r.context===t[f]){i.lanes|=l,r=i.alternate,r!==null&&(r.lanes|=l),ic(i.return,l,e),a||(c=null);break e}i=r.next}}else if(n.tag===18){if(c=n.return,c===null)throw Error(o(341));c.lanes|=l,i=c.alternate,i!==null&&(i.lanes|=l),ic(c,l,e),c=null}else c=n.child;if(c!==null)c.return=n;else for(c=n;c!==null;){if(c===e){c=null;break}if(n=c.sibling,n!==null){n.return=c.return,c=n;break}c=c.return}n=c}}function os(e,t,l,a){e=null;for(var n=t,i=!1;n!==null;){if(!i){if((n.flags&524288)!==0)i=!0;else if((n.flags&262144)!==0)break}if(n.tag===10){var c=n.alternate;if(c===null)throw Error(o(387));if(c=c.memoizedProps,c!==null){var r=n.type;ft(n.pendingProps.value,c.value)||(e!==null?e.push(r):e=[r])}}else if(n===fe.current){if(c=n.alternate,c===null)throw Error(o(387));c.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(e!==null?e.push(ks):e=[ks])}n=n.return}e!==null&&cc(t,e,l,a),t.flags|=262144}function Nn(e){for(e=e.firstContext;e!==null;){if(!ft(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Gl(e){Ll=e,Kt=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function at(e){return ao(Ll,e)}function Sn(e,t){return Ll===null&&Gl(e),ao(e,t)}function ao(e,t){var l=t._currentValue;if(t={context:t,memoizedValue:l,next:null},Kt===null){if(e===null)throw Error(o(308));Kt=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Kt=Kt.next=t;return l}var bh=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(l,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(l){return l()})}},ph=u.unstable_scheduleCallback,yh=u.unstable_NormalPriority,Ge={$$typeof:J,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function uc(){return{controller:new bh,data:new Map,refCount:0}}function ds(e){e.refCount--,e.refCount===0&&ph(yh,function(){e.controller.abort()})}var fs=null,rc=0,ya=0,va=null;function vh(e,t){if(fs===null){var l=fs=[];rc=0,ya=du(),va={status:"pending",value:void 0,then:function(a){l.push(a)}}}return rc++,t.then(so,so),t}function so(){if(--rc===0&&fs!==null){va!==null&&(va.status="fulfilled");var e=fs;fs=null,ya=0,va=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function jh(e,t){var l=[],a={status:"pending",value:null,reason:null,then:function(n){l.push(n)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var n=0;n<l.length;n++)(0,l[n])(t)},function(n){for(a.status="rejected",a.reason=n,n=0;n<l.length;n++)(0,l[n])(void 0)}),a}var no=g.S;g.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&vh(e,t),no!==null&&no(e,t)};var Ql=we(null);function oc(){var e=Ql.current;return e!==null?e:Oe.pooledCache}function wn(e,t){t===null?Q(Ql,Ql.current):Q(Ql,t.pool)}function io(){var e=oc();return e===null?null:{parent:Ge._currentValue,pool:e}}var ms=Error(o(460)),co=Error(o(474)),Dn=Error(o(542)),dc={then:function(){}};function uo(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Tn(){}function ro(e,t,l){switch(l=e[l],l===void 0?e.push(t):l!==t&&(t.then(Tn,Tn),t=l),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,fo(e),e;default:if(typeof t.status=="string")t.then(Tn,Tn);else{if(e=Oe,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var n=t;n.status="fulfilled",n.value=a}},function(a){if(t.status==="pending"){var n=t;n.status="rejected",n.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,fo(e),e}throw hs=t,ms}}var hs=null;function oo(){if(hs===null)throw Error(o(459));var e=hs;return hs=null,e}function fo(e){if(e===ms||e===Dn)throw Error(o(483))}var dl=!1;function fc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function fl(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ml(e,t,l){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(Te&2)!==0){var n=a.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),a.pending=t,t=pn(e),Wr(e,null,l),t}return bn(e,a,t,l),pn(e)}function xs(e,t,l){if(t=t.updateQueue,t!==null&&(t=t.shared,(l&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,l|=a,t.lanes=l,sr(e,l)}}function hc(e,t){var l=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,l===a)){var n=null,i=null;if(l=l.firstBaseUpdate,l!==null){do{var c={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};i===null?n=i=c:i=i.next=c,l=l.next}while(l!==null);i===null?n=i=t:i=i.next=t}else n=i=t;l={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:i,shared:a.shared,callbacks:a.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=t:e.next=t,l.lastBaseUpdate=t}var xc=!1;function gs(){if(xc){var e=va;if(e!==null)throw e}}function bs(e,t,l,a){xc=!1;var n=e.updateQueue;dl=!1;var i=n.firstBaseUpdate,c=n.lastBaseUpdate,r=n.shared.pending;if(r!==null){n.shared.pending=null;var f=r,v=f.next;f.next=null,c===null?i=v:c.next=v,c=f;var M=e.alternate;M!==null&&(M=M.updateQueue,r=M.lastBaseUpdate,r!==c&&(r===null?M.firstBaseUpdate=v:r.next=v,M.lastBaseUpdate=f))}if(i!==null){var U=n.baseState;c=0,M=v=f=null,r=i;do{var j=r.lane&-536870913,w=j!==r.lane;if(w?(Ne&j)===j:(a&j)===j){j!==0&&j===ya&&(xc=!0),M!==null&&(M=M.next={lane:0,tag:r.tag,payload:r.payload,callback:null,next:null});e:{var ie=e,ae=r;j=t;var Me=l;switch(ae.tag){case 1:if(ie=ae.payload,typeof ie=="function"){U=ie.call(Me,U,j);break e}U=ie;break e;case 3:ie.flags=ie.flags&-65537|128;case 0:if(ie=ae.payload,j=typeof ie=="function"?ie.call(Me,U,j):ie,j==null)break e;U=E({},U,j);break e;case 2:dl=!0}}j=r.callback,j!==null&&(e.flags|=64,w&&(e.flags|=8192),w=n.callbacks,w===null?n.callbacks=[j]:w.push(j))}else w={lane:j,tag:r.tag,payload:r.payload,callback:r.callback,next:null},M===null?(v=M=w,f=U):M=M.next=w,c|=j;if(r=r.next,r===null){if(r=n.shared.pending,r===null)break;w=r,r=w.next,w.next=null,n.lastBaseUpdate=w,n.shared.pending=null}}while(!0);M===null&&(f=U),n.baseState=f,n.firstBaseUpdate=v,n.lastBaseUpdate=M,i===null&&(n.shared.lanes=0),jl|=c,e.lanes=c,e.memoizedState=U}}function mo(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function ho(e,t){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)mo(l[e],t)}var ja=we(null),An=we(0);function xo(e,t){e=tl,Q(An,e),Q(ja,t),tl=e|t.baseLanes}function gc(){Q(An,tl),Q(ja,ja.current)}function bc(){tl=An.current,oe(ja),oe(An)}var hl=0,de=null,Ce=null,Xe=null,Cn=!1,Na=!1,Zl=!1,En=0,ps=0,Sa=null,Nh=0;function ke(){throw Error(o(321))}function pc(e,t){if(t===null)return!1;for(var l=0;l<t.length&&l<e.length;l++)if(!ft(e[l],t[l]))return!1;return!0}function yc(e,t,l,a,n,i){return hl=i,de=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,g.H=e===null||e.memoizedState===null?Io:Po,Zl=!1,i=l(a,n),Zl=!1,Na&&(i=bo(t,l,a,n)),go(e),i}function go(e){g.H=Bn;var t=Ce!==null&&Ce.next!==null;if(hl=0,Xe=Ce=de=null,Cn=!1,ps=0,Sa=null,t)throw Error(o(300));e===null||Je||(e=e.dependencies,e!==null&&Nn(e)&&(Je=!0))}function bo(e,t,l,a){de=e;var n=0;do{if(Na&&(Sa=null),ps=0,Na=!1,25<=n)throw Error(o(301));if(n+=1,Xe=Ce=null,e.updateQueue!=null){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,i.memoCache!=null&&(i.memoCache.index=0)}g.H=Eh,i=t(l,a)}while(Na);return i}function Sh(){var e=g.H,t=e.useState()[0];return t=typeof t.then=="function"?ys(t):t,e=e.useState()[0],(Ce!==null?Ce.memoizedState:null)!==e&&(de.flags|=1024),t}function vc(){var e=En!==0;return En=0,e}function jc(e,t,l){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l}function Nc(e){if(Cn){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Cn=!1}hl=0,Xe=Ce=de=null,Na=!1,ps=En=0,Sa=null}function ut(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xe===null?de.memoizedState=Xe=e:Xe=Xe.next=e,Xe}function Le(){if(Ce===null){var e=de.alternate;e=e!==null?e.memoizedState:null}else e=Ce.next;var t=Xe===null?de.memoizedState:Xe.next;if(t!==null)Xe=t,Ce=e;else{if(e===null)throw de.alternate===null?Error(o(467)):Error(o(310));Ce=e,e={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},Xe===null?de.memoizedState=Xe=e:Xe=Xe.next=e}return Xe}function Sc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ys(e){var t=ps;return ps+=1,Sa===null&&(Sa=[]),e=ro(Sa,e,t),t=de,(Xe===null?t.memoizedState:Xe.next)===null&&(t=t.alternate,g.H=t===null||t.memoizedState===null?Io:Po),e}function Mn(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return ys(e);if(e.$$typeof===J)return at(e)}throw Error(o(438,String(e)))}function wc(e){var t=null,l=de.updateQueue;if(l!==null&&(t=l.memoCache),t==null){var a=de.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(n){return n.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),l===null&&(l=Sc(),de.updateQueue=l),l.memoCache=t,l=t.data[t.index],l===void 0)for(l=t.data[t.index]=Array(e),a=0;a<e;a++)l[a]=Ue;return t.index++,l}function $t(e,t){return typeof t=="function"?t(e):t}function zn(e){var t=Le();return Dc(t,Ce,e)}function Dc(e,t,l){var a=e.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=l;var n=e.baseQueue,i=a.pending;if(i!==null){if(n!==null){var c=n.next;n.next=i.next,i.next=c}t.baseQueue=n=i,a.pending=null}if(i=e.baseState,n===null)e.memoizedState=i;else{t=n.next;var r=c=null,f=null,v=t,M=!1;do{var U=v.lane&-536870913;if(U!==v.lane?(Ne&U)===U:(hl&U)===U){var j=v.revertLane;if(j===0)f!==null&&(f=f.next={lane:0,revertLane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),U===ya&&(M=!0);else if((hl&j)===j){v=v.next,j===ya&&(M=!0);continue}else U={lane:0,revertLane:v.revertLane,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null},f===null?(r=f=U,c=i):f=f.next=U,de.lanes|=j,jl|=j;U=v.action,Zl&&l(i,U),i=v.hasEagerState?v.eagerState:l(i,U)}else j={lane:U,revertLane:v.revertLane,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null},f===null?(r=f=j,c=i):f=f.next=j,de.lanes|=U,jl|=U;v=v.next}while(v!==null&&v!==t);if(f===null?c=i:f.next=r,!ft(i,e.memoizedState)&&(Je=!0,M&&(l=va,l!==null)))throw l;e.memoizedState=i,e.baseState=c,e.baseQueue=f,a.lastRenderedState=i}return n===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Tc(e){var t=Le(),l=t.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=e;var a=l.dispatch,n=l.pending,i=t.memoizedState;if(n!==null){l.pending=null;var c=n=n.next;do i=e(i,c.action),c=c.next;while(c!==n);ft(i,t.memoizedState)||(Je=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),l.lastRenderedState=i}return[i,a]}function po(e,t,l){var a=de,n=Le(),i=De;if(i){if(l===void 0)throw Error(o(407));l=l()}else l=t();var c=!ft((Ce||n).memoizedState,l);c&&(n.memoizedState=l,Je=!0),n=n.queue;var r=jo.bind(null,a,n,e);if(vs(2048,8,r,[e]),n.getSnapshot!==t||c||Xe!==null&&Xe.memoizedState.tag&1){if(a.flags|=2048,wa(9,On(),vo.bind(null,a,n,l,t),null),Oe===null)throw Error(o(349));i||(hl&124)!==0||yo(a,t,l)}return l}function yo(e,t,l){e.flags|=16384,e={getSnapshot:t,value:l},t=de.updateQueue,t===null?(t=Sc(),de.updateQueue=t,t.stores=[e]):(l=t.stores,l===null?t.stores=[e]:l.push(e))}function vo(e,t,l,a){t.value=l,t.getSnapshot=a,No(t)&&So(e)}function jo(e,t,l){return l(function(){No(t)&&So(e)})}function No(e){var t=e.getSnapshot;e=e.value;try{var l=t();return!ft(e,l)}catch{return!0}}function So(e){var t=xa(e,2);t!==null&&pt(t,e,2)}function Ac(e){var t=ut();if(typeof e=="function"){var l=e;if(e=l(),Zl){Et(!0);try{l()}finally{Et(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$t,lastRenderedState:e},t}function wo(e,t,l,a){return e.baseState=l,Dc(e,Ce,typeof a=="function"?a:$t)}function wh(e,t,l,a,n){if(qn(e))throw Error(o(485));if(e=t.action,e!==null){var i={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(c){i.listeners.push(c)}};g.T!==null?l(!0):i.isTransition=!1,a(i),l=t.pending,l===null?(i.next=t.pending=i,Do(t,i)):(i.next=l.next,t.pending=l.next=i)}}function Do(e,t){var l=t.action,a=t.payload,n=e.state;if(t.isTransition){var i=g.T,c={};g.T=c;try{var r=l(n,a),f=g.S;f!==null&&f(c,r),To(e,t,r)}catch(v){Cc(e,t,v)}finally{g.T=i}}else try{i=l(n,a),To(e,t,i)}catch(v){Cc(e,t,v)}}function To(e,t,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(a){Ao(e,t,a)},function(a){return Cc(e,t,a)}):Ao(e,t,l)}function Ao(e,t,l){t.status="fulfilled",t.value=l,Co(t),e.state=l,t=e.pending,t!==null&&(l=t.next,l===t?e.pending=null:(l=l.next,t.next=l,Do(e,l)))}function Cc(e,t,l){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=l,Co(t),t=t.next;while(t!==a)}e.action=null}function Co(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Eo(e,t){return t}function Mo(e,t){if(De){var l=Oe.formState;if(l!==null){e:{var a=de;if(De){if(Re){t:{for(var n=Re,i=qt;n.nodeType!==8;){if(!i){n=null;break t}if(n=Ut(n.nextSibling),n===null){n=null;break t}}i=n.data,n=i==="F!"||i==="F"?n:null}if(n){Re=Ut(n.nextSibling),a=n.data==="F!";break e}}Xl(a)}a=!1}a&&(t=l[0])}}return l=ut(),l.memoizedState=l.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:t},l.queue=a,l=$o.bind(null,de,a),a.dispatch=l,a=Ac(!1),i=Uc.bind(null,de,!1,a.queue),a=ut(),n={state:t,dispatch:null,action:e,pending:null},a.queue=n,l=wh.bind(null,de,n,i,l),n.dispatch=l,a.memoizedState=e,[t,l,!1]}function zo(e){var t=Le();return Oo(t,Ce,e)}function Oo(e,t,l){if(t=Dc(e,t,Eo)[0],e=zn($t)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=ys(t)}catch(c){throw c===ms?Dn:c}else a=t;t=Le();var n=t.queue,i=n.dispatch;return l!==t.memoizedState&&(de.flags|=2048,wa(9,On(),Dh.bind(null,n,l),null)),[a,i,e]}function Dh(e,t){e.action=t}function Uo(e){var t=Le(),l=Ce;if(l!==null)return Oo(t,l,e);Le(),t=t.memoizedState,l=Le();var a=l.queue.dispatch;return l.memoizedState=e,[t,a,!1]}function wa(e,t,l,a){return e={tag:e,create:l,deps:a,inst:t,next:null},t=de.updateQueue,t===null&&(t=Sc(),de.updateQueue=t),l=t.lastEffect,l===null?t.lastEffect=e.next=e:(a=l.next,l.next=e,e.next=a,t.lastEffect=e),e}function On(){return{destroy:void 0,resource:void 0}}function qo(){return Le().memoizedState}function Un(e,t,l,a){var n=ut();a=a===void 0?null:a,de.flags|=e,n.memoizedState=wa(1|t,On(),l,a)}function vs(e,t,l,a){var n=Le();a=a===void 0?null:a;var i=n.memoizedState.inst;Ce!==null&&a!==null&&pc(a,Ce.memoizedState.deps)?n.memoizedState=wa(t,i,l,a):(de.flags|=e,n.memoizedState=wa(1|t,i,l,a))}function Bo(e,t){Un(8390656,8,e,t)}function _o(e,t){vs(2048,8,e,t)}function Ro(e,t){return vs(4,2,e,t)}function Ho(e,t){return vs(4,4,e,t)}function ko(e,t){if(typeof t=="function"){e=e();var l=t(e);return function(){typeof l=="function"?l():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Yo(e,t,l){l=l!=null?l.concat([e]):null,vs(4,4,ko.bind(null,t,e),l)}function Ec(){}function Xo(e,t){var l=Le();t=t===void 0?null:t;var a=l.memoizedState;return t!==null&&pc(t,a[1])?a[0]:(l.memoizedState=[e,t],e)}function Lo(e,t){var l=Le();t=t===void 0?null:t;var a=l.memoizedState;if(t!==null&&pc(t,a[1]))return a[0];if(a=e(),Zl){Et(!0);try{e()}finally{Et(!1)}}return l.memoizedState=[a,t],a}function Mc(e,t,l){return l===void 0||(hl&1073741824)!==0?e.memoizedState=t:(e.memoizedState=l,e=Zd(),de.lanes|=e,jl|=e,l)}function Go(e,t,l,a){return ft(l,t)?l:ja.current!==null?(e=Mc(e,l,a),ft(e,t)||(Je=!0),e):(hl&42)===0?(Je=!0,e.memoizedState=l):(e=Zd(),de.lanes|=e,jl|=e,t)}function Qo(e,t,l,a,n){var i=B.p;B.p=i!==0&&8>i?i:8;var c=g.T,r={};g.T=r,Uc(e,!1,t,l);try{var f=n(),v=g.S;if(v!==null&&v(r,f),f!==null&&typeof f=="object"&&typeof f.then=="function"){var M=jh(f,a);js(e,t,M,bt(e))}else js(e,t,a,bt(e))}catch(U){js(e,t,{then:function(){},status:"rejected",reason:U},bt())}finally{B.p=i,g.T=c}}function Th(){}function zc(e,t,l,a){if(e.tag!==5)throw Error(o(476));var n=Zo(e).queue;Qo(e,n,t,V,l===null?Th:function(){return Vo(e),l(a)})}function Zo(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:V,baseState:V,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$t,lastRenderedState:V},next:null};var l={};return t.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$t,lastRenderedState:l},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Vo(e){var t=Zo(e).next.queue;js(e,t,{},bt())}function Oc(){return at(ks)}function Ko(){return Le().memoizedState}function Jo(){return Le().memoizedState}function Ah(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var l=bt();e=fl(l);var a=ml(t,e,l);a!==null&&(pt(a,t,l),xs(a,t,l)),t={cache:uc()},e.payload=t;return}t=t.return}}function Ch(e,t,l){var a=bt();l={lane:a,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null},qn(e)?Fo(t,l):(l=Ii(e,t,l,a),l!==null&&(pt(l,e,a),Wo(l,t,a)))}function $o(e,t,l){var a=bt();js(e,t,l,a)}function js(e,t,l,a){var n={lane:a,revertLane:0,action:l,hasEagerState:!1,eagerState:null,next:null};if(qn(e))Fo(t,n);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var c=t.lastRenderedState,r=i(c,l);if(n.hasEagerState=!0,n.eagerState=r,ft(r,c))return bn(e,t,n,0),Oe===null&&gn(),!1}catch{}finally{}if(l=Ii(e,t,n,a),l!==null)return pt(l,e,a),Wo(l,t,a),!0}return!1}function Uc(e,t,l,a){if(a={lane:2,revertLane:du(),action:a,hasEagerState:!1,eagerState:null,next:null},qn(e)){if(t)throw Error(o(479))}else t=Ii(e,l,a,2),t!==null&&pt(t,e,2)}function qn(e){var t=e.alternate;return e===de||t!==null&&t===de}function Fo(e,t){Na=Cn=!0;var l=e.pending;l===null?t.next=t:(t.next=l.next,l.next=t),e.pending=t}function Wo(e,t,l){if((l&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,l|=a,t.lanes=l,sr(e,l)}}var Bn={readContext:at,use:Mn,useCallback:ke,useContext:ke,useEffect:ke,useImperativeHandle:ke,useLayoutEffect:ke,useInsertionEffect:ke,useMemo:ke,useReducer:ke,useRef:ke,useState:ke,useDebugValue:ke,useDeferredValue:ke,useTransition:ke,useSyncExternalStore:ke,useId:ke,useHostTransitionStatus:ke,useFormState:ke,useActionState:ke,useOptimistic:ke,useMemoCache:ke,useCacheRefresh:ke},Io={readContext:at,use:Mn,useCallback:function(e,t){return ut().memoizedState=[e,t===void 0?null:t],e},useContext:at,useEffect:Bo,useImperativeHandle:function(e,t,l){l=l!=null?l.concat([e]):null,Un(4194308,4,ko.bind(null,t,e),l)},useLayoutEffect:function(e,t){return Un(4194308,4,e,t)},useInsertionEffect:function(e,t){Un(4,2,e,t)},useMemo:function(e,t){var l=ut();t=t===void 0?null:t;var a=e();if(Zl){Et(!0);try{e()}finally{Et(!1)}}return l.memoizedState=[a,t],a},useReducer:function(e,t,l){var a=ut();if(l!==void 0){var n=l(t);if(Zl){Et(!0);try{l(t)}finally{Et(!1)}}}else n=t;return a.memoizedState=a.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},a.queue=e,e=e.dispatch=Ch.bind(null,de,e),[a.memoizedState,e]},useRef:function(e){var t=ut();return e={current:e},t.memoizedState=e},useState:function(e){e=Ac(e);var t=e.queue,l=$o.bind(null,de,t);return t.dispatch=l,[e.memoizedState,l]},useDebugValue:Ec,useDeferredValue:function(e,t){var l=ut();return Mc(l,e,t)},useTransition:function(){var e=Ac(!1);return e=Qo.bind(null,de,e.queue,!0,!1),ut().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,l){var a=de,n=ut();if(De){if(l===void 0)throw Error(o(407));l=l()}else{if(l=t(),Oe===null)throw Error(o(349));(Ne&124)!==0||yo(a,t,l)}n.memoizedState=l;var i={value:l,getSnapshot:t};return n.queue=i,Bo(jo.bind(null,a,i,e),[e]),a.flags|=2048,wa(9,On(),vo.bind(null,a,i,l,t),null),l},useId:function(){var e=ut(),t=Oe.identifierPrefix;if(De){var l=Vt,a=Zt;l=(a&~(1<<32-le(a)-1)).toString(32)+l,t="«"+t+"R"+l,l=En++,0<l&&(t+="H"+l.toString(32)),t+="»"}else l=Nh++,t="«"+t+"r"+l.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:Oc,useFormState:Mo,useActionState:Mo,useOptimistic:function(e){var t=ut();t.memoizedState=t.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=l,t=Uc.bind(null,de,!0,l),l.dispatch=t,[e,t]},useMemoCache:wc,useCacheRefresh:function(){return ut().memoizedState=Ah.bind(null,de)}},Po={readContext:at,use:Mn,useCallback:Xo,useContext:at,useEffect:_o,useImperativeHandle:Yo,useInsertionEffect:Ro,useLayoutEffect:Ho,useMemo:Lo,useReducer:zn,useRef:qo,useState:function(){return zn($t)},useDebugValue:Ec,useDeferredValue:function(e,t){var l=Le();return Go(l,Ce.memoizedState,e,t)},useTransition:function(){var e=zn($t)[0],t=Le().memoizedState;return[typeof e=="boolean"?e:ys(e),t]},useSyncExternalStore:po,useId:Ko,useHostTransitionStatus:Oc,useFormState:zo,useActionState:zo,useOptimistic:function(e,t){var l=Le();return wo(l,Ce,e,t)},useMemoCache:wc,useCacheRefresh:Jo},Eh={readContext:at,use:Mn,useCallback:Xo,useContext:at,useEffect:_o,useImperativeHandle:Yo,useInsertionEffect:Ro,useLayoutEffect:Ho,useMemo:Lo,useReducer:Tc,useRef:qo,useState:function(){return Tc($t)},useDebugValue:Ec,useDeferredValue:function(e,t){var l=Le();return Ce===null?Mc(l,e,t):Go(l,Ce.memoizedState,e,t)},useTransition:function(){var e=Tc($t)[0],t=Le().memoizedState;return[typeof e=="boolean"?e:ys(e),t]},useSyncExternalStore:po,useId:Ko,useHostTransitionStatus:Oc,useFormState:Uo,useActionState:Uo,useOptimistic:function(e,t){var l=Le();return Ce!==null?wo(l,Ce,e,t):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:wc,useCacheRefresh:Jo},Da=null,Ns=0;function _n(e){var t=Ns;return Ns+=1,Da===null&&(Da=[]),ro(Da,e,t)}function Ss(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function Rn(e,t){throw t.$$typeof===X?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function ed(e){var t=e._init;return t(e._payload)}function td(e){function t(b,x){if(e){var y=b.deletions;y===null?(b.deletions=[x],b.flags|=16):y.push(x)}}function l(b,x){if(!e)return null;for(;x!==null;)t(b,x),x=x.sibling;return null}function a(b){for(var x=new Map;b!==null;)b.key!==null?x.set(b.key,b):x.set(b.index,b),b=b.sibling;return x}function n(b,x){return b=Qt(b,x),b.index=0,b.sibling=null,b}function i(b,x,y){return b.index=y,e?(y=b.alternate,y!==null?(y=y.index,y<x?(b.flags|=67108866,x):y):(b.flags|=67108866,x)):(b.flags|=1048576,x)}function c(b){return e&&b.alternate===null&&(b.flags|=67108866),b}function r(b,x,y,z){return x===null||x.tag!==6?(x=ec(y,b.mode,z),x.return=b,x):(x=n(x,y),x.return=b,x)}function f(b,x,y,z){var F=y.type;return F===K?M(b,x,y.props.children,z,y.key):x!==null&&(x.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===he&&ed(F)===x.type)?(x=n(x,y.props),Ss(x,y),x.return=b,x):(x=yn(y.type,y.key,y.props,null,b.mode,z),Ss(x,y),x.return=b,x)}function v(b,x,y,z){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=tc(y,b.mode,z),x.return=b,x):(x=n(x,y.children||[]),x.return=b,x)}function M(b,x,y,z,F){return x===null||x.tag!==7?(x=Rl(y,b.mode,z,F),x.return=b,x):(x=n(x,y),x.return=b,x)}function U(b,x,y){if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return x=ec(""+x,b.mode,y),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case L:return y=yn(x.type,x.key,x.props,null,b.mode,y),Ss(y,x),y.return=b,y;case Y:return x=tc(x,b.mode,y),x.return=b,x;case he:var z=x._init;return x=z(x._payload),U(b,x,y)}if(W(x)||h(x))return x=Rl(x,b.mode,y,null),x.return=b,x;if(typeof x.then=="function")return U(b,_n(x),y);if(x.$$typeof===J)return U(b,Sn(b,x),y);Rn(b,x)}return null}function j(b,x,y,z){var F=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return F!==null?null:r(b,x,""+y,z);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case L:return y.key===F?f(b,x,y,z):null;case Y:return y.key===F?v(b,x,y,z):null;case he:return F=y._init,y=F(y._payload),j(b,x,y,z)}if(W(y)||h(y))return F!==null?null:M(b,x,y,z,null);if(typeof y.then=="function")return j(b,x,_n(y),z);if(y.$$typeof===J)return j(b,x,Sn(b,y),z);Rn(b,y)}return null}function w(b,x,y,z,F){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return b=b.get(y)||null,r(x,b,""+z,F);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case L:return b=b.get(z.key===null?y:z.key)||null,f(x,b,z,F);case Y:return b=b.get(z.key===null?y:z.key)||null,v(x,b,z,F);case he:var me=z._init;return z=me(z._payload),w(b,x,y,z,F)}if(W(z)||h(z))return b=b.get(y)||null,M(x,b,z,F,null);if(typeof z.then=="function")return w(b,x,y,_n(z),F);if(z.$$typeof===J)return w(b,x,y,Sn(x,z),F);Rn(x,z)}return null}function ie(b,x,y,z){for(var F=null,me=null,I=x,se=x=0,Fe=null;I!==null&&se<y.length;se++){I.index>se?(Fe=I,I=null):Fe=I.sibling;var Se=j(b,I,y[se],z);if(Se===null){I===null&&(I=Fe);break}e&&I&&Se.alternate===null&&t(b,I),x=i(Se,x,se),me===null?F=Se:me.sibling=Se,me=Se,I=Fe}if(se===y.length)return l(b,I),De&&kl(b,se),F;if(I===null){for(;se<y.length;se++)I=U(b,y[se],z),I!==null&&(x=i(I,x,se),me===null?F=I:me.sibling=I,me=I);return De&&kl(b,se),F}for(I=a(I);se<y.length;se++)Fe=w(I,b,se,y[se],z),Fe!==null&&(e&&Fe.alternate!==null&&I.delete(Fe.key===null?se:Fe.key),x=i(Fe,x,se),me===null?F=Fe:me.sibling=Fe,me=Fe);return e&&I.forEach(function(Ml){return t(b,Ml)}),De&&kl(b,se),F}function ae(b,x,y,z){if(y==null)throw Error(o(151));for(var F=null,me=null,I=x,se=x=0,Fe=null,Se=y.next();I!==null&&!Se.done;se++,Se=y.next()){I.index>se?(Fe=I,I=null):Fe=I.sibling;var Ml=j(b,I,Se.value,z);if(Ml===null){I===null&&(I=Fe);break}e&&I&&Ml.alternate===null&&t(b,I),x=i(Ml,x,se),me===null?F=Ml:me.sibling=Ml,me=Ml,I=Fe}if(Se.done)return l(b,I),De&&kl(b,se),F;if(I===null){for(;!Se.done;se++,Se=y.next())Se=U(b,Se.value,z),Se!==null&&(x=i(Se,x,se),me===null?F=Se:me.sibling=Se,me=Se);return De&&kl(b,se),F}for(I=a(I);!Se.done;se++,Se=y.next())Se=w(I,b,se,Se.value,z),Se!==null&&(e&&Se.alternate!==null&&I.delete(Se.key===null?se:Se.key),x=i(Se,x,se),me===null?F=Se:me.sibling=Se,me=Se);return e&&I.forEach(function(M0){return t(b,M0)}),De&&kl(b,se),F}function Me(b,x,y,z){if(typeof y=="object"&&y!==null&&y.type===K&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case L:e:{for(var F=y.key;x!==null;){if(x.key===F){if(F=y.type,F===K){if(x.tag===7){l(b,x.sibling),z=n(x,y.props.children),z.return=b,b=z;break e}}else if(x.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===he&&ed(F)===x.type){l(b,x.sibling),z=n(x,y.props),Ss(z,y),z.return=b,b=z;break e}l(b,x);break}else t(b,x);x=x.sibling}y.type===K?(z=Rl(y.props.children,b.mode,z,y.key),z.return=b,b=z):(z=yn(y.type,y.key,y.props,null,b.mode,z),Ss(z,y),z.return=b,b=z)}return c(b);case Y:e:{for(F=y.key;x!==null;){if(x.key===F)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){l(b,x.sibling),z=n(x,y.children||[]),z.return=b,b=z;break e}else{l(b,x);break}else t(b,x);x=x.sibling}z=tc(y,b.mode,z),z.return=b,b=z}return c(b);case he:return F=y._init,y=F(y._payload),Me(b,x,y,z)}if(W(y))return ie(b,x,y,z);if(h(y)){if(F=h(y),typeof F!="function")throw Error(o(150));return y=F.call(y),ae(b,x,y,z)}if(typeof y.then=="function")return Me(b,x,_n(y),z);if(y.$$typeof===J)return Me(b,x,Sn(b,y),z);Rn(b,y)}return typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint"?(y=""+y,x!==null&&x.tag===6?(l(b,x.sibling),z=n(x,y),z.return=b,b=z):(l(b,x),z=ec(y,b.mode,z),z.return=b,b=z),c(b)):l(b,x)}return function(b,x,y,z){try{Ns=0;var F=Me(b,x,y,z);return Da=null,F}catch(I){if(I===ms||I===Dn)throw I;var me=mt(29,I,null,b.mode);return me.lanes=z,me.return=b,me}finally{}}}var Ta=td(!0),ld=td(!1),Tt=we(null),Bt=null;function xl(e){var t=e.alternate;Q(Qe,Qe.current&1),Q(Tt,e),Bt===null&&(t===null||ja.current!==null||t.memoizedState!==null)&&(Bt=e)}function ad(e){if(e.tag===22){if(Q(Qe,Qe.current),Q(Tt,e),Bt===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Bt=e)}}else gl()}function gl(){Q(Qe,Qe.current),Q(Tt,Tt.current)}function Ft(e){oe(Tt),Bt===e&&(Bt=null),oe(Qe)}var Qe=we(0);function Hn(e){for(var t=e;t!==null;){if(t.tag===13){var l=t.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||Su(l)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function qc(e,t,l,a){t=e.memoizedState,l=l(a,t),l=l==null?t:E({},t,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var Bc={enqueueSetState:function(e,t,l){e=e._reactInternals;var a=bt(),n=fl(a);n.payload=t,l!=null&&(n.callback=l),t=ml(e,n,a),t!==null&&(pt(t,e,a),xs(t,e,a))},enqueueReplaceState:function(e,t,l){e=e._reactInternals;var a=bt(),n=fl(a);n.tag=1,n.payload=t,l!=null&&(n.callback=l),t=ml(e,n,a),t!==null&&(pt(t,e,a),xs(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var l=bt(),a=fl(l);a.tag=2,t!=null&&(a.callback=t),t=ml(e,a,l),t!==null&&(pt(t,e,l),xs(t,e,l))}};function sd(e,t,l,a,n,i,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,i,c):t.prototype&&t.prototype.isPureReactComponent?!ns(l,a)||!ns(n,i):!0}function nd(e,t,l,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(l,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(l,a),t.state!==e&&Bc.enqueueReplaceState(t,t.state,null)}function Vl(e,t){var l=t;if("ref"in t){l={};for(var a in t)a!=="ref"&&(l[a]=t[a])}if(e=e.defaultProps){l===t&&(l=E({},l));for(var n in e)l[n]===void 0&&(l[n]=e[n])}return l}var kn=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function id(e){kn(e)}function cd(e){console.error(e)}function ud(e){kn(e)}function Yn(e,t){try{var l=e.onUncaughtError;l(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function rd(e,t,l){try{var a=e.onCaughtError;a(l.value,{componentStack:l.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function _c(e,t,l){return l=fl(l),l.tag=3,l.payload={element:null},l.callback=function(){Yn(e,t)},l}function od(e){return e=fl(e),e.tag=3,e}function dd(e,t,l,a){var n=l.type.getDerivedStateFromError;if(typeof n=="function"){var i=a.value;e.payload=function(){return n(i)},e.callback=function(){rd(t,l,a)}}var c=l.stateNode;c!==null&&typeof c.componentDidCatch=="function"&&(e.callback=function(){rd(t,l,a),typeof n!="function"&&(Nl===null?Nl=new Set([this]):Nl.add(this));var r=a.stack;this.componentDidCatch(a.value,{componentStack:r!==null?r:""})})}function Mh(e,t,l,a,n){if(l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=l.alternate,t!==null&&os(t,l,n,!0),l=Tt.current,l!==null){switch(l.tag){case 13:return Bt===null?iu():l.alternate===null&&He===0&&(He=3),l.flags&=-257,l.flags|=65536,l.lanes=n,a===dc?l.flags|=16384:(t=l.updateQueue,t===null?l.updateQueue=new Set([a]):t.add(a),uu(e,a,n)),!1;case 22:return l.flags|=65536,a===dc?l.flags|=16384:(t=l.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},l.updateQueue=t):(l=t.retryQueue,l===null?t.retryQueue=new Set([a]):l.add(a)),uu(e,a,n)),!1}throw Error(o(435,l.tag))}return uu(e,a,n),iu(),!1}if(De)return t=Tt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=n,a!==sc&&(e=Error(o(422),{cause:a}),rs(Nt(e,l)))):(a!==sc&&(t=Error(o(423),{cause:a}),rs(Nt(t,l))),e=e.current.alternate,e.flags|=65536,n&=-n,e.lanes|=n,a=Nt(a,l),n=_c(e.stateNode,a,n),hc(e,n),He!==4&&(He=2)),!1;var i=Error(o(520),{cause:a});if(i=Nt(i,l),Ms===null?Ms=[i]:Ms.push(i),He!==4&&(He=2),t===null)return!0;a=Nt(a,l),l=t;do{switch(l.tag){case 3:return l.flags|=65536,e=n&-n,l.lanes|=e,e=_c(l.stateNode,a,e),hc(l,e),!1;case 1:if(t=l.type,i=l.stateNode,(l.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||i!==null&&typeof i.componentDidCatch=="function"&&(Nl===null||!Nl.has(i))))return l.flags|=65536,n&=-n,l.lanes|=n,n=od(n),dd(n,e,l,a),hc(l,n),!1}l=l.return}while(l!==null);return!1}var fd=Error(o(461)),Je=!1;function Ie(e,t,l,a){t.child=e===null?ld(t,null,l,a):Ta(t,e.child,l,a)}function md(e,t,l,a,n){l=l.render;var i=t.ref;if("ref"in a){var c={};for(var r in a)r!=="ref"&&(c[r]=a[r])}else c=a;return Gl(t),a=yc(e,t,l,c,i,n),r=vc(),e!==null&&!Je?(jc(e,t,n),Wt(e,t,n)):(De&&r&&lc(t),t.flags|=1,Ie(e,t,a,n),t.child)}function hd(e,t,l,a,n){if(e===null){var i=l.type;return typeof i=="function"&&!Pi(i)&&i.defaultProps===void 0&&l.compare===null?(t.tag=15,t.type=i,xd(e,t,i,a,n)):(e=yn(l.type,null,a,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!Qc(e,n)){var c=i.memoizedProps;if(l=l.compare,l=l!==null?l:ns,l(c,a)&&e.ref===t.ref)return Wt(e,t,n)}return t.flags|=1,e=Qt(i,a),e.ref=t.ref,e.return=t,t.child=e}function xd(e,t,l,a,n){if(e!==null){var i=e.memoizedProps;if(ns(i,a)&&e.ref===t.ref)if(Je=!1,t.pendingProps=a=i,Qc(e,n))(e.flags&131072)!==0&&(Je=!0);else return t.lanes=e.lanes,Wt(e,t,n)}return Rc(e,t,l,a,n)}function gd(e,t,l){var a=t.pendingProps,n=a.children,i=e!==null?e.memoizedState:null;if(a.mode==="hidden"){if((t.flags&128)!==0){if(a=i!==null?i.baseLanes|l:l,e!==null){for(n=t.child=e.child,i=0;n!==null;)i=i|n.lanes|n.childLanes,n=n.sibling;t.childLanes=i&~a}else t.childLanes=0,t.child=null;return bd(e,t,a,l)}if((l&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&wn(t,i!==null?i.cachePool:null),i!==null?xo(t,i):gc(),ad(t);else return t.lanes=t.childLanes=536870912,bd(e,t,i!==null?i.baseLanes|l:l,l)}else i!==null?(wn(t,i.cachePool),xo(t,i),gl(),t.memoizedState=null):(e!==null&&wn(t,null),gc(),gl());return Ie(e,t,n,l),t.child}function bd(e,t,l,a){var n=oc();return n=n===null?null:{parent:Ge._currentValue,pool:n},t.memoizedState={baseLanes:l,cachePool:n},e!==null&&wn(t,null),gc(),ad(t),e!==null&&os(e,t,a,!0),null}function Xn(e,t){var l=t.ref;if(l===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(o(284));(e===null||e.ref!==l)&&(t.flags|=4194816)}}function Rc(e,t,l,a,n){return Gl(t),l=yc(e,t,l,a,void 0,n),a=vc(),e!==null&&!Je?(jc(e,t,n),Wt(e,t,n)):(De&&a&&lc(t),t.flags|=1,Ie(e,t,l,n),t.child)}function pd(e,t,l,a,n,i){return Gl(t),t.updateQueue=null,l=bo(t,a,l,n),go(e),a=vc(),e!==null&&!Je?(jc(e,t,i),Wt(e,t,i)):(De&&a&&lc(t),t.flags|=1,Ie(e,t,l,i),t.child)}function yd(e,t,l,a,n){if(Gl(t),t.stateNode===null){var i=ga,c=l.contextType;typeof c=="object"&&c!==null&&(i=at(c)),i=new l(a,i),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Bc,t.stateNode=i,i._reactInternals=t,i=t.stateNode,i.props=a,i.state=t.memoizedState,i.refs={},fc(t),c=l.contextType,i.context=typeof c=="object"&&c!==null?at(c):ga,i.state=t.memoizedState,c=l.getDerivedStateFromProps,typeof c=="function"&&(qc(t,l,c,a),i.state=t.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(c=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),c!==i.state&&Bc.enqueueReplaceState(i,i.state,null),bs(t,a,i,n),gs(),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){i=t.stateNode;var r=t.memoizedProps,f=Vl(l,r);i.props=f;var v=i.context,M=l.contextType;c=ga,typeof M=="object"&&M!==null&&(c=at(M));var U=l.getDerivedStateFromProps;M=typeof U=="function"||typeof i.getSnapshotBeforeUpdate=="function",r=t.pendingProps!==r,M||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(r||v!==c)&&nd(t,i,a,c),dl=!1;var j=t.memoizedState;i.state=j,bs(t,a,i,n),gs(),v=t.memoizedState,r||j!==v||dl?(typeof U=="function"&&(qc(t,l,U,a),v=t.memoizedState),(f=dl||sd(t,l,f,a,j,v,c))?(M||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=v),i.props=a,i.state=v,i.context=c,a=f):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{i=t.stateNode,mc(e,t),c=t.memoizedProps,M=Vl(l,c),i.props=M,U=t.pendingProps,j=i.context,v=l.contextType,f=ga,typeof v=="object"&&v!==null&&(f=at(v)),r=l.getDerivedStateFromProps,(v=typeof r=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(c!==U||j!==f)&&nd(t,i,a,f),dl=!1,j=t.memoizedState,i.state=j,bs(t,a,i,n),gs();var w=t.memoizedState;c!==U||j!==w||dl||e!==null&&e.dependencies!==null&&Nn(e.dependencies)?(typeof r=="function"&&(qc(t,l,r,a),w=t.memoizedState),(M=dl||sd(t,l,M,a,j,w,f)||e!==null&&e.dependencies!==null&&Nn(e.dependencies))?(v||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(a,w,f),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(a,w,f)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&j===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&j===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=w),i.props=a,i.state=w,i.context=f,a=M):(typeof i.componentDidUpdate!="function"||c===e.memoizedProps&&j===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&j===e.memoizedState||(t.flags|=1024),a=!1)}return i=a,Xn(e,t),a=(t.flags&128)!==0,i||a?(i=t.stateNode,l=a&&typeof l.getDerivedStateFromError!="function"?null:i.render(),t.flags|=1,e!==null&&a?(t.child=Ta(t,e.child,null,n),t.child=Ta(t,null,l,n)):Ie(e,t,l,n),t.memoizedState=i.state,e=t.child):e=Wt(e,t,n),e}function vd(e,t,l,a){return us(),t.flags|=256,Ie(e,t,l,a),t.child}var Hc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kc(e){return{baseLanes:e,cachePool:io()}}function Yc(e,t,l){return e=e!==null?e.childLanes&~l:0,t&&(e|=At),e}function jd(e,t,l){var a=t.pendingProps,n=!1,i=(t.flags&128)!==0,c;if((c=i)||(c=e!==null&&e.memoizedState===null?!1:(Qe.current&2)!==0),c&&(n=!0,t.flags&=-129),c=(t.flags&32)!==0,t.flags&=-33,e===null){if(De){if(n?xl(t):gl(),De){var r=Re,f;if(f=r){e:{for(f=r,r=qt;f.nodeType!==8;){if(!r){r=null;break e}if(f=Ut(f.nextSibling),f===null){r=null;break e}}r=f}r!==null?(t.memoizedState={dehydrated:r,treeContext:Hl!==null?{id:Zt,overflow:Vt}:null,retryLane:536870912,hydrationErrors:null},f=mt(18,null,null,0),f.stateNode=r,f.return=t,t.child=f,nt=t,Re=null,f=!0):f=!1}f||Xl(t)}if(r=t.memoizedState,r!==null&&(r=r.dehydrated,r!==null))return Su(r)?t.lanes=32:t.lanes=536870912,null;Ft(t)}return r=a.children,a=a.fallback,n?(gl(),n=t.mode,r=Ln({mode:"hidden",children:r},n),a=Rl(a,n,l,null),r.return=t,a.return=t,r.sibling=a,t.child=r,n=t.child,n.memoizedState=kc(l),n.childLanes=Yc(e,c,l),t.memoizedState=Hc,a):(xl(t),Xc(t,r))}if(f=e.memoizedState,f!==null&&(r=f.dehydrated,r!==null)){if(i)t.flags&256?(xl(t),t.flags&=-257,t=Lc(e,t,l)):t.memoizedState!==null?(gl(),t.child=e.child,t.flags|=128,t=null):(gl(),n=a.fallback,r=t.mode,a=Ln({mode:"visible",children:a.children},r),n=Rl(n,r,l,null),n.flags|=2,a.return=t,n.return=t,a.sibling=n,t.child=a,Ta(t,e.child,null,l),a=t.child,a.memoizedState=kc(l),a.childLanes=Yc(e,c,l),t.memoizedState=Hc,t=n);else if(xl(t),Su(r)){if(c=r.nextSibling&&r.nextSibling.dataset,c)var v=c.dgst;c=v,a=Error(o(419)),a.stack="",a.digest=c,rs({value:a,source:null,stack:null}),t=Lc(e,t,l)}else if(Je||os(e,t,l,!1),c=(l&e.childLanes)!==0,Je||c){if(c=Oe,c!==null&&(a=l&-l,a=(a&42)!==0?1:wi(a),a=(a&(c.suspendedLanes|l))!==0?0:a,a!==0&&a!==f.retryLane))throw f.retryLane=a,xa(e,a),pt(c,e,a),fd;r.data==="$?"||iu(),t=Lc(e,t,l)}else r.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=f.treeContext,Re=Ut(r.nextSibling),nt=t,De=!0,Yl=null,qt=!1,e!==null&&(wt[Dt++]=Zt,wt[Dt++]=Vt,wt[Dt++]=Hl,Zt=e.id,Vt=e.overflow,Hl=t),t=Xc(t,a.children),t.flags|=4096);return t}return n?(gl(),n=a.fallback,r=t.mode,f=e.child,v=f.sibling,a=Qt(f,{mode:"hidden",children:a.children}),a.subtreeFlags=f.subtreeFlags&65011712,v!==null?n=Qt(v,n):(n=Rl(n,r,l,null),n.flags|=2),n.return=t,a.return=t,a.sibling=n,t.child=a,a=n,n=t.child,r=e.child.memoizedState,r===null?r=kc(l):(f=r.cachePool,f!==null?(v=Ge._currentValue,f=f.parent!==v?{parent:v,pool:v}:f):f=io(),r={baseLanes:r.baseLanes|l,cachePool:f}),n.memoizedState=r,n.childLanes=Yc(e,c,l),t.memoizedState=Hc,a):(xl(t),l=e.child,e=l.sibling,l=Qt(l,{mode:"visible",children:a.children}),l.return=t,l.sibling=null,e!==null&&(c=t.deletions,c===null?(t.deletions=[e],t.flags|=16):c.push(e)),t.child=l,t.memoizedState=null,l)}function Xc(e,t){return t=Ln({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ln(e,t){return e=mt(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Lc(e,t,l){return Ta(t,e.child,null,l),e=Xc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Nd(e,t,l){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),ic(e.return,t,l)}function Gc(e,t,l,a,n){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:l,tailMode:n}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=a,i.tail=l,i.tailMode=n)}function Sd(e,t,l){var a=t.pendingProps,n=a.revealOrder,i=a.tail;if(Ie(e,t,a.children,l),a=Qe.current,(a&2)!==0)a=a&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Nd(e,l,t);else if(e.tag===19)Nd(e,l,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}switch(Q(Qe,a),n){case"forwards":for(l=t.child,n=null;l!==null;)e=l.alternate,e!==null&&Hn(e)===null&&(n=l),l=l.sibling;l=n,l===null?(n=t.child,t.child=null):(n=l.sibling,l.sibling=null),Gc(t,!1,n,l,i);break;case"backwards":for(l=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Hn(e)===null){t.child=n;break}e=n.sibling,n.sibling=l,l=n,n=e}Gc(t,!0,l,null,i);break;case"together":Gc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wt(e,t,l){if(e!==null&&(t.dependencies=e.dependencies),jl|=t.lanes,(l&t.childLanes)===0)if(e!==null){if(os(e,t,l,!1),(l&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,l=Qt(e,e.pendingProps),t.child=l,l.return=t;e.sibling!==null;)e=e.sibling,l=l.sibling=Qt(e,e.pendingProps),l.return=t;l.sibling=null}return t.child}function Qc(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Nn(e)))}function zh(e,t,l){switch(t.tag){case 3:be(t,t.stateNode.containerInfo),ol(t,Ge,e.memoizedState.cache),us();break;case 27:case 5:We(t);break;case 4:be(t,t.stateNode.containerInfo);break;case 10:ol(t,t.type,t.memoizedProps.value);break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(xl(t),t.flags|=128,null):(l&t.child.childLanes)!==0?jd(e,t,l):(xl(t),e=Wt(e,t,l),e!==null?e.sibling:null);xl(t);break;case 19:var n=(e.flags&128)!==0;if(a=(l&t.childLanes)!==0,a||(os(e,t,l,!1),a=(l&t.childLanes)!==0),n){if(a)return Sd(e,t,l);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),Q(Qe,Qe.current),a)break;return null;case 22:case 23:return t.lanes=0,gd(e,t,l);case 24:ol(t,Ge,e.memoizedState.cache)}return Wt(e,t,l)}function wd(e,t,l){if(e!==null)if(e.memoizedProps!==t.pendingProps)Je=!0;else{if(!Qc(e,l)&&(t.flags&128)===0)return Je=!1,zh(e,t,l);Je=(e.flags&131072)!==0}else Je=!1,De&&(t.flags&1048576)!==0&&Pr(t,jn,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var a=t.elementType,n=a._init;if(a=n(a._payload),t.type=a,typeof a=="function")Pi(a)?(e=Vl(a,e),t.tag=1,t=yd(null,t,a,e,l)):(t.tag=0,t=Rc(null,t,a,e,l));else{if(a!=null){if(n=a.$$typeof,n===G){t.tag=11,t=md(null,t,a,e,l);break e}else if(n===ye){t.tag=14,t=hd(null,t,a,e,l);break e}}throw t=Z(a)||a,Error(o(306,t,""))}}return t;case 0:return Rc(e,t,t.type,t.pendingProps,l);case 1:return a=t.type,n=Vl(a,t.pendingProps),yd(e,t,a,n,l);case 3:e:{if(be(t,t.stateNode.containerInfo),e===null)throw Error(o(387));a=t.pendingProps;var i=t.memoizedState;n=i.element,mc(e,t),bs(t,a,null,l);var c=t.memoizedState;if(a=c.cache,ol(t,Ge,a),a!==i.cache&&cc(t,[Ge],l,!0),gs(),a=c.element,i.isDehydrated)if(i={element:a,isDehydrated:!1,cache:c.cache},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){t=vd(e,t,a,l);break e}else if(a!==n){n=Nt(Error(o(424)),t),rs(n),t=vd(e,t,a,l);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Re=Ut(e.firstChild),nt=t,De=!0,Yl=null,qt=!0,l=ld(t,null,a,l),t.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(us(),a===n){t=Wt(e,t,l);break e}Ie(e,t,a,l)}t=t.child}return t;case 26:return Xn(e,t),e===null?(l=Ef(t.type,null,t.pendingProps,null))?t.memoizedState=l:De||(l=t.type,e=t.pendingProps,a=li(q.current).createElement(l),a[lt]=t,a[it]=e,et(a,l,e),Ke(a),t.stateNode=a):t.memoizedState=Ef(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return We(t),e===null&&De&&(a=t.stateNode=Tf(t.type,t.pendingProps,q.current),nt=t,qt=!0,n=Re,Dl(t.type)?(wu=n,Re=Ut(a.firstChild)):Re=n),Ie(e,t,t.pendingProps.children,l),Xn(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&De&&((n=a=Re)&&(a=n0(a,t.type,t.pendingProps,qt),a!==null?(t.stateNode=a,nt=t,Re=Ut(a.firstChild),qt=!1,n=!0):n=!1),n||Xl(t)),We(t),n=t.type,i=t.pendingProps,c=e!==null?e.memoizedProps:null,a=i.children,vu(n,i)?a=null:c!==null&&vu(n,c)&&(t.flags|=32),t.memoizedState!==null&&(n=yc(e,t,Sh,null,null,l),ks._currentValue=n),Xn(e,t),Ie(e,t,a,l),t.child;case 6:return e===null&&De&&((e=l=Re)&&(l=i0(l,t.pendingProps,qt),l!==null?(t.stateNode=l,nt=t,Re=null,e=!0):e=!1),e||Xl(t)),null;case 13:return jd(e,t,l);case 4:return be(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Ta(t,null,a,l):Ie(e,t,a,l),t.child;case 11:return md(e,t,t.type,t.pendingProps,l);case 7:return Ie(e,t,t.pendingProps,l),t.child;case 8:return Ie(e,t,t.pendingProps.children,l),t.child;case 12:return Ie(e,t,t.pendingProps.children,l),t.child;case 10:return a=t.pendingProps,ol(t,t.type,a.value),Ie(e,t,a.children,l),t.child;case 9:return n=t.type._context,a=t.pendingProps.children,Gl(t),n=at(n),a=a(n),t.flags|=1,Ie(e,t,a,l),t.child;case 14:return hd(e,t,t.type,t.pendingProps,l);case 15:return xd(e,t,t.type,t.pendingProps,l);case 19:return Sd(e,t,l);case 31:return a=t.pendingProps,l=t.mode,a={mode:a.mode,children:a.children},e===null?(l=Ln(a,l),l.ref=t.ref,t.child=l,l.return=t,t=l):(l=Qt(e.child,a),l.ref=t.ref,t.child=l,l.return=t,t=l),t;case 22:return gd(e,t,l);case 24:return Gl(t),a=at(Ge),e===null?(n=oc(),n===null&&(n=Oe,i=uc(),n.pooledCache=i,i.refCount++,i!==null&&(n.pooledCacheLanes|=l),n=i),t.memoizedState={parent:a,cache:n},fc(t),ol(t,Ge,n)):((e.lanes&l)!==0&&(mc(e,t),bs(t,null,null,l),gs()),n=e.memoizedState,i=t.memoizedState,n.parent!==a?(n={parent:a,cache:a},t.memoizedState=n,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=n),ol(t,Ge,a)):(a=i.cache,ol(t,Ge,a),a!==n.cache&&cc(t,[Ge],l,!0))),Ie(e,t,t.pendingProps.children,l),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function It(e){e.flags|=4}function Dd(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!qf(t)){if(t=Tt.current,t!==null&&((Ne&4194048)===Ne?Bt!==null:(Ne&62914560)!==Ne&&(Ne&536870912)===0||t!==Bt))throw hs=dc,co;e.flags|=8192}}function Gn(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?an():536870912,e.lanes|=t,Ma|=t)}function ws(e,t){if(!De)switch(e.tailMode){case"hidden":t=e.tail;for(var l=null;t!==null;)t.alternate!==null&&(l=t),t=t.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var a=null;l!==null;)l.alternate!==null&&(a=l),l=l.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function _e(e){var t=e.alternate!==null&&e.alternate.child===e.child,l=0,a=0;if(t)for(var n=e.child;n!==null;)l|=n.lanes|n.childLanes,a|=n.subtreeFlags&65011712,a|=n.flags&65011712,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)l|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=a,e.childLanes=l,t}function Oh(e,t,l){var a=t.pendingProps;switch(ac(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _e(t),null;case 1:return _e(t),null;case 3:return l=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),Jt(Ge),pe(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(cs(t)?It(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,lo())),_e(t),null;case 26:return l=t.memoizedState,e===null?(It(t),l!==null?(_e(t),Dd(t,l)):(_e(t),t.flags&=-16777217)):l?l!==e.memoizedState?(It(t),_e(t),Dd(t,l)):(_e(t),t.flags&=-16777217):(e.memoizedProps!==a&&It(t),_e(t),t.flags&=-16777217),null;case 27:Ze(t),l=q.current;var n=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==a&&It(t);else{if(!a){if(t.stateNode===null)throw Error(o(166));return _e(t),null}e=ce.current,cs(t)?eo(t):(e=Tf(n,a,l),t.stateNode=e,It(t))}return _e(t),null;case 5:if(Ze(t),l=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&It(t);else{if(!a){if(t.stateNode===null)throw Error(o(166));return _e(t),null}if(e=ce.current,cs(t))eo(t);else{switch(n=li(q.current),e){case 1:e=n.createElementNS("http://www.w3.org/2000/svg",l);break;case 2:e=n.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;default:switch(l){case"svg":e=n.createElementNS("http://www.w3.org/2000/svg",l);break;case"math":e=n.createElementNS("http://www.w3.org/1998/Math/MathML",l);break;case"script":e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof a.is=="string"?n.createElement("select",{is:a.is}):n.createElement("select"),a.multiple?e.multiple=!0:a.size&&(e.size=a.size);break;default:e=typeof a.is=="string"?n.createElement(l,{is:a.is}):n.createElement(l)}}e[lt]=t,e[it]=a;e:for(n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.tag!==27&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}t.stateNode=e;e:switch(et(e,l,a),l){case"button":case"input":case"select":case"textarea":e=!!a.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&It(t)}}return _e(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&It(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(o(166));if(e=q.current,cs(t)){if(e=t.stateNode,l=t.memoizedProps,a=null,n=nt,n!==null)switch(n.tag){case 27:case 5:a=n.memoizedProps}e[lt]=t,e=!!(e.nodeValue===l||a!==null&&a.suppressHydrationWarning===!0||yf(e.nodeValue,l)),e||Xl(t)}else e=li(e).createTextNode(a),e[lt]=t,t.stateNode=e}return _e(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(n=cs(t),a!==null&&a.dehydrated!==null){if(e===null){if(!n)throw Error(o(318));if(n=t.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(o(317));n[lt]=t}else us(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;_e(t),n=!1}else n=lo(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return t.flags&256?(Ft(t),t):(Ft(t),null)}if(Ft(t),(t.flags&128)!==0)return t.lanes=l,t;if(l=a!==null,e=e!==null&&e.memoizedState!==null,l){a=t.child,n=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(n=a.alternate.memoizedState.cachePool.pool);var i=null;a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==n&&(a.flags|=2048)}return l!==e&&l&&(t.child.flags|=8192),Gn(t,t.updateQueue),_e(t),null;case 4:return pe(),e===null&&xu(t.stateNode.containerInfo),_e(t),null;case 10:return Jt(t.type),_e(t),null;case 19:if(oe(Qe),n=t.memoizedState,n===null)return _e(t),null;if(a=(t.flags&128)!==0,i=n.rendering,i===null)if(a)ws(n,!1);else{if(He!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(i=Hn(e),i!==null){for(t.flags|=128,ws(n,!1),e=i.updateQueue,t.updateQueue=e,Gn(t,e),t.subtreeFlags=0,e=l,l=t.child;l!==null;)Ir(l,e),l=l.sibling;return Q(Qe,Qe.current&1|2),t.child}e=e.sibling}n.tail!==null&&dt()>Vn&&(t.flags|=128,a=!0,ws(n,!1),t.lanes=4194304)}else{if(!a)if(e=Hn(i),e!==null){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,Gn(t,e),ws(n,!0),n.tail===null&&n.tailMode==="hidden"&&!i.alternate&&!De)return _e(t),null}else 2*dt()-n.renderingStartTime>Vn&&l!==536870912&&(t.flags|=128,a=!0,ws(n,!1),t.lanes=4194304);n.isBackwards?(i.sibling=t.child,t.child=i):(e=n.last,e!==null?e.sibling=i:t.child=i,n.last=i)}return n.tail!==null?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=dt(),t.sibling=null,e=Qe.current,Q(Qe,a?e&1|2:e&1),t):(_e(t),null);case 22:case 23:return Ft(t),bc(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(l&536870912)!==0&&(t.flags&128)===0&&(_e(t),t.subtreeFlags&6&&(t.flags|=8192)):_e(t),l=t.updateQueue,l!==null&&Gn(t,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==l&&(t.flags|=2048),e!==null&&oe(Ql),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),Jt(Ge),_e(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function Uh(e,t){switch(ac(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Jt(Ge),pe(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Ze(t),null;case 13:if(Ft(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));us()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return oe(Qe),null;case 4:return pe(),null;case 10:return Jt(t.type),null;case 22:case 23:return Ft(t),bc(),e!==null&&oe(Ql),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Jt(Ge),null;case 25:return null;default:return null}}function Td(e,t){switch(ac(t),t.tag){case 3:Jt(Ge),pe();break;case 26:case 27:case 5:Ze(t);break;case 4:pe();break;case 13:Ft(t);break;case 19:oe(Qe);break;case 10:Jt(t.type);break;case 22:case 23:Ft(t),bc(),e!==null&&oe(Ql);break;case 24:Jt(Ge)}}function Ds(e,t){try{var l=t.updateQueue,a=l!==null?l.lastEffect:null;if(a!==null){var n=a.next;l=n;do{if((l.tag&e)===e){a=void 0;var i=l.create,c=l.inst;a=i(),c.destroy=a}l=l.next}while(l!==n)}}catch(r){ze(t,t.return,r)}}function bl(e,t,l){try{var a=t.updateQueue,n=a!==null?a.lastEffect:null;if(n!==null){var i=n.next;a=i;do{if((a.tag&e)===e){var c=a.inst,r=c.destroy;if(r!==void 0){c.destroy=void 0,n=t;var f=l,v=r;try{v()}catch(M){ze(n,f,M)}}}a=a.next}while(a!==i)}}catch(M){ze(t,t.return,M)}}function Ad(e){var t=e.updateQueue;if(t!==null){var l=e.stateNode;try{ho(t,l)}catch(a){ze(e,e.return,a)}}}function Cd(e,t,l){l.props=Vl(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(a){ze(e,t,a)}}function Ts(e,t){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof l=="function"?e.refCleanup=l(a):l.current=a}}catch(n){ze(e,t,n)}}function _t(e,t){var l=e.ref,a=e.refCleanup;if(l!==null)if(typeof a=="function")try{a()}catch(n){ze(e,t,n)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(n){ze(e,t,n)}else l.current=null}function Ed(e){var t=e.type,l=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":l.autoFocus&&a.focus();break e;case"img":l.src?a.src=l.src:l.srcSet&&(a.srcset=l.srcSet)}}catch(n){ze(e,e.return,n)}}function Zc(e,t,l){try{var a=e.stateNode;e0(a,e.type,l,t),a[it]=t}catch(n){ze(e,e.return,n)}}function Md(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Dl(e.type)||e.tag===4}function Vc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Md(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Dl(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Kc(e,t,l){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,t):(t=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,t.appendChild(e),l=l._reactRootContainer,l!=null||t.onclick!==null||(t.onclick=ti));else if(a!==4&&(a===27&&Dl(e.type)&&(l=e.stateNode,t=null),e=e.child,e!==null))for(Kc(e,t,l),e=e.sibling;e!==null;)Kc(e,t,l),e=e.sibling}function Qn(e,t,l){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?l.insertBefore(e,t):l.appendChild(e);else if(a!==4&&(a===27&&Dl(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(Qn(e,t,l),e=e.sibling;e!==null;)Qn(e,t,l),e=e.sibling}function zd(e){var t=e.stateNode,l=e.memoizedProps;try{for(var a=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);et(t,a,l),t[lt]=e,t[it]=l}catch(i){ze(e,e.return,i)}}var Pt=!1,Ye=!1,Jc=!1,Od=typeof WeakSet=="function"?WeakSet:Set,$e=null;function qh(e,t){if(e=e.containerInfo,pu=ui,e=Lr(e),Vi(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var a=l.getSelection&&l.getSelection();if(a&&a.rangeCount!==0){l=a.anchorNode;var n=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{l.nodeType,i.nodeType}catch{l=null;break e}var c=0,r=-1,f=-1,v=0,M=0,U=e,j=null;t:for(;;){for(var w;U!==l||n!==0&&U.nodeType!==3||(r=c+n),U!==i||a!==0&&U.nodeType!==3||(f=c+a),U.nodeType===3&&(c+=U.nodeValue.length),(w=U.firstChild)!==null;)j=U,U=w;for(;;){if(U===e)break t;if(j===l&&++v===n&&(r=c),j===i&&++M===a&&(f=c),(w=U.nextSibling)!==null)break;U=j,j=U.parentNode}U=w}l=r===-1||f===-1?null:{start:r,end:f}}else l=null}l=l||{start:0,end:0}}else l=null;for(yu={focusedElem:e,selectionRange:l},ui=!1,$e=t;$e!==null;)if(t=$e,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,$e=e;else for(;$e!==null;){switch(t=$e,i=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&i!==null){e=void 0,l=t,n=i.memoizedProps,i=i.memoizedState,a=l.stateNode;try{var ie=Vl(l.type,n,l.elementType===l.type);e=a.getSnapshotBeforeUpdate(ie,i),a.__reactInternalSnapshotBeforeUpdate=e}catch(ae){ze(l,l.return,ae)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,l=e.nodeType,l===9)Nu(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Nu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,$e=e;break}$e=t.return}}function Ud(e,t,l){var a=l.flags;switch(l.tag){case 0:case 11:case 15:pl(e,l),a&4&&Ds(5,l);break;case 1:if(pl(e,l),a&4)if(e=l.stateNode,t===null)try{e.componentDidMount()}catch(c){ze(l,l.return,c)}else{var n=Vl(l.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(c){ze(l,l.return,c)}}a&64&&Ad(l),a&512&&Ts(l,l.return);break;case 3:if(pl(e,l),a&64&&(e=l.updateQueue,e!==null)){if(t=null,l.child!==null)switch(l.child.tag){case 27:case 5:t=l.child.stateNode;break;case 1:t=l.child.stateNode}try{ho(e,t)}catch(c){ze(l,l.return,c)}}break;case 27:t===null&&a&4&&zd(l);case 26:case 5:pl(e,l),t===null&&a&4&&Ed(l),a&512&&Ts(l,l.return);break;case 12:pl(e,l);break;case 13:pl(e,l),a&4&&_d(e,l),a&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=Gh.bind(null,l),c0(e,l))));break;case 22:if(a=l.memoizedState!==null||Pt,!a){t=t!==null&&t.memoizedState!==null||Ye,n=Pt;var i=Ye;Pt=a,(Ye=t)&&!i?yl(e,l,(l.subtreeFlags&8772)!==0):pl(e,l),Pt=n,Ye=i}break;case 30:break;default:pl(e,l)}}function qd(e){var t=e.alternate;t!==null&&(e.alternate=null,qd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ai(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Be=null,rt=!1;function el(e,t,l){for(l=l.child;l!==null;)Bd(e,t,l),l=l.sibling}function Bd(e,t,l){if(tt&&typeof tt.onCommitFiberUnmount=="function")try{tt.onCommitFiberUnmount(nl,l)}catch{}switch(l.tag){case 26:Ye||_t(l,t),el(e,t,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Ye||_t(l,t);var a=Be,n=rt;Dl(l.type)&&(Be=l.stateNode,rt=!1),el(e,t,l),Bs(l.stateNode),Be=a,rt=n;break;case 5:Ye||_t(l,t);case 6:if(a=Be,n=rt,Be=null,el(e,t,l),Be=a,rt=n,Be!==null)if(rt)try{(Be.nodeType===9?Be.body:Be.nodeName==="HTML"?Be.ownerDocument.body:Be).removeChild(l.stateNode)}catch(i){ze(l,t,i)}else try{Be.removeChild(l.stateNode)}catch(i){ze(l,t,i)}break;case 18:Be!==null&&(rt?(e=Be,wf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),Gs(e)):wf(Be,l.stateNode));break;case 4:a=Be,n=rt,Be=l.stateNode.containerInfo,rt=!0,el(e,t,l),Be=a,rt=n;break;case 0:case 11:case 14:case 15:Ye||bl(2,l,t),Ye||bl(4,l,t),el(e,t,l);break;case 1:Ye||(_t(l,t),a=l.stateNode,typeof a.componentWillUnmount=="function"&&Cd(l,t,a)),el(e,t,l);break;case 21:el(e,t,l);break;case 22:Ye=(a=Ye)||l.memoizedState!==null,el(e,t,l),Ye=a;break;default:el(e,t,l)}}function _d(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Gs(e)}catch(l){ze(t,t.return,l)}}function Bh(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Od),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Od),t;default:throw Error(o(435,e.tag))}}function $c(e,t){var l=Bh(e);t.forEach(function(a){var n=Qh.bind(null,e,a);l.has(a)||(l.add(a),a.then(n,n))})}function ht(e,t){var l=t.deletions;if(l!==null)for(var a=0;a<l.length;a++){var n=l[a],i=e,c=t,r=c;e:for(;r!==null;){switch(r.tag){case 27:if(Dl(r.type)){Be=r.stateNode,rt=!1;break e}break;case 5:Be=r.stateNode,rt=!1;break e;case 3:case 4:Be=r.stateNode.containerInfo,rt=!0;break e}r=r.return}if(Be===null)throw Error(o(160));Bd(i,c,n),Be=null,rt=!1,i=n.alternate,i!==null&&(i.return=null),n.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Rd(t,e),t=t.sibling}var Ot=null;function Rd(e,t){var l=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ht(t,e),xt(e),a&4&&(bl(3,e,e.return),Ds(3,e),bl(5,e,e.return));break;case 1:ht(t,e),xt(e),a&512&&(Ye||l===null||_t(l,l.return)),a&64&&Pt&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?a:l.concat(a))));break;case 26:var n=Ot;if(ht(t,e),xt(e),a&512&&(Ye||l===null||_t(l,l.return)),a&4){var i=l!==null?l.memoizedState:null;if(a=e.memoizedState,l===null)if(a===null)if(e.stateNode===null){e:{a=e.type,l=e.memoizedProps,n=n.ownerDocument||n;t:switch(a){case"title":i=n.getElementsByTagName("title")[0],(!i||i[Fa]||i[lt]||i.namespaceURI==="http://www.w3.org/2000/svg"||i.hasAttribute("itemprop"))&&(i=n.createElement(a),n.head.insertBefore(i,n.querySelector("head > title"))),et(i,a,l),i[lt]=e,Ke(i),a=i;break e;case"link":var c=Of("link","href",n).get(a+(l.href||""));if(c){for(var r=0;r<c.length;r++)if(i=c[r],i.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&i.getAttribute("rel")===(l.rel==null?null:l.rel)&&i.getAttribute("title")===(l.title==null?null:l.title)&&i.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){c.splice(r,1);break t}}i=n.createElement(a),et(i,a,l),n.head.appendChild(i);break;case"meta":if(c=Of("meta","content",n).get(a+(l.content||""))){for(r=0;r<c.length;r++)if(i=c[r],i.getAttribute("content")===(l.content==null?null:""+l.content)&&i.getAttribute("name")===(l.name==null?null:l.name)&&i.getAttribute("property")===(l.property==null?null:l.property)&&i.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&i.getAttribute("charset")===(l.charSet==null?null:l.charSet)){c.splice(r,1);break t}}i=n.createElement(a),et(i,a,l),n.head.appendChild(i);break;default:throw Error(o(468,a))}i[lt]=e,Ke(i),a=i}e.stateNode=a}else Uf(n,e.type,e.stateNode);else e.stateNode=zf(n,a,e.memoizedProps);else i!==a?(i===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):i.count--,a===null?Uf(n,e.type,e.stateNode):zf(n,a,e.memoizedProps)):a===null&&e.stateNode!==null&&Zc(e,e.memoizedProps,l.memoizedProps)}break;case 27:ht(t,e),xt(e),a&512&&(Ye||l===null||_t(l,l.return)),l!==null&&a&4&&Zc(e,e.memoizedProps,l.memoizedProps);break;case 5:if(ht(t,e),xt(e),a&512&&(Ye||l===null||_t(l,l.return)),e.flags&32){n=e.stateNode;try{ua(n,"")}catch(w){ze(e,e.return,w)}}a&4&&e.stateNode!=null&&(n=e.memoizedProps,Zc(e,n,l!==null?l.memoizedProps:n)),a&1024&&(Jc=!0);break;case 6:if(ht(t,e),xt(e),a&4){if(e.stateNode===null)throw Error(o(162));a=e.memoizedProps,l=e.stateNode;try{l.nodeValue=a}catch(w){ze(e,e.return,w)}}break;case 3:if(ni=null,n=Ot,Ot=ai(t.containerInfo),ht(t,e),Ot=n,xt(e),a&4&&l!==null&&l.memoizedState.isDehydrated)try{Gs(t.containerInfo)}catch(w){ze(e,e.return,w)}Jc&&(Jc=!1,Hd(e));break;case 4:a=Ot,Ot=ai(e.stateNode.containerInfo),ht(t,e),xt(e),Ot=a;break;case 12:ht(t,e),xt(e);break;case 13:ht(t,e),xt(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(tu=dt()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,$c(e,a)));break;case 22:n=e.memoizedState!==null;var f=l!==null&&l.memoizedState!==null,v=Pt,M=Ye;if(Pt=v||n,Ye=M||f,ht(t,e),Ye=M,Pt=v,xt(e),a&8192)e:for(t=e.stateNode,t._visibility=n?t._visibility&-2:t._visibility|1,n&&(l===null||f||Pt||Ye||Kl(e)),l=null,t=e;;){if(t.tag===5||t.tag===26){if(l===null){f=l=t;try{if(i=f.stateNode,n)c=i.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none";else{r=f.stateNode;var U=f.memoizedProps.style,j=U!=null&&U.hasOwnProperty("display")?U.display:null;r.style.display=j==null||typeof j=="boolean"?"":(""+j).trim()}}catch(w){ze(f,f.return,w)}}}else if(t.tag===6){if(l===null){f=t;try{f.stateNode.nodeValue=n?"":f.memoizedProps}catch(w){ze(f,f.return,w)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;l===t&&(l=null),t=t.return}l===t&&(l=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(l=a.retryQueue,l!==null&&(a.retryQueue=null,$c(e,l))));break;case 19:ht(t,e),xt(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,$c(e,a)));break;case 30:break;case 21:break;default:ht(t,e),xt(e)}}function xt(e){var t=e.flags;if(t&2){try{for(var l,a=e.return;a!==null;){if(Md(a)){l=a;break}a=a.return}if(l==null)throw Error(o(160));switch(l.tag){case 27:var n=l.stateNode,i=Vc(e);Qn(e,i,n);break;case 5:var c=l.stateNode;l.flags&32&&(ua(c,""),l.flags&=-33);var r=Vc(e);Qn(e,r,c);break;case 3:case 4:var f=l.stateNode.containerInfo,v=Vc(e);Kc(e,v,f);break;default:throw Error(o(161))}}catch(M){ze(e,e.return,M)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Hd(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Hd(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function pl(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Ud(e,t.alternate,t),t=t.sibling}function Kl(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:bl(4,t,t.return),Kl(t);break;case 1:_t(t,t.return);var l=t.stateNode;typeof l.componentWillUnmount=="function"&&Cd(t,t.return,l),Kl(t);break;case 27:Bs(t.stateNode);case 26:case 5:_t(t,t.return),Kl(t);break;case 22:t.memoizedState===null&&Kl(t);break;case 30:Kl(t);break;default:Kl(t)}e=e.sibling}}function yl(e,t,l){for(l=l&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,n=e,i=t,c=i.flags;switch(i.tag){case 0:case 11:case 15:yl(n,i,l),Ds(4,i);break;case 1:if(yl(n,i,l),a=i,n=a.stateNode,typeof n.componentDidMount=="function")try{n.componentDidMount()}catch(v){ze(a,a.return,v)}if(a=i,n=a.updateQueue,n!==null){var r=a.stateNode;try{var f=n.shared.hiddenCallbacks;if(f!==null)for(n.shared.hiddenCallbacks=null,n=0;n<f.length;n++)mo(f[n],r)}catch(v){ze(a,a.return,v)}}l&&c&64&&Ad(i),Ts(i,i.return);break;case 27:zd(i);case 26:case 5:yl(n,i,l),l&&a===null&&c&4&&Ed(i),Ts(i,i.return);break;case 12:yl(n,i,l);break;case 13:yl(n,i,l),l&&c&4&&_d(n,i);break;case 22:i.memoizedState===null&&yl(n,i,l),Ts(i,i.return);break;case 30:break;default:yl(n,i,l)}t=t.sibling}}function Fc(e,t){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&ds(l))}function Wc(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ds(e))}function Rt(e,t,l,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)kd(e,t,l,a),t=t.sibling}function kd(e,t,l,a){var n=t.flags;switch(t.tag){case 0:case 11:case 15:Rt(e,t,l,a),n&2048&&Ds(9,t);break;case 1:Rt(e,t,l,a);break;case 3:Rt(e,t,l,a),n&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&ds(e)));break;case 12:if(n&2048){Rt(e,t,l,a),e=t.stateNode;try{var i=t.memoizedProps,c=i.id,r=i.onPostCommit;typeof r=="function"&&r(c,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(f){ze(t,t.return,f)}}else Rt(e,t,l,a);break;case 13:Rt(e,t,l,a);break;case 23:break;case 22:i=t.stateNode,c=t.alternate,t.memoizedState!==null?i._visibility&2?Rt(e,t,l,a):As(e,t):i._visibility&2?Rt(e,t,l,a):(i._visibility|=2,Aa(e,t,l,a,(t.subtreeFlags&10256)!==0)),n&2048&&Fc(c,t);break;case 24:Rt(e,t,l,a),n&2048&&Wc(t.alternate,t);break;default:Rt(e,t,l,a)}}function Aa(e,t,l,a,n){for(n=n&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var i=e,c=t,r=l,f=a,v=c.flags;switch(c.tag){case 0:case 11:case 15:Aa(i,c,r,f,n),Ds(8,c);break;case 23:break;case 22:var M=c.stateNode;c.memoizedState!==null?M._visibility&2?Aa(i,c,r,f,n):As(i,c):(M._visibility|=2,Aa(i,c,r,f,n)),n&&v&2048&&Fc(c.alternate,c);break;case 24:Aa(i,c,r,f,n),n&&v&2048&&Wc(c.alternate,c);break;default:Aa(i,c,r,f,n)}t=t.sibling}}function As(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var l=e,a=t,n=a.flags;switch(a.tag){case 22:As(l,a),n&2048&&Fc(a.alternate,a);break;case 24:As(l,a),n&2048&&Wc(a.alternate,a);break;default:As(l,a)}t=t.sibling}}var Cs=8192;function Ca(e){if(e.subtreeFlags&Cs)for(e=e.child;e!==null;)Yd(e),e=e.sibling}function Yd(e){switch(e.tag){case 26:Ca(e),e.flags&Cs&&e.memoizedState!==null&&v0(Ot,e.memoizedState,e.memoizedProps);break;case 5:Ca(e);break;case 3:case 4:var t=Ot;Ot=ai(e.stateNode.containerInfo),Ca(e),Ot=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=Cs,Cs=16777216,Ca(e),Cs=t):Ca(e));break;default:Ca(e)}}function Xd(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Es(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var a=t[l];$e=a,Gd(a,e)}Xd(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Ld(e),e=e.sibling}function Ld(e){switch(e.tag){case 0:case 11:case 15:Es(e),e.flags&2048&&bl(9,e,e.return);break;case 3:Es(e);break;case 12:Es(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Zn(e)):Es(e);break;default:Es(e)}}function Zn(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var a=t[l];$e=a,Gd(a,e)}Xd(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:bl(8,t,t.return),Zn(t);break;case 22:l=t.stateNode,l._visibility&2&&(l._visibility&=-3,Zn(t));break;default:Zn(t)}e=e.sibling}}function Gd(e,t){for(;$e!==null;){var l=$e;switch(l.tag){case 0:case 11:case 15:bl(8,l,t);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var a=l.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:ds(l.memoizedState.cache)}if(a=l.child,a!==null)a.return=l,$e=a;else e:for(l=e;$e!==null;){a=$e;var n=a.sibling,i=a.return;if(qd(a),a===l){$e=null;break e}if(n!==null){n.return=i,$e=n;break e}$e=i}}}var _h={getCacheForType:function(e){var t=at(Ge),l=t.data.get(e);return l===void 0&&(l=e(),t.data.set(e,l)),l}},Rh=typeof WeakMap=="function"?WeakMap:Map,Te=0,Oe=null,xe=null,Ne=0,Ae=0,gt=null,vl=!1,Ea=!1,Ic=!1,tl=0,He=0,jl=0,Jl=0,Pc=0,At=0,Ma=0,Ms=null,ot=null,eu=!1,tu=0,Vn=1/0,Kn=null,Nl=null,Pe=0,Sl=null,za=null,Oa=0,lu=0,au=null,Qd=null,zs=0,su=null;function bt(){if((Te&2)!==0&&Ne!==0)return Ne&-Ne;if(g.T!==null){var e=ya;return e!==0?e:du()}return nr()}function Zd(){At===0&&(At=(Ne&536870912)===0||De?ea():536870912);var e=Tt.current;return e!==null&&(e.flags|=32),At}function pt(e,t,l){(e===Oe&&(Ae===2||Ae===9)||e.cancelPendingCommit!==null)&&(Ua(e,0),wl(e,Ne,At,!1)),st(e,l),((Te&2)===0||e!==Oe)&&(e===Oe&&((Te&2)===0&&(Jl|=l),He===4&&wl(e,Ne,At,!1)),Ht(e))}function Vd(e,t,l){if((Te&6)!==0)throw Error(o(327));var a=!l&&(t&124)===0&&(t&e.expiredLanes)===0||cl(e,t),n=a?Yh(e,t):cu(e,t,!0),i=a;do{if(n===0){Ea&&!a&&wl(e,t,0,!1);break}else{if(l=e.current.alternate,i&&!Hh(l)){n=cu(e,t,!1),i=!1;continue}if(n===2){if(i=t,e.errorRecoveryDisabledLanes&i)var c=0;else c=e.pendingLanes&-536870913,c=c!==0?c:c&536870912?536870912:0;if(c!==0){t=c;e:{var r=e;n=Ms;var f=r.current.memoizedState.isDehydrated;if(f&&(Ua(r,c).flags|=256),c=cu(r,c,!1),c!==2){if(Ic&&!f){r.errorRecoveryDisabledLanes|=i,Jl|=i,n=4;break e}i=ot,ot=n,i!==null&&(ot===null?ot=i:ot.push.apply(ot,i))}n=c}if(i=!1,n!==2)continue}}if(n===1){Ua(e,0),wl(e,t,0,!0);break}e:{switch(a=e,i=n,i){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:wl(a,t,At,!vl);break e;case 2:ot=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(n=tu+300-dt(),10<n)){if(wl(a,t,At,!vl),Pl(a,0,!0)!==0)break e;a.timeoutHandle=Nf(Kd.bind(null,a,l,ot,Kn,eu,t,At,Jl,Ma,vl,i,2,-0,0),n);break e}Kd(a,l,ot,Kn,eu,t,At,Jl,Ma,vl,i,0,-0,0)}}break}while(!0);Ht(e)}function Kd(e,t,l,a,n,i,c,r,f,v,M,U,j,w){if(e.timeoutHandle=-1,U=t.subtreeFlags,(U&8192||(U&16785408)===16785408)&&(Hs={stylesheets:null,count:0,unsuspend:y0},Yd(t),U=j0(),U!==null)){e.cancelPendingCommit=U(ef.bind(null,e,t,i,l,a,n,c,r,f,M,1,j,w)),wl(e,i,c,!v);return}ef(e,t,i,l,a,n,c,r,f)}function Hh(e){for(var t=e;;){var l=t.tag;if((l===0||l===11||l===15)&&t.flags&16384&&(l=t.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var a=0;a<l.length;a++){var n=l[a],i=n.getSnapshot;n=n.value;try{if(!ft(i(),n))return!1}catch{return!1}}if(l=t.child,t.subtreeFlags&16384&&l!==null)l.return=t,t=l;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wl(e,t,l,a){t&=~Pc,t&=~Jl,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var n=t;0<n;){var i=31-le(n),c=1<<i;a[i]=-1,n&=~c}l!==0&&ar(e,l,t)}function Jn(){return(Te&6)===0?(Os(0),!1):!0}function nu(){if(xe!==null){if(Ae===0)var e=xe.return;else e=xe,Kt=Ll=null,Nc(e),Da=null,Ns=0,e=xe;for(;e!==null;)Td(e.alternate,e),e=e.return;xe=null}}function Ua(e,t){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,l0(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),nu(),Oe=e,xe=l=Qt(e.current,null),Ne=t,Ae=0,gt=null,vl=!1,Ea=cl(e,t),Ic=!1,Ma=At=Pc=Jl=jl=He=0,ot=Ms=null,eu=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var n=31-le(a),i=1<<n;t|=e[n],a&=~i}return tl=t,gn(),l}function Jd(e,t){de=null,g.H=Bn,t===ms||t===Dn?(t=oo(),Ae=3):t===co?(t=oo(),Ae=4):Ae=t===fd?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,gt=t,xe===null&&(He=1,Yn(e,Nt(t,e.current)))}function $d(){var e=g.H;return g.H=Bn,e===null?Bn:e}function Fd(){var e=g.A;return g.A=_h,e}function iu(){He=4,vl||(Ne&4194048)!==Ne&&Tt.current!==null||(Ea=!0),(jl&134217727)===0&&(Jl&134217727)===0||Oe===null||wl(Oe,Ne,At,!1)}function cu(e,t,l){var a=Te;Te|=2;var n=$d(),i=Fd();(Oe!==e||Ne!==t)&&(Kn=null,Ua(e,t)),t=!1;var c=He;e:do try{if(Ae!==0&&xe!==null){var r=xe,f=gt;switch(Ae){case 8:nu(),c=6;break e;case 3:case 2:case 9:case 6:Tt.current===null&&(t=!0);var v=Ae;if(Ae=0,gt=null,qa(e,r,f,v),l&&Ea){c=0;break e}break;default:v=Ae,Ae=0,gt=null,qa(e,r,f,v)}}kh(),c=He;break}catch(M){Jd(e,M)}while(!0);return t&&e.shellSuspendCounter++,Kt=Ll=null,Te=a,g.H=n,g.A=i,xe===null&&(Oe=null,Ne=0,gn()),c}function kh(){for(;xe!==null;)Wd(xe)}function Yh(e,t){var l=Te;Te|=2;var a=$d(),n=Fd();Oe!==e||Ne!==t?(Kn=null,Vn=dt()+500,Ua(e,t)):Ea=cl(e,t);e:do try{if(Ae!==0&&xe!==null){t=xe;var i=gt;t:switch(Ae){case 1:Ae=0,gt=null,qa(e,t,i,1);break;case 2:case 9:if(uo(i)){Ae=0,gt=null,Id(t);break}t=function(){Ae!==2&&Ae!==9||Oe!==e||(Ae=7),Ht(e)},i.then(t,t);break e;case 3:Ae=7;break e;case 4:Ae=5;break e;case 7:uo(i)?(Ae=0,gt=null,Id(t)):(Ae=0,gt=null,qa(e,t,i,7));break;case 5:var c=null;switch(xe.tag){case 26:c=xe.memoizedState;case 5:case 27:var r=xe;if(!c||qf(c)){Ae=0,gt=null;var f=r.sibling;if(f!==null)xe=f;else{var v=r.return;v!==null?(xe=v,$n(v)):xe=null}break t}}Ae=0,gt=null,qa(e,t,i,5);break;case 6:Ae=0,gt=null,qa(e,t,i,6);break;case 8:nu(),He=6;break e;default:throw Error(o(462))}}Xh();break}catch(M){Jd(e,M)}while(!0);return Kt=Ll=null,g.H=a,g.A=n,Te=l,xe!==null?0:(Oe=null,Ne=0,gn(),He)}function Xh(){for(;xe!==null&&!vi();)Wd(xe)}function Wd(e){var t=wd(e.alternate,e,tl);e.memoizedProps=e.pendingProps,t===null?$n(e):xe=t}function Id(e){var t=e,l=t.alternate;switch(t.tag){case 15:case 0:t=pd(l,t,t.pendingProps,t.type,void 0,Ne);break;case 11:t=pd(l,t,t.pendingProps,t.type.render,t.ref,Ne);break;case 5:Nc(t);default:Td(l,t),t=xe=Ir(t,tl),t=wd(l,t,tl)}e.memoizedProps=e.pendingProps,t===null?$n(e):xe=t}function qa(e,t,l,a){Kt=Ll=null,Nc(t),Da=null,Ns=0;var n=t.return;try{if(Mh(e,n,t,l,Ne)){He=1,Yn(e,Nt(l,e.current)),xe=null;return}}catch(i){if(n!==null)throw xe=n,i;He=1,Yn(e,Nt(l,e.current)),xe=null;return}t.flags&32768?(De||a===1?e=!0:Ea||(Ne&536870912)!==0?e=!1:(vl=e=!0,(a===2||a===9||a===3||a===6)&&(a=Tt.current,a!==null&&a.tag===13&&(a.flags|=16384))),Pd(t,e)):$n(t)}function $n(e){var t=e;do{if((t.flags&32768)!==0){Pd(t,vl);return}e=t.return;var l=Oh(t.alternate,t,tl);if(l!==null){xe=l;return}if(t=t.sibling,t!==null){xe=t;return}xe=t=e}while(t!==null);He===0&&(He=5)}function Pd(e,t){do{var l=Uh(e.alternate,e);if(l!==null){l.flags&=32767,xe=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!t&&(e=e.sibling,e!==null)){xe=e;return}xe=e=l}while(e!==null);He=6,xe=null}function ef(e,t,l,a,n,i,c,r,f){e.cancelPendingCommit=null;do Fn();while(Pe!==0);if((Te&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(i=t.lanes|t.childLanes,i|=Wi,Xt(e,l,i,c,r,f),e===Oe&&(xe=Oe=null,Ne=0),za=t,Sl=e,Oa=l,lu=i,au=n,Qd=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Zh(Wl,function(){return nf(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=g.T,g.T=null,n=B.p,B.p=2,c=Te,Te|=4;try{qh(e,t,l)}finally{Te=c,B.p=n,g.T=a}}Pe=1,tf(),lf(),af()}}function tf(){if(Pe===1){Pe=0;var e=Sl,t=za,l=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||l){l=g.T,g.T=null;var a=B.p;B.p=2;var n=Te;Te|=4;try{Rd(t,e);var i=yu,c=Lr(e.containerInfo),r=i.focusedElem,f=i.selectionRange;if(c!==r&&r&&r.ownerDocument&&Xr(r.ownerDocument.documentElement,r)){if(f!==null&&Vi(r)){var v=f.start,M=f.end;if(M===void 0&&(M=v),"selectionStart"in r)r.selectionStart=v,r.selectionEnd=Math.min(M,r.value.length);else{var U=r.ownerDocument||document,j=U&&U.defaultView||window;if(j.getSelection){var w=j.getSelection(),ie=r.textContent.length,ae=Math.min(f.start,ie),Me=f.end===void 0?ae:Math.min(f.end,ie);!w.extend&&ae>Me&&(c=Me,Me=ae,ae=c);var b=Yr(r,ae),x=Yr(r,Me);if(b&&x&&(w.rangeCount!==1||w.anchorNode!==b.node||w.anchorOffset!==b.offset||w.focusNode!==x.node||w.focusOffset!==x.offset)){var y=U.createRange();y.setStart(b.node,b.offset),w.removeAllRanges(),ae>Me?(w.addRange(y),w.extend(x.node,x.offset)):(y.setEnd(x.node,x.offset),w.addRange(y))}}}}for(U=[],w=r;w=w.parentNode;)w.nodeType===1&&U.push({element:w,left:w.scrollLeft,top:w.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<U.length;r++){var z=U[r];z.element.scrollLeft=z.left,z.element.scrollTop=z.top}}ui=!!pu,yu=pu=null}finally{Te=n,B.p=a,g.T=l}}e.current=t,Pe=2}}function lf(){if(Pe===2){Pe=0;var e=Sl,t=za,l=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||l){l=g.T,g.T=null;var a=B.p;B.p=2;var n=Te;Te|=4;try{Ud(e,t.alternate,t)}finally{Te=n,B.p=a,g.T=l}}Pe=3}}function af(){if(Pe===4||Pe===3){Pe=0,ji();var e=Sl,t=za,l=Oa,a=Qd;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Pe=5:(Pe=0,za=Sl=null,sf(e,e.pendingLanes));var n=e.pendingLanes;if(n===0&&(Nl=null),Di(l),t=t.stateNode,tt&&typeof tt.onCommitFiberRoot=="function")try{tt.onCommitFiberRoot(nl,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=g.T,n=B.p,B.p=2,g.T=null;try{for(var i=e.onRecoverableError,c=0;c<a.length;c++){var r=a[c];i(r.value,{componentStack:r.stack})}}finally{g.T=t,B.p=n}}(Oa&3)!==0&&Fn(),Ht(e),n=e.pendingLanes,(l&4194090)!==0&&(n&42)!==0?e===su?zs++:(zs=0,su=e):zs=0,Os(0)}}function sf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,ds(t)))}function Fn(e){return tf(),lf(),af(),nf()}function nf(){if(Pe!==5)return!1;var e=Sl,t=lu;lu=0;var l=Di(Oa),a=g.T,n=B.p;try{B.p=32>l?32:l,g.T=null,l=au,au=null;var i=Sl,c=Oa;if(Pe=0,za=Sl=null,Oa=0,(Te&6)!==0)throw Error(o(331));var r=Te;if(Te|=4,Ld(i.current),kd(i,i.current,c,l),Te=r,Os(0,!1),tt&&typeof tt.onPostCommitFiberRoot=="function")try{tt.onPostCommitFiberRoot(nl,i)}catch{}return!0}finally{B.p=n,g.T=a,sf(e,t)}}function cf(e,t,l){t=Nt(l,t),t=_c(e.stateNode,t,2),e=ml(e,t,2),e!==null&&(st(e,2),Ht(e))}function ze(e,t,l){if(e.tag===3)cf(e,e,l);else for(;t!==null;){if(t.tag===3){cf(t,e,l);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Nl===null||!Nl.has(a))){e=Nt(l,e),l=od(2),a=ml(t,l,2),a!==null&&(dd(l,a,t,e),st(a,2),Ht(a));break}}t=t.return}}function uu(e,t,l){var a=e.pingCache;if(a===null){a=e.pingCache=new Rh;var n=new Set;a.set(t,n)}else n=a.get(t),n===void 0&&(n=new Set,a.set(t,n));n.has(l)||(Ic=!0,n.add(l),e=Lh.bind(null,e,t,l),t.then(e,e))}function Lh(e,t,l){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,Oe===e&&(Ne&l)===l&&(He===4||He===3&&(Ne&62914560)===Ne&&300>dt()-tu?(Te&2)===0&&Ua(e,0):Pc|=l,Ma===Ne&&(Ma=0)),Ht(e)}function uf(e,t){t===0&&(t=an()),e=xa(e,t),e!==null&&(st(e,t),Ht(e))}function Gh(e){var t=e.memoizedState,l=0;t!==null&&(l=t.retryLane),uf(e,l)}function Qh(e,t){var l=0;switch(e.tag){case 13:var a=e.stateNode,n=e.memoizedState;n!==null&&(l=n.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(o(314))}a!==null&&a.delete(t),uf(e,l)}function Zh(e,t){return Fl(e,t)}var Wn=null,Ba=null,ru=!1,In=!1,ou=!1,$l=0;function Ht(e){e!==Ba&&e.next===null&&(Ba===null?Wn=Ba=e:Ba=Ba.next=e),In=!0,ru||(ru=!0,Kh())}function Os(e,t){if(!ou&&In){ou=!0;do for(var l=!1,a=Wn;a!==null;){if(e!==0){var n=a.pendingLanes;if(n===0)var i=0;else{var c=a.suspendedLanes,r=a.pingedLanes;i=(1<<31-le(42|e)+1)-1,i&=n&~(c&~r),i=i&201326741?i&201326741|1:i?i|2:0}i!==0&&(l=!0,ff(a,i))}else i=Ne,i=Pl(a,a===Oe?i:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(i&3)===0||cl(a,i)||(l=!0,ff(a,i));a=a.next}while(l);ou=!1}}function Vh(){rf()}function rf(){In=ru=!1;var e=0;$l!==0&&(t0()&&(e=$l),$l=0);for(var t=dt(),l=null,a=Wn;a!==null;){var n=a.next,i=of(a,t);i===0?(a.next=null,l===null?Wn=n:l.next=n,n===null&&(Ba=l)):(l=a,(e!==0||(i&3)!==0)&&(In=!0)),a=n}Os(e)}function of(e,t){for(var l=e.suspendedLanes,a=e.pingedLanes,n=e.expirationTimes,i=e.pendingLanes&-62914561;0<i;){var c=31-le(i),r=1<<c,f=n[c];f===-1?((r&l)===0||(r&a)!==0)&&(n[c]=Ja(r,t)):f<=t&&(e.expiredLanes|=r),i&=~r}if(t=Oe,l=Ne,l=Pl(e,e===t?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,l===0||e===t&&(Ae===2||Ae===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&Va(a),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||cl(e,l)){if(t=l&-l,t===e.callbackPriority)return t;switch(a!==null&&Va(a),Di(l)){case 2:case 8:l=en;break;case 32:l=Wl;break;case 268435456:l=Ka;break;default:l=Wl}return a=df.bind(null,e),l=Fl(l,a),e.callbackPriority=t,e.callbackNode=l,t}return a!==null&&a!==null&&Va(a),e.callbackPriority=2,e.callbackNode=null,2}function df(e,t){if(Pe!==0&&Pe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(Fn()&&e.callbackNode!==l)return null;var a=Ne;return a=Pl(e,e===Oe?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Vd(e,a,t),of(e,dt()),e.callbackNode!=null&&e.callbackNode===l?df.bind(null,e):null)}function ff(e,t){if(Fn())return null;Vd(e,t,!0)}function Kh(){a0(function(){(Te&6)!==0?Fl(Ps,Vh):rf()})}function du(){return $l===0&&($l=ea()),$l}function mf(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:rn(""+e)}function hf(e,t){var l=t.ownerDocument.createElement("input");return l.name=t.name,l.value=t.value,e.id&&l.setAttribute("form",e.id),t.parentNode.insertBefore(l,t),e=new FormData(e),l.parentNode.removeChild(l),e}function Jh(e,t,l,a,n){if(t==="submit"&&l&&l.stateNode===n){var i=mf((n[it]||null).action),c=a.submitter;c&&(t=(t=c[it]||null)?mf(t.formAction):c.getAttribute("formAction"),t!==null&&(i=t,c=null));var r=new mn("action","action",null,a,n);e.push({event:r,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if($l!==0){var f=c?hf(n,c):new FormData(n);zc(l,{pending:!0,data:f,method:n.method,action:i},null,f)}}else typeof i=="function"&&(r.preventDefault(),f=c?hf(n,c):new FormData(n),zc(l,{pending:!0,data:f,method:n.method,action:i},i,f))},currentTarget:n}]})}}for(var fu=0;fu<Fi.length;fu++){var mu=Fi[fu],$h=mu.toLowerCase(),Fh=mu[0].toUpperCase()+mu.slice(1);zt($h,"on"+Fh)}zt(Zr,"onAnimationEnd"),zt(Vr,"onAnimationIteration"),zt(Kr,"onAnimationStart"),zt("dblclick","onDoubleClick"),zt("focusin","onFocus"),zt("focusout","onBlur"),zt(mh,"onTransitionRun"),zt(hh,"onTransitionStart"),zt(xh,"onTransitionCancel"),zt(Jr,"onTransitionEnd"),na("onMouseEnter",["mouseout","mouseover"]),na("onMouseLeave",["mouseout","mouseover"]),na("onPointerEnter",["pointerout","pointerover"]),na("onPointerLeave",["pointerout","pointerover"]),Ul("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ul("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ul("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ul("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ul("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ul("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wh=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Us));function xf(e,t){t=(t&4)!==0;for(var l=0;l<e.length;l++){var a=e[l],n=a.event;a=a.listeners;e:{var i=void 0;if(t)for(var c=a.length-1;0<=c;c--){var r=a[c],f=r.instance,v=r.currentTarget;if(r=r.listener,f!==i&&n.isPropagationStopped())break e;i=r,n.currentTarget=v;try{i(n)}catch(M){kn(M)}n.currentTarget=null,i=f}else for(c=0;c<a.length;c++){if(r=a[c],f=r.instance,v=r.currentTarget,r=r.listener,f!==i&&n.isPropagationStopped())break e;i=r,n.currentTarget=v;try{i(n)}catch(M){kn(M)}n.currentTarget=null,i=f}}}}function ge(e,t){var l=t[Ti];l===void 0&&(l=t[Ti]=new Set);var a=e+"__bubble";l.has(a)||(gf(t,e,2,!1),l.add(a))}function hu(e,t,l){var a=0;t&&(a|=4),gf(l,e,a,t)}var Pn="_reactListening"+Math.random().toString(36).slice(2);function xu(e){if(!e[Pn]){e[Pn]=!0,cr.forEach(function(l){l!=="selectionchange"&&(Wh.has(l)||hu(l,!1,e),hu(l,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Pn]||(t[Pn]=!0,hu("selectionchange",!1,t))}}function gf(e,t,l,a){switch(Yf(t)){case 2:var n=w0;break;case 8:n=D0;break;default:n=Eu}l=n.bind(null,t,l,e),n=void 0,!Ri||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),a?n!==void 0?e.addEventListener(t,l,{capture:!0,passive:n}):e.addEventListener(t,l,!0):n!==void 0?e.addEventListener(t,l,{passive:n}):e.addEventListener(t,l,!1)}function gu(e,t,l,a,n){var i=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var c=a.tag;if(c===3||c===4){var r=a.stateNode.containerInfo;if(r===n)break;if(c===4)for(c=a.return;c!==null;){var f=c.tag;if((f===3||f===4)&&c.stateNode.containerInfo===n)return;c=c.return}for(;r!==null;){if(c=la(r),c===null)return;if(f=c.tag,f===5||f===6||f===26||f===27){a=i=c;continue e}r=r.parentNode}}a=a.return}jr(function(){var v=i,M=Bi(l),U=[];e:{var j=$r.get(e);if(j!==void 0){var w=mn,ie=e;switch(e){case"keypress":if(dn(l)===0)break e;case"keydown":case"keyup":w=Zm;break;case"focusin":ie="focus",w=Xi;break;case"focusout":ie="blur",w=Xi;break;case"beforeblur":case"afterblur":w=Xi;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=wr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=Um;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=Jm;break;case Zr:case Vr:case Kr:w=_m;break;case Jr:w=Fm;break;case"scroll":case"scrollend":w=zm;break;case"wheel":w=Im;break;case"copy":case"cut":case"paste":w=Hm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Tr;break;case"toggle":case"beforetoggle":w=eh}var ae=(t&4)!==0,Me=!ae&&(e==="scroll"||e==="scrollend"),b=ae?j!==null?j+"Capture":null:j;ae=[];for(var x=v,y;x!==null;){var z=x;if(y=z.stateNode,z=z.tag,z!==5&&z!==26&&z!==27||y===null||b===null||(z=Ia(x,b),z!=null&&ae.push(qs(x,z,y))),Me)break;x=x.return}0<ae.length&&(j=new w(j,ie,null,l,M),U.push({event:j,listeners:ae}))}}if((t&7)===0){e:{if(j=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",j&&l!==qi&&(ie=l.relatedTarget||l.fromElement)&&(la(ie)||ie[ta]))break e;if((w||j)&&(j=M.window===M?M:(j=M.ownerDocument)?j.defaultView||j.parentWindow:window,w?(ie=l.relatedTarget||l.toElement,w=v,ie=ie?la(ie):null,ie!==null&&(Me=D(ie),ae=ie.tag,ie!==Me||ae!==5&&ae!==27&&ae!==6)&&(ie=null)):(w=null,ie=v),w!==ie)){if(ae=wr,z="onMouseLeave",b="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(ae=Tr,z="onPointerLeave",b="onPointerEnter",x="pointer"),Me=w==null?j:Wa(w),y=ie==null?j:Wa(ie),j=new ae(z,x+"leave",w,l,M),j.target=Me,j.relatedTarget=y,z=null,la(M)===v&&(ae=new ae(b,x+"enter",ie,l,M),ae.target=y,ae.relatedTarget=Me,z=ae),Me=z,w&&ie)t:{for(ae=w,b=ie,x=0,y=ae;y;y=_a(y))x++;for(y=0,z=b;z;z=_a(z))y++;for(;0<x-y;)ae=_a(ae),x--;for(;0<y-x;)b=_a(b),y--;for(;x--;){if(ae===b||b!==null&&ae===b.alternate)break t;ae=_a(ae),b=_a(b)}ae=null}else ae=null;w!==null&&bf(U,j,w,ae,!1),ie!==null&&Me!==null&&bf(U,Me,ie,ae,!0)}}e:{if(j=v?Wa(v):window,w=j.nodeName&&j.nodeName.toLowerCase(),w==="select"||w==="input"&&j.type==="file")var F=qr;else if(Or(j))if(Br)F=oh;else{F=uh;var me=ch}else w=j.nodeName,!w||w.toLowerCase()!=="input"||j.type!=="checkbox"&&j.type!=="radio"?v&&Ui(v.elementType)&&(F=qr):F=rh;if(F&&(F=F(e,v))){Ur(U,F,l,M);break e}me&&me(e,j,v),e==="focusout"&&v&&j.type==="number"&&v.memoizedProps.value!=null&&Oi(j,"number",j.value)}switch(me=v?Wa(v):window,e){case"focusin":(Or(me)||me.contentEditable==="true")&&(fa=me,Ki=v,is=null);break;case"focusout":is=Ki=fa=null;break;case"mousedown":Ji=!0;break;case"contextmenu":case"mouseup":case"dragend":Ji=!1,Gr(U,l,M);break;case"selectionchange":if(fh)break;case"keydown":case"keyup":Gr(U,l,M)}var I;if(Gi)e:{switch(e){case"compositionstart":var se="onCompositionStart";break e;case"compositionend":se="onCompositionEnd";break e;case"compositionupdate":se="onCompositionUpdate";break e}se=void 0}else da?Mr(e,l)&&(se="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(se="onCompositionStart");se&&(Ar&&l.locale!=="ko"&&(da||se!=="onCompositionStart"?se==="onCompositionEnd"&&da&&(I=Nr()):(rl=M,Hi="value"in rl?rl.value:rl.textContent,da=!0)),me=ei(v,se),0<me.length&&(se=new Dr(se,e,null,l,M),U.push({event:se,listeners:me}),I?se.data=I:(I=zr(l),I!==null&&(se.data=I)))),(I=lh?ah(e,l):sh(e,l))&&(se=ei(v,"onBeforeInput"),0<se.length&&(me=new Dr("onBeforeInput","beforeinput",null,l,M),U.push({event:me,listeners:se}),me.data=I)),Jh(U,e,v,l,M)}xf(U,t)})}function qs(e,t,l){return{instance:e,listener:t,currentTarget:l}}function ei(e,t){for(var l=t+"Capture",a=[];e!==null;){var n=e,i=n.stateNode;if(n=n.tag,n!==5&&n!==26&&n!==27||i===null||(n=Ia(e,l),n!=null&&a.unshift(qs(e,n,i)),n=Ia(e,t),n!=null&&a.push(qs(e,n,i))),e.tag===3)return a;e=e.return}return[]}function _a(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function bf(e,t,l,a,n){for(var i=t._reactName,c=[];l!==null&&l!==a;){var r=l,f=r.alternate,v=r.stateNode;if(r=r.tag,f!==null&&f===a)break;r!==5&&r!==26&&r!==27||v===null||(f=v,n?(v=Ia(l,i),v!=null&&c.unshift(qs(l,v,f))):n||(v=Ia(l,i),v!=null&&c.push(qs(l,v,f)))),l=l.return}c.length!==0&&e.push({event:t,listeners:c})}var Ih=/\r\n?/g,Ph=/\u0000|\uFFFD/g;function pf(e){return(typeof e=="string"?e:""+e).replace(Ih,`
`).replace(Ph,"")}function yf(e,t){return t=pf(t),pf(e)===t}function ti(){}function Ee(e,t,l,a,n,i){switch(l){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||ua(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&ua(e,""+a);break;case"className":nn(e,"class",a);break;case"tabIndex":nn(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":nn(e,l,a);break;case"style":yr(e,a,i);break;case"data":if(t!=="object"){nn(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||l!=="href")){e.removeAttribute(l);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(l);break}a=rn(""+a),e.setAttribute(l,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof i=="function"&&(l==="formAction"?(t!=="input"&&Ee(e,t,"name",n.name,n,null),Ee(e,t,"formEncType",n.formEncType,n,null),Ee(e,t,"formMethod",n.formMethod,n,null),Ee(e,t,"formTarget",n.formTarget,n,null)):(Ee(e,t,"encType",n.encType,n,null),Ee(e,t,"method",n.method,n,null),Ee(e,t,"target",n.target,n,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(l);break}a=rn(""+a),e.setAttribute(l,a);break;case"onClick":a!=null&&(e.onclick=ti);break;case"onScroll":a!=null&&ge("scroll",e);break;case"onScrollEnd":a!=null&&ge("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(o(61));if(l=a.__html,l!=null){if(n.children!=null)throw Error(o(60));e.innerHTML=l}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}l=rn(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,""+a):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":a===!0?e.setAttribute(l,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(l,a):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(l,a):e.removeAttribute(l);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(l):e.setAttribute(l,a);break;case"popover":ge("beforetoggle",e),ge("toggle",e),sn(e,"popover",a);break;case"xlinkActuate":Lt(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Lt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Lt(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Lt(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Lt(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Lt(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Lt(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Lt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Lt(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":sn(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=Em.get(l)||l,sn(e,l,a))}}function bu(e,t,l,a,n,i){switch(l){case"style":yr(e,a,i);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(o(61));if(l=a.__html,l!=null){if(n.children!=null)throw Error(o(60));e.innerHTML=l}}break;case"children":typeof a=="string"?ua(e,a):(typeof a=="number"||typeof a=="bigint")&&ua(e,""+a);break;case"onScroll":a!=null&&ge("scroll",e);break;case"onScrollEnd":a!=null&&ge("scrollend",e);break;case"onClick":a!=null&&(e.onclick=ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ur.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(n=l.endsWith("Capture"),t=l.slice(2,n?l.length-7:void 0),i=e[it]||null,i=i!=null?i[l]:null,typeof i=="function"&&e.removeEventListener(t,i,n),typeof a=="function")){typeof i!="function"&&i!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(t,a,n);break e}l in e?e[l]=a:a===!0?e.setAttribute(l,""):sn(e,l,a)}}}function et(e,t,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ge("error",e),ge("load",e);var a=!1,n=!1,i;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];if(c!=null)switch(i){case"src":a=!0;break;case"srcSet":n=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ee(e,t,i,c,l,null)}}n&&Ee(e,t,"srcSet",l.srcSet,l,null),a&&Ee(e,t,"src",l.src,l,null);return;case"input":ge("invalid",e);var r=i=c=n=null,f=null,v=null;for(a in l)if(l.hasOwnProperty(a)){var M=l[a];if(M!=null)switch(a){case"name":n=M;break;case"type":c=M;break;case"checked":f=M;break;case"defaultChecked":v=M;break;case"value":i=M;break;case"defaultValue":r=M;break;case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(o(137,t));break;default:Ee(e,t,a,M,l,null)}}xr(e,i,r,f,v,c,n,!1),cn(e);return;case"select":ge("invalid",e),a=c=i=null;for(n in l)if(l.hasOwnProperty(n)&&(r=l[n],r!=null))switch(n){case"value":i=r;break;case"defaultValue":c=r;break;case"multiple":a=r;default:Ee(e,t,n,r,l,null)}t=i,l=c,e.multiple=!!a,t!=null?ca(e,!!a,t,!1):l!=null&&ca(e,!!a,l,!0);return;case"textarea":ge("invalid",e),i=n=a=null;for(c in l)if(l.hasOwnProperty(c)&&(r=l[c],r!=null))switch(c){case"value":a=r;break;case"defaultValue":n=r;break;case"children":i=r;break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(o(91));break;default:Ee(e,t,c,r,l,null)}br(e,a,n,i),cn(e);return;case"option":for(f in l)if(l.hasOwnProperty(f)&&(a=l[f],a!=null))switch(f){case"selected":e.selected=a&&typeof a!="function"&&typeof a!="symbol";break;default:Ee(e,t,f,a,l,null)}return;case"dialog":ge("beforetoggle",e),ge("toggle",e),ge("cancel",e),ge("close",e);break;case"iframe":case"object":ge("load",e);break;case"video":case"audio":for(a=0;a<Us.length;a++)ge(Us[a],e);break;case"image":ge("error",e),ge("load",e);break;case"details":ge("toggle",e);break;case"embed":case"source":case"link":ge("error",e),ge("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(v in l)if(l.hasOwnProperty(v)&&(a=l[v],a!=null))switch(v){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ee(e,t,v,a,l,null)}return;default:if(Ui(t)){for(M in l)l.hasOwnProperty(M)&&(a=l[M],a!==void 0&&bu(e,t,M,a,l,void 0));return}}for(r in l)l.hasOwnProperty(r)&&(a=l[r],a!=null&&Ee(e,t,r,a,l,null))}function e0(e,t,l,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,i=null,c=null,r=null,f=null,v=null,M=null;for(w in l){var U=l[w];if(l.hasOwnProperty(w)&&U!=null)switch(w){case"checked":break;case"value":break;case"defaultValue":f=U;default:a.hasOwnProperty(w)||Ee(e,t,w,null,a,U)}}for(var j in a){var w=a[j];if(U=l[j],a.hasOwnProperty(j)&&(w!=null||U!=null))switch(j){case"type":i=w;break;case"name":n=w;break;case"checked":v=w;break;case"defaultChecked":M=w;break;case"value":c=w;break;case"defaultValue":r=w;break;case"children":case"dangerouslySetInnerHTML":if(w!=null)throw Error(o(137,t));break;default:w!==U&&Ee(e,t,j,w,a,U)}}zi(e,c,r,f,v,M,i,n);return;case"select":w=c=r=j=null;for(i in l)if(f=l[i],l.hasOwnProperty(i)&&f!=null)switch(i){case"value":break;case"multiple":w=f;default:a.hasOwnProperty(i)||Ee(e,t,i,null,a,f)}for(n in a)if(i=a[n],f=l[n],a.hasOwnProperty(n)&&(i!=null||f!=null))switch(n){case"value":j=i;break;case"defaultValue":r=i;break;case"multiple":c=i;default:i!==f&&Ee(e,t,n,i,a,f)}t=r,l=c,a=w,j!=null?ca(e,!!l,j,!1):!!a!=!!l&&(t!=null?ca(e,!!l,t,!0):ca(e,!!l,l?[]:"",!1));return;case"textarea":w=j=null;for(r in l)if(n=l[r],l.hasOwnProperty(r)&&n!=null&&!a.hasOwnProperty(r))switch(r){case"value":break;case"children":break;default:Ee(e,t,r,null,a,n)}for(c in a)if(n=a[c],i=l[c],a.hasOwnProperty(c)&&(n!=null||i!=null))switch(c){case"value":j=n;break;case"defaultValue":w=n;break;case"children":break;case"dangerouslySetInnerHTML":if(n!=null)throw Error(o(91));break;default:n!==i&&Ee(e,t,c,n,a,i)}gr(e,j,w);return;case"option":for(var ie in l)if(j=l[ie],l.hasOwnProperty(ie)&&j!=null&&!a.hasOwnProperty(ie))switch(ie){case"selected":e.selected=!1;break;default:Ee(e,t,ie,null,a,j)}for(f in a)if(j=a[f],w=l[f],a.hasOwnProperty(f)&&j!==w&&(j!=null||w!=null))switch(f){case"selected":e.selected=j&&typeof j!="function"&&typeof j!="symbol";break;default:Ee(e,t,f,j,a,w)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ae in l)j=l[ae],l.hasOwnProperty(ae)&&j!=null&&!a.hasOwnProperty(ae)&&Ee(e,t,ae,null,a,j);for(v in a)if(j=a[v],w=l[v],a.hasOwnProperty(v)&&j!==w&&(j!=null||w!=null))switch(v){case"children":case"dangerouslySetInnerHTML":if(j!=null)throw Error(o(137,t));break;default:Ee(e,t,v,j,a,w)}return;default:if(Ui(t)){for(var Me in l)j=l[Me],l.hasOwnProperty(Me)&&j!==void 0&&!a.hasOwnProperty(Me)&&bu(e,t,Me,void 0,a,j);for(M in a)j=a[M],w=l[M],!a.hasOwnProperty(M)||j===w||j===void 0&&w===void 0||bu(e,t,M,j,a,w);return}}for(var b in l)j=l[b],l.hasOwnProperty(b)&&j!=null&&!a.hasOwnProperty(b)&&Ee(e,t,b,null,a,j);for(U in a)j=a[U],w=l[U],!a.hasOwnProperty(U)||j===w||j==null&&w==null||Ee(e,t,U,j,a,w)}var pu=null,yu=null;function li(e){return e.nodeType===9?e:e.ownerDocument}function vf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function vu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ju=null;function t0(){var e=window.event;return e&&e.type==="popstate"?e===ju?!1:(ju=e,!0):(ju=null,!1)}var Nf=typeof setTimeout=="function"?setTimeout:void 0,l0=typeof clearTimeout=="function"?clearTimeout:void 0,Sf=typeof Promise=="function"?Promise:void 0,a0=typeof queueMicrotask=="function"?queueMicrotask:typeof Sf<"u"?function(e){return Sf.resolve(null).then(e).catch(s0)}:Nf;function s0(e){setTimeout(function(){throw e})}function Dl(e){return e==="head"}function wf(e,t){var l=t,a=0,n=0;do{var i=l.nextSibling;if(e.removeChild(l),i&&i.nodeType===8)if(l=i.data,l==="/$"){if(0<a&&8>a){l=a;var c=e.ownerDocument;if(l&1&&Bs(c.documentElement),l&2&&Bs(c.body),l&4)for(l=c.head,Bs(l),c=l.firstChild;c;){var r=c.nextSibling,f=c.nodeName;c[Fa]||f==="SCRIPT"||f==="STYLE"||f==="LINK"&&c.rel.toLowerCase()==="stylesheet"||l.removeChild(c),c=r}}if(n===0){e.removeChild(i),Gs(t);return}n--}else l==="$"||l==="$?"||l==="$!"?n++:a=l.charCodeAt(0)-48;else a=0;l=i}while(l);Gs(t)}function Nu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var l=t;switch(t=t.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Nu(l),Ai(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function n0(e,t,l,a){for(;e.nodeType===1;){var n=l;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Fa])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(i=e.getAttribute("rel"),i==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(i!==n.rel||e.getAttribute("href")!==(n.href==null||n.href===""?null:n.href)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin)||e.getAttribute("title")!==(n.title==null?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(i=e.getAttribute("src"),(i!==(n.src==null?null:n.src)||e.getAttribute("type")!==(n.type==null?null:n.type)||e.getAttribute("crossorigin")!==(n.crossOrigin==null?null:n.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var i=n.name==null?null:""+n.name;if(n.type==="hidden"&&e.getAttribute("name")===i)return e}else return e;if(e=Ut(e.nextSibling),e===null)break}return null}function i0(e,t,l){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=Ut(e.nextSibling),e===null))return null;return e}function Su(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function c0(e,t){var l=e.ownerDocument;if(e.data!=="$?"||l.readyState==="complete")t();else{var a=function(){t(),l.removeEventListener("DOMContentLoaded",a)};l.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function Ut(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var wu=null;function Df(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"){if(t===0)return e;t--}else l==="/$"&&t++}e=e.previousSibling}return null}function Tf(e,t,l){switch(t=li(l),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function Bs(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ai(e)}var Ct=new Map,Af=new Set;function ai(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var ll=B.d;B.d={f:u0,r:r0,D:o0,C:d0,L:f0,m:m0,X:x0,S:h0,M:g0};function u0(){var e=ll.f(),t=Jn();return e||t}function r0(e){var t=aa(e);t!==null&&t.tag===5&&t.type==="form"?Vo(t):ll.r(e)}var Ra=typeof document>"u"?null:document;function Cf(e,t,l){var a=Ra;if(a&&typeof t=="string"&&t){var n=jt(t);n='link[rel="'+e+'"][href="'+n+'"]',typeof l=="string"&&(n+='[crossorigin="'+l+'"]'),Af.has(n)||(Af.add(n),e={rel:e,crossOrigin:l,href:t},a.querySelector(n)===null&&(t=a.createElement("link"),et(t,"link",e),Ke(t),a.head.appendChild(t)))}}function o0(e){ll.D(e),Cf("dns-prefetch",e,null)}function d0(e,t){ll.C(e,t),Cf("preconnect",e,t)}function f0(e,t,l){ll.L(e,t,l);var a=Ra;if(a&&e&&t){var n='link[rel="preload"][as="'+jt(t)+'"]';t==="image"&&l&&l.imageSrcSet?(n+='[imagesrcset="'+jt(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(n+='[imagesizes="'+jt(l.imageSizes)+'"]')):n+='[href="'+jt(e)+'"]';var i=n;switch(t){case"style":i=Ha(e);break;case"script":i=ka(e)}Ct.has(i)||(e=E({rel:"preload",href:t==="image"&&l&&l.imageSrcSet?void 0:e,as:t},l),Ct.set(i,e),a.querySelector(n)!==null||t==="style"&&a.querySelector(_s(i))||t==="script"&&a.querySelector(Rs(i))||(t=a.createElement("link"),et(t,"link",e),Ke(t),a.head.appendChild(t)))}}function m0(e,t){ll.m(e,t);var l=Ra;if(l&&e){var a=t&&typeof t.as=="string"?t.as:"script",n='link[rel="modulepreload"][as="'+jt(a)+'"][href="'+jt(e)+'"]',i=n;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=ka(e)}if(!Ct.has(i)&&(e=E({rel:"modulepreload",href:e},t),Ct.set(i,e),l.querySelector(n)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Rs(i)))return}a=l.createElement("link"),et(a,"link",e),Ke(a),l.head.appendChild(a)}}}function h0(e,t,l){ll.S(e,t,l);var a=Ra;if(a&&e){var n=sa(a).hoistableStyles,i=Ha(e);t=t||"default";var c=n.get(i);if(!c){var r={loading:0,preload:null};if(c=a.querySelector(_s(i)))r.loading=5;else{e=E({rel:"stylesheet",href:e,"data-precedence":t},l),(l=Ct.get(i))&&Du(e,l);var f=c=a.createElement("link");Ke(f),et(f,"link",e),f._p=new Promise(function(v,M){f.onload=v,f.onerror=M}),f.addEventListener("load",function(){r.loading|=1}),f.addEventListener("error",function(){r.loading|=2}),r.loading|=4,si(c,t,a)}c={type:"stylesheet",instance:c,count:1,state:r},n.set(i,c)}}}function x0(e,t){ll.X(e,t);var l=Ra;if(l&&e){var a=sa(l).hoistableScripts,n=ka(e),i=a.get(n);i||(i=l.querySelector(Rs(n)),i||(e=E({src:e,async:!0},t),(t=Ct.get(n))&&Tu(e,t),i=l.createElement("script"),Ke(i),et(i,"link",e),l.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},a.set(n,i))}}function g0(e,t){ll.M(e,t);var l=Ra;if(l&&e){var a=sa(l).hoistableScripts,n=ka(e),i=a.get(n);i||(i=l.querySelector(Rs(n)),i||(e=E({src:e,async:!0,type:"module"},t),(t=Ct.get(n))&&Tu(e,t),i=l.createElement("script"),Ke(i),et(i,"link",e),l.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},a.set(n,i))}}function Ef(e,t,l,a){var n=(n=q.current)?ai(n):null;if(!n)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(t=Ha(l.href),l=sa(n).hoistableStyles,a=l.get(t),a||(a={type:"style",instance:null,count:0,state:null},l.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=Ha(l.href);var i=sa(n).hoistableStyles,c=i.get(e);if(c||(n=n.ownerDocument||n,c={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},i.set(e,c),(i=n.querySelector(_s(e)))&&!i._p&&(c.instance=i,c.state.loading=5),Ct.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Ct.set(e,l),i||b0(n,e,l,c.state))),t&&a===null)throw Error(o(528,""));return c}if(t&&a!==null)throw Error(o(529,""));return null;case"script":return t=l.async,l=l.src,typeof l=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ka(l),l=sa(n).hoistableScripts,a=l.get(t),a||(a={type:"script",instance:null,count:0,state:null},l.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Ha(e){return'href="'+jt(e)+'"'}function _s(e){return'link[rel="stylesheet"]['+e+"]"}function Mf(e){return E({},e,{"data-precedence":e.precedence,precedence:null})}function b0(e,t,l,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),et(t,"link",l),Ke(t),e.head.appendChild(t))}function ka(e){return'[src="'+jt(e)+'"]'}function Rs(e){return"script[async]"+e}function zf(e,t,l){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+jt(l.href)+'"]');if(a)return t.instance=a,Ke(a),a;var n=E({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),Ke(a),et(a,"style",n),si(a,l.precedence,e),t.instance=a;case"stylesheet":n=Ha(l.href);var i=e.querySelector(_s(n));if(i)return t.state.loading|=4,t.instance=i,Ke(i),i;a=Mf(l),(n=Ct.get(n))&&Du(a,n),i=(e.ownerDocument||e).createElement("link"),Ke(i);var c=i;return c._p=new Promise(function(r,f){c.onload=r,c.onerror=f}),et(i,"link",a),t.state.loading|=4,si(i,l.precedence,e),t.instance=i;case"script":return i=ka(l.src),(n=e.querySelector(Rs(i)))?(t.instance=n,Ke(n),n):(a=l,(n=Ct.get(i))&&(a=E({},l),Tu(a,n)),e=e.ownerDocument||e,n=e.createElement("script"),Ke(n),et(n,"link",a),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,si(a,l.precedence,e));return t.instance}function si(e,t,l){for(var a=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=a.length?a[a.length-1]:null,i=n,c=0;c<a.length;c++){var r=a[c];if(r.dataset.precedence===t)i=r;else if(i!==n)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=l.nodeType===9?l.head:l,t.insertBefore(e,t.firstChild))}function Du(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Tu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ni=null;function Of(e,t,l){if(ni===null){var a=new Map,n=ni=new Map;n.set(l,a)}else n=ni,a=n.get(l),a||(a=new Map,n.set(l,a));if(a.has(e))return a;for(a.set(e,null),l=l.getElementsByTagName(e),n=0;n<l.length;n++){var i=l[n];if(!(i[Fa]||i[lt]||e==="link"&&i.getAttribute("rel")==="stylesheet")&&i.namespaceURI!=="http://www.w3.org/2000/svg"){var c=i.getAttribute(t)||"";c=e+c;var r=a.get(c);r?r.push(i):a.set(c,[i])}}return a}function Uf(e,t,l){e=e.ownerDocument||e,e.head.insertBefore(l,t==="title"?e.querySelector("head > title"):null)}function p0(e,t,l){if(l===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function qf(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Hs=null;function y0(){}function v0(e,t,l){if(Hs===null)throw Error(o(475));var a=Hs;if(t.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(t.state.loading&4)===0){if(t.instance===null){var n=Ha(l.href),i=e.querySelector(_s(n));if(i){e=i._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(a.count++,a=ii.bind(a),e.then(a,a)),t.state.loading|=4,t.instance=i,Ke(i);return}i=e.ownerDocument||e,l=Mf(l),(n=Ct.get(n))&&Du(l,n),i=i.createElement("link"),Ke(i);var c=i;c._p=new Promise(function(r,f){c.onload=r,c.onerror=f}),et(i,"link",l),t.instance=i}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(t,e),(e=t.state.preload)&&(t.state.loading&3)===0&&(a.count++,t=ii.bind(a),e.addEventListener("load",t),e.addEventListener("error",t))}}function j0(){if(Hs===null)throw Error(o(475));var e=Hs;return e.stylesheets&&e.count===0&&Au(e,e.stylesheets),0<e.count?function(t){var l=setTimeout(function(){if(e.stylesheets&&Au(e,e.stylesheets),e.unsuspend){var a=e.unsuspend;e.unsuspend=null,a()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(l)}}:null}function ii(){if(this.count--,this.count===0){if(this.stylesheets)Au(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var ci=null;function Au(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,ci=new Map,t.forEach(N0,e),ci=null,ii.call(e))}function N0(e,t){if(!(t.state.loading&4)){var l=ci.get(e);if(l)var a=l.get(null);else{l=new Map,ci.set(e,l);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<n.length;i++){var c=n[i];(c.nodeName==="LINK"||c.getAttribute("media")!=="not all")&&(l.set(c.dataset.precedence,c),a=c)}a&&l.set(null,a)}n=t.instance,c=n.getAttribute("data-precedence"),i=l.get(c)||a,i===a&&l.set(null,n),l.set(c,n),this.count++,a=ii.bind(this),n.addEventListener("load",a),n.addEventListener("error",a),i?i.parentNode.insertBefore(n,i.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(n,e.firstChild)),t.state.loading|=4}}var ks={$$typeof:J,Provider:null,Consumer:null,_currentValue:V,_currentValue2:V,_threadCount:0};function S0(e,t,l,a,n,i,c,r){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=$a(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$a(0),this.hiddenUpdates=$a(null),this.identifierPrefix=a,this.onUncaughtError=n,this.onCaughtError=i,this.onRecoverableError=c,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=r,this.incompleteTransitions=new Map}function Bf(e,t,l,a,n,i,c,r,f,v,M,U){return e=new S0(e,t,l,c,r,f,v,U),t=1,i===!0&&(t|=24),i=mt(3,null,null,t),e.current=i,i.stateNode=e,t=uc(),t.refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:a,isDehydrated:l,cache:t},fc(i),e}function _f(e){return e?(e=ga,e):ga}function Rf(e,t,l,a,n,i){n=_f(n),a.context===null?a.context=n:a.pendingContext=n,a=fl(t),a.payload={element:l},i=i===void 0?null:i,i!==null&&(a.callback=i),l=ml(e,a,t),l!==null&&(pt(l,e,t),xs(l,e,t))}function Hf(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<t?l:t}}function Cu(e,t){Hf(e,t),(e=e.alternate)&&Hf(e,t)}function kf(e){if(e.tag===13){var t=xa(e,67108864);t!==null&&pt(t,e,67108864),Cu(e,67108864)}}var ui=!0;function w0(e,t,l,a){var n=g.T;g.T=null;var i=B.p;try{B.p=2,Eu(e,t,l,a)}finally{B.p=i,g.T=n}}function D0(e,t,l,a){var n=g.T;g.T=null;var i=B.p;try{B.p=8,Eu(e,t,l,a)}finally{B.p=i,g.T=n}}function Eu(e,t,l,a){if(ui){var n=Mu(a);if(n===null)gu(e,t,a,ri,l),Xf(e,a);else if(A0(n,e,t,l,a))a.stopPropagation();else if(Xf(e,a),t&4&&-1<T0.indexOf(e)){for(;n!==null;){var i=aa(n);if(i!==null)switch(i.tag){case 3:if(i=i.stateNode,i.current.memoizedState.isDehydrated){var c=Yt(i.pendingLanes);if(c!==0){var r=i;for(r.pendingLanes|=2,r.entangledLanes|=2;c;){var f=1<<31-le(c);r.entanglements[1]|=f,c&=~f}Ht(i),(Te&6)===0&&(Vn=dt()+500,Os(0))}}break;case 13:r=xa(i,2),r!==null&&pt(r,i,2),Jn(),Cu(i,2)}if(i=Mu(a),i===null&&gu(e,t,a,ri,l),i===n)break;n=i}n!==null&&a.stopPropagation()}else gu(e,t,a,null,l)}}function Mu(e){return e=Bi(e),zu(e)}var ri=null;function zu(e){if(ri=null,e=la(e),e!==null){var t=D(e);if(t===null)e=null;else{var l=t.tag;if(l===13){if(e=N(t),e!==null)return e;e=null}else if(l===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ri=e,null}function Yf(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ni()){case Ps:return 2;case en:return 8;case Wl:case Si:return 32;case Ka:return 268435456;default:return 32}default:return 32}}var Ou=!1,Tl=null,Al=null,Cl=null,Ys=new Map,Xs=new Map,El=[],T0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Xf(e,t){switch(e){case"focusin":case"focusout":Tl=null;break;case"dragenter":case"dragleave":Al=null;break;case"mouseover":case"mouseout":Cl=null;break;case"pointerover":case"pointerout":Ys.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xs.delete(t.pointerId)}}function Ls(e,t,l,a,n,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:l,eventSystemFlags:a,nativeEvent:i,targetContainers:[n]},t!==null&&(t=aa(t),t!==null&&kf(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function A0(e,t,l,a,n){switch(t){case"focusin":return Tl=Ls(Tl,e,t,l,a,n),!0;case"dragenter":return Al=Ls(Al,e,t,l,a,n),!0;case"mouseover":return Cl=Ls(Cl,e,t,l,a,n),!0;case"pointerover":var i=n.pointerId;return Ys.set(i,Ls(Ys.get(i)||null,e,t,l,a,n)),!0;case"gotpointercapture":return i=n.pointerId,Xs.set(i,Ls(Xs.get(i)||null,e,t,l,a,n)),!0}return!1}function Lf(e){var t=la(e.target);if(t!==null){var l=D(t);if(l!==null){if(t=l.tag,t===13){if(t=N(l),t!==null){e.blockedOn=t,vm(e.priority,function(){if(l.tag===13){var a=bt();a=wi(a);var n=xa(l,a);n!==null&&pt(n,l,a),Cu(l,a)}});return}}else if(t===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function oi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var l=Mu(e.nativeEvent);if(l===null){l=e.nativeEvent;var a=new l.constructor(l.type,l);qi=a,l.target.dispatchEvent(a),qi=null}else return t=aa(l),t!==null&&kf(t),e.blockedOn=l,!1;t.shift()}return!0}function Gf(e,t,l){oi(e)&&l.delete(t)}function C0(){Ou=!1,Tl!==null&&oi(Tl)&&(Tl=null),Al!==null&&oi(Al)&&(Al=null),Cl!==null&&oi(Cl)&&(Cl=null),Ys.forEach(Gf),Xs.forEach(Gf)}function di(e,t){e.blockedOn===t&&(e.blockedOn=null,Ou||(Ou=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,C0)))}var fi=null;function Qf(e){fi!==e&&(fi=e,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){fi===e&&(fi=null);for(var t=0;t<e.length;t+=3){var l=e[t],a=e[t+1],n=e[t+2];if(typeof a!="function"){if(zu(a||l)===null)continue;break}var i=aa(l);i!==null&&(e.splice(t,3),t-=3,zc(i,{pending:!0,data:n,method:l.method,action:a},a,n))}}))}function Gs(e){function t(f){return di(f,e)}Tl!==null&&di(Tl,e),Al!==null&&di(Al,e),Cl!==null&&di(Cl,e),Ys.forEach(t),Xs.forEach(t);for(var l=0;l<El.length;l++){var a=El[l];a.blockedOn===e&&(a.blockedOn=null)}for(;0<El.length&&(l=El[0],l.blockedOn===null);)Lf(l),l.blockedOn===null&&El.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(a=0;a<l.length;a+=3){var n=l[a],i=l[a+1],c=n[it]||null;if(typeof i=="function")c||Qf(l);else if(c){var r=null;if(i&&i.hasAttribute("formAction")){if(n=i,c=i[it]||null)r=c.formAction;else if(zu(n)!==null)continue}else r=c.action;typeof r=="function"?l[a+1]=r:(l.splice(a,3),a-=3),Qf(l)}}}function Uu(e){this._internalRoot=e}mi.prototype.render=Uu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var l=t.current,a=bt();Rf(l,a,e,t,null,null)},mi.prototype.unmount=Uu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rf(e.current,2,null,e,null,null),Jn(),t[ta]=null}};function mi(e){this._internalRoot=e}mi.prototype.unstable_scheduleHydration=function(e){if(e){var t=nr();e={blockedOn:null,target:e,priority:t};for(var l=0;l<El.length&&t!==0&&t<El[l].priority;l++);El.splice(l,0,e),l===0&&Lf(e)}};var Zf=d.version;if(Zf!=="19.1.1")throw Error(o(527,Zf,"19.1.1"));B.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=C(t),e=e!==null?R(e):null,e=e===null?null:e.stateNode,e};var E0={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:g,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hi.isDisabled&&hi.supportsFiber)try{nl=hi.inject(E0),tt=hi}catch{}}return Zs.createRoot=function(e,t){if(!p(e))throw Error(o(299));var l=!1,a="",n=id,i=cd,c=ud,r=null;return t!=null&&(t.unstable_strictMode===!0&&(l=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(n=t.onUncaughtError),t.onCaughtError!==void 0&&(i=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(r=t.unstable_transitionCallbacks)),t=Bf(e,1,!1,null,null,l,a,n,i,c,r,null),e[ta]=t.current,xu(e),new Uu(t)},Zs.hydrateRoot=function(e,t,l){if(!p(e))throw Error(o(299));var a=!1,n="",i=id,c=cd,r=ud,f=null,v=null;return l!=null&&(l.unstable_strictMode===!0&&(a=!0),l.identifierPrefix!==void 0&&(n=l.identifierPrefix),l.onUncaughtError!==void 0&&(i=l.onUncaughtError),l.onCaughtError!==void 0&&(c=l.onCaughtError),l.onRecoverableError!==void 0&&(r=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(f=l.unstable_transitionCallbacks),l.formState!==void 0&&(v=l.formState)),t=Bf(e,1,!0,t,l??null,a,n,i,c,r,f,v),t.context=_f(null),l=t.current,a=bt(),a=wi(a),n=fl(a),n.callback=null,ml(l,n,a),l=a,t.current.lanes=l,st(t,l),Ht(t),e[ta]=t.current,xu(e),new mi(t)},Zs.version="19.1.1",Zs}var Pf;function Z0(){if(Pf)return Gu.exports;Pf=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(d){console.error(d)}}return u(),Gu.exports=Q0(),Gu.exports}var V0=Z0();const K0=B0(V0);var P=(u=>(u[u.Dashboard=0]="Dashboard",u[u.Products=1]="Products",u[u.Pos=2]="Pos",u[u.Customers=3]="Customers",u[u.Invoices=4]="Invoices",u[u.Expenses=5]="Expenses",u[u.Settings=6]="Settings",u[u.Notifications=7]="Notifications",u[u.Suppliers=8]="Suppliers",u))(P||{}),zl=(u=>(u.Cash="نقدي",u.Credit="آجل",u.Partial="جزئي",u))(zl||{});const J0=({className:u})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:[s.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),s.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),$0=({className:u})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:[s.jsx("path",{d:"M16.5 9.4a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Z"}),s.jsx("path",{d:"M19 13.6a8.9 8.9 0 0 1-14 0"}),s.jsx("path",{d:"m8 21 1.7-1.7"}),s.jsx("path",{d:"m14.3 19.3 1.7 1.7"}),s.jsx("path",{d:"M12 13a7.3 7.3 0 0 0-4.3 1.3"}),s.jsx("path",{d:"M12 13h0"}),s.jsx("path",{d:"M16.3 14.3A7.3 7.3 0 0 0 12 13"})]}),om=({className:u})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:[s.jsx("circle",{cx:"8",cy:"21",r:"1"}),s.jsx("circle",{cx:"19",cy:"21",r:"1"}),s.jsx("path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.16"})]}),em=({className:u})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:[s.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),s.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),Wu=({className:u})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:[s.jsx("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 0 2l-.15.08a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1 0-2l.15-.08a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"}),s.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),F0=({className:u})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:[s.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),s.jsx("polyline",{points:"16 17 21 12 16 7"}),s.jsx("line",{x1:"21",x2:"9",y1:"12",y2:"12"})]}),Za=({className:u})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:[s.jsx("circle",{cx:"11",cy:"11",r:"8"}),s.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),er=({className:u})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:[s.jsx("path",{d:"M3 5v14"}),s.jsx("path",{d:"M8 5v14"}),s.jsx("path",{d:"M12 5v14"}),s.jsx("path",{d:"M17 5v14"}),s.jsx("path",{d:"M21 5v14"})]}),sl=({className:u})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:[s.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),s.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),Ol=({className:u})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:[s.jsx("polyline",{points:"3 6 5 6 21 6"}),s.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),s.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),s.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),W0=({className:u})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:[s.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),s.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),s.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),tm=({className:u})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:[s.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),s.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),s.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),Ga=({className:u})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:[s.jsx("circle",{cx:"12",cy:"12",r:"10"}),s.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),s.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}),kt=({className:u})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:[s.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),s.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Qa=({className:u})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:[s.jsx("path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"}),s.jsx("polyline",{points:"14 2 14 8 20 8"}),s.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),s.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),s.jsx("line",{x1:"10",y1:"9",x2:"8",y2:"9"})]}),La=({className:u})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:[s.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),s.jsx("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"})]}),Iu=({className:u})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:s.jsx("path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2z"})}),I0=({className:u})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:[s.jsx("path",{d:"M16.5 9.4a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Z"}),s.jsx("path",{d:"M19 13.6a8.9 8.9 0 0 1-14 0"}),s.jsx("path",{d:"m8 21 1.7-1.7"}),s.jsx("path",{d:"m14.3 19.3 1.7 1.7"}),s.jsx("path",{d:"M12 13a7.3 7.3 0 0 0-4.3 1.3"}),s.jsx("path",{d:"M12 13h0"}),s.jsx("path",{d:"M16.3 14.3A7.3 7.3 0 0 0 12 13"})]}),Pu=({className:u})=>s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:s.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})}),P0=({className:u})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:[s.jsx("path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"}),s.jsx("circle",{cx:"12",cy:"13",r:"3"})]}),bi=({className:u})=>s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:u,children:[s.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),s.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),al=({icon:u,label:d,page:m,activePage:o,setPage:p})=>s.jsxs("button",{onClick:()=>p(m),className:`w-full flex items-center justify-center lg:justify-start p-3 my-1 rounded-lg transition-colors duration-200 ${o===m?"bg-blue-500 text-white":"text-gray-600 hover:bg-blue-100 hover:text-blue-600"}`,title:d,children:[u,s.jsx("span",{className:"ms-4 hidden lg:inline",children:d})]}),ex=({onLogout:u})=>{const{page:d,setPage:m,currentUser:o,settings:p,products:D,customers:N,showSidebarPromo:O}=yt(),C=Y=>{var K;return(o==null?void 0:o.id)==="u1"?!0:((K=o==null?void 0:o.permissions)==null?void 0:K[Y])===!0},R=Math.max(0,p.lowStockThreshold??10),E=Math.max(0,p.debtThreshold??0),X=[];(o==null?void 0:o.id)==="u1"&&X.push("admin-usage"),D==null||D.forEach(Y=>{(Y.quantity??0)<=R&&X.push(`stock-${Y.id}`)}),N==null||N.forEach(Y=>{(Y.debt??0)>E&&X.push(`debt-${Y.id}`)}),X.push("promo-ysk-phone"),(o==null?void 0:o.id)==="u1"&&X.push("admin-usage");const L=X.filter(Y=>!(p.notificationsReadIds||[]).includes(Y)).length;return s.jsxs("div",{className:"fixed top-0 right-0 h-full bg-white shadow-lg w-20 lg:w-64 flex flex-col transition-all duration-300 z-40",children:[s.jsx("div",{className:"flex items-center justify-center h-20 border-b",children:s.jsx("h1",{className:"text-2xl font-bold text-blue-600 hidden lg:inline",children:p.systemName||"نظامي"})}),s.jsxs("nav",{className:"flex-grow px-2 py-4",children:[C(P.Dashboard)&&s.jsx(al,{icon:s.jsx(J0,{className:"h-6 w-6 sidebar-icon"}),label:"الرئيسية",page:P.Dashboard,activePage:d,setPage:m}),C(P.Products)&&s.jsx(al,{icon:s.jsx(bi,{className:"h-6 w-6 sidebar-icon"}),label:"إدارة المنتجات",page:P.Products,activePage:d,setPage:m}),C(P.Pos)&&s.jsx(al,{icon:s.jsx(om,{className:"h-6 w-6 sidebar-icon"}),label:"نقطة البيع",page:P.Pos,activePage:d,setPage:m}),C(P.Customers)&&s.jsx(al,{icon:s.jsx(em,{className:"h-6 w-6 sidebar-icon"}),label:"إدارة العملاء",page:P.Customers,activePage:d,setPage:m}),C(P.Suppliers)&&s.jsx(al,{icon:s.jsx(em,{className:"h-6 w-6 sidebar-icon"}),label:"إدارة الموردين",page:P.Suppliers,activePage:d,setPage:m}),C(P.Invoices)&&s.jsx(al,{icon:s.jsx(Qa,{className:"h-6 w-6 sidebar-icon"}),label:"الفواتير",page:P.Invoices,activePage:d,setPage:m}),C(P.Expenses)&&s.jsx(al,{icon:s.jsx(bi,{className:"h-6 w-6 sidebar-icon"}),label:"المصاريف",page:P.Expenses,activePage:d,setPage:m}),C(P.Notifications)&&s.jsxs("div",{className:"relative",children:[s.jsx(al,{icon:s.jsx(Qa,{className:"h-6 w-6 sidebar-icon"}),label:"التنبيهات"+(L>0?` (${L})`:""),page:P.Notifications,activePage:d,setPage:m}),O&&s.jsxs("div",{className:"absolute -left-1 top-1/2 -translate-y-1/2",children:[s.jsx("span",{className:"text-[10px] font-bold text-amber-700 bg-amber-100 border border-amber-200 rounded-full px-2 py-0.5 animate-pulse",children:"الحق العرض"}),s.jsx("style",{children:`
                    @keyframes shine { 0%{opacity:.6} 50%{opacity:1} 100%{opacity:.6} }
                    .shine { animation: shine 1.8s ease-in-out infinite; }
                  `})]})]}),C(P.Settings)&&s.jsx(al,{icon:s.jsx(Wu,{className:"h-6 w-6 sidebar-icon"}),label:"الإعدادات",page:P.Settings,activePage:d,setPage:m})]}),s.jsxs("div",{className:"px-4 py-4 border-t",children:[s.jsxs("div",{className:"hidden lg:block text-center text-xs text-black",children:[s.jsx("img",{src:"/v4/YSK-SALES.png",alt:"YSK SALES Logo",className:"h-10 w-10 mx-auto mb-2"}),s.jsx("p",{children:"Developed by: Sameh reda"}),s.jsx("p",{children:"للدعم الفني والمبيعات"}),s.jsxs("div",{className:"flex justify-center items-center my-2",children:[s.jsx("img",{src:"/v4/mobile.png",alt:"Phone",className:"h-4 w-4 ml-2"}),s.jsx("a",{href:"tel:01023160657",children:"01023160657"})]}),s.jsxs("div",{className:"flex justify-center items-center my-2",children:[s.jsx("img",{src:"/v4/whatsapp.png",alt:"Whatsapp",className:"h-4 w-4 ml-2"}),s.jsx("a",{href:"https://wa.me/201023160657",target:"_blank",children:"01023160657"})]}),s.jsxs("div",{className:"flex justify-center items-center my-2",children:[s.jsx("img",{src:"/v4/web-domain.png",alt:"Website",className:"h-4 w-4 ml-2"}),s.jsx("a",{href:"https://doc-digital.online",target:"_blank",children:"doc-digital.online"})]}),s.jsxs("div",{className:"flex justify-center items-center my-2",children:[s.jsx("img",{src:"/v4/gmail.png",alt:"Email",className:"h-4 w-4 ml-2"}),s.jsx("a",{href:"mailto:same7redaa@gmail.com",children:"same7redaa@gmail.com"})]})]}),s.jsx("div",{className:"text-center lg:text-right mb-2 mt-4",children:s.jsxs("p",{className:"text-sm font-semibold text-gray-700 hidden lg:block",children:["مرحباً، ",o==null?void 0:o.name]})}),s.jsxs("button",{onClick:u,className:"w-full flex items-center justify-center lg:justify-start p-3 my-1 rounded-lg text-gray-600 hover:bg-red-100 hover:text-red-600 transition-colors duration-200",title:"تسجيل الخروج",children:[s.jsx(F0,{className:"h-6 w-6 sidebar-icon"}),s.jsx("span",{className:"ms-4 hidden lg:inline",children:"تسجيل الخروج"})]})]})]})},tx=({children:u,onLogout:d})=>s.jsxs("div",{className:"flex",children:[s.jsx(ex,{onLogout:d}),s.jsx("main",{className:"flex-1 mr-20 lg:mr-64 bg-gray-50 min-h-screen",children:s.jsx("div",{className:"p-8",children:u})})]}),lm=()=>{const{users:u,setCurrentUser:d,addNotification:m}=yt(),[o,p]=A.useState(""),[D,N]=A.useState(""),[O,C]=A.useState(!!localStorage.getItem("rememberedUsername")),[R,E]=A.useState("");A.useEffect(()=>{const L=localStorage.getItem("rememberedUsername");L&&(p(L),C(!0))},[]);const X=L=>{L.preventDefault();const Y=u.find(K=>K.name===o&&(K.password||"")===D);Y?Y.status==="نشط"?((!Y.permissions||Object.keys(Y.permissions).length===0)&&(Y.permissions={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:Y.id==="u1",7:!0}),d(Y),m(`مرحباً بك مجدداً، ${Y.name}`),O?localStorage.setItem("rememberedUsername",o):localStorage.removeItem("rememberedUsername")):E("هذا الحساب غير نشط."):E("اسم المستخدم أو كلمة المرور غير صحيحة.")};return s.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:s.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-white rounded-xl shadow-lg",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:"/v4/YSK-SALES.png",alt:"YSK SALES Logo",className:"mx-auto h-24 w-24"}),s.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"تسجيل الدخول"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"مرحباً بك مجدداً! الرجاء إدخال بياناتك."})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:X,children:[s.jsxs("div",{className:"rounded-md shadow-sm space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 text-right mb-1",children:"اسم المستخدم"}),s.jsx("input",{id:"username",name:"username",type:"text",value:o,onChange:L=>{p(L.target.value),E("")},required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"اسم المستخدم"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password-input",className:"block text-sm font-medium text-gray-700 text-right mb-1",children:"كلمة المرور"}),s.jsx("input",{id:"password-input",name:"password",type:"password",value:D,onChange:L=>{N(L.target.value),E("")},required:!0,className:"appearance-none relative block w-full px-3 py-3 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"كلمة المرور"})]})]}),s.jsx("div",{className:"flex items-center justify-between",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:O,onChange:L=>C(L.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded cursor-pointer"}),s.jsx("label",{htmlFor:"remember-me",className:"ms-2 block text-sm text-gray-900 cursor-pointer",children:"تذكر اسم المستخدم"})]})}),R&&s.jsx("p",{className:"text-red-500 text-sm text-center",children:R}),s.jsx("div",{children:s.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"تسجيل الدخول"})})]})]})})};class lx{constructor(){this.masterKey="YSK-POS-2024-MASTER-KEY-ULTRA-SECURE-v1.0",this.firebaseConfig={apiKey:"AIzaSyA3HGYLYLlFf05qPBl23PujqWhr5Z0_Apc",authDomain:"ysk-active-35da4.firebaseapp.com",projectId:"ysk-active-35da4",storageBucket:"ysk-active-35da4.firebasestorage.app",messagingSenderId:"690431684740",appId:"1:690431684740:web:3e861056405d08c73a52d1",measurementId:"G-0R13DT05T7"},this.timeSkewMs=300*1e3,this.loadCryptoJS()}getTimeGuard(){try{const m=localStorage.getItem("ysk_time_guard");if(m)return JSON.parse(m)}catch{}const d={lastTs:Date.now()};return localStorage.setItem("ysk_time_guard",JSON.stringify(d)),d}setTimeGuard(d){try{localStorage.setItem("ysk_time_guard",JSON.stringify(d))}catch{}}getSafeNow(){const d=this.getTimeGuard(),m=Date.now(),o=m+this.timeSkewMs<d.lastTs;return m>d.lastTs&&(d.lastTs=m,this.setTimeGuard(d)),{now:Math.max(m,d.lastTs),tampered:o}}loadCryptoJS(){if(typeof CryptoJS>"u"){const d=document.createElement("script");d.src="https://cdn.jsdelivr.net/npm/crypto-js@4.2.0/crypto-js.min.js",document.head.appendChild(d)}}decryptLicenseData(d){try{const o=CryptoJS.AES.decrypt(d,this.masterKey).toString(CryptoJS.enc.Utf8);return JSON.parse(o)}catch(m){return console.error("فشل في فك تشفير بيانات الترخيص:",m),null}}generateSignature(d,m,o){const p=d+m+o+this.masterKey;return CryptoJS.SHA256(p).toString().substring(0,32)}async getLicenseFromFirebase(d){try{console.log("البحث في Firebase عن الكود:",d);const{initializeApp:m}=await Xu(async()=>{const{initializeApp:H}=await import("https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js");return{initializeApp:H}},[]),{getFirestore:o,collection:p,query:D,where:N,getDocs:O,doc:C,updateDoc:R}=await Xu(async()=>{const{getFirestore:H,collection:S,query:$,where:J,getDocs:G,doc:te,updateDoc:ue}=await import("https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js");return{getFirestore:H,collection:S,query:$,where:J,getDocs:G,doc:te,updateDoc:ue}},[]),E=m(this.firebaseConfig),X=o(E),L=D(p(X,"ysk_licenses"),N("code","==",d)),Y=await O(L);if(Y.empty)return console.log("لم يتم العثور على الترخيص في Firebase"),null;const K=Y.docs[0],T=K.data();console.log("تم العثور على الترخيص في Firebase:",T);try{await R(K.ref,{lastUsed:new Date().toISOString(),usageCount:(T.usageCount||0)+1}),console.log("تم تحديث إحصائيات الاستخدام")}catch(H){console.warn("فشل في تحديث إحصائيات الاستخدام:",H)}return{data:T,ref:K.ref,id:K.id}}catch(m){throw console.error("خطأ في البحث عن الترخيص في Firebase:",m),m}}isValidFormat(d){return/^YSK-[A-Z0-9]{4}-[A-Z0-9]{4}-[A-Z0-9]{4}-[A-Z0-9]{4}$/.test(d)}async validateLicense(d){if(console.log("محاولة التحقق من الكود:",d),!d)return{valid:!1,error:"من فضلك أدخل كود التفعيل"};const m=d.trim().toUpperCase(),o=this.isValidFormat(m);try{const p=await this.getLicenseFromFirebase(m);if(!p)return console.log("لم يتم العثور على الترخيص في Firebase"),o?this.validateOfflineLicense():{valid:!1,error:"تنسيق كود التفعيل غير صحيح. يجب أن يكون بالشكل: YSK-XXXX-XXXX-XXXX-XXXX"};if(p.data.activated)return{valid:!1,error:"هذا الكود تم استخدامه بالفعل"};const D=this.decryptLicenseData(p.data.encryptedData);if(!D)return{valid:!1,error:"كود التفعيل تالف أو غير صحيح"};console.log("تم فك تشفير بيانات الترخيص:",D);const N=this.generateSignature(D.id,D.customer.name,D.expires);if(D.signature!==N)return{valid:!1,error:"كود التفعيل تم التلاعب به"};const O=new Date,C=new Date(D.expires);if(O>C)return{valid:!1,error:"كود التفعيل منتهي الصلاحية",expired:!0,data:D};try{if(!p.data.activated){const{updateDoc:E}=await Xu(async()=>{const{updateDoc:X}=await import("https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js");return{updateDoc:X}},[]);await E(p.ref,{activated:!0,activationDate:new Date().toISOString()}),console.log("تم تعليم الكود كمفعل لمرة واحدة")}}catch(E){console.warn("تعذر تحديث حالة التفعيل في Firebase:",E)}const R=Math.ceil((C.getTime()-O.getTime())/(1e3*60*60*24));return this.saveLicenseInfo(D),console.log("التحقق نجح، الأيام المتبقية:",R),{valid:!0,data:D,daysRemaining:R}}catch(p){return console.error("خطأ في التحقق من الترخيص:",p),o?this.validateOfflineLicense():{valid:!1,error:"تنسيق كود التفعيل غير صحيح. يجب أن يكون بالشكل: YSK-XXXX-XXXX-XXXX-XXXX"}}}validateOfflineLicense(){console.log("التحقق من الترخيص المحفوظ محلياً");const d=this.loadLicenseInfo();if(!d||!d.activated)return{valid:!1,error:"لا يوجد اتصال بالإنترنت ولا توجد تراخيص محفوظة"};const m=this.validateLicenseData(d.licenseData);return m.valid&&(m.offline=!0,console.log("تم التحقق من الترخيص محلياً بنجاح")),m}validateLicenseData(d){if(!d)return{valid:!1,error:"بيانات الترخيص مفقودة"};const{now:m,tampered:o}=this.getSafeNow();if(o)return{valid:!1,error:"تم اكتشاف تغيير في وقت النظام. يرجى إعادة التحقق من الترخيص."};const p=new Date(d.expires);if(m>p.getTime())return{valid:!1,error:"انتهت صلاحية الترخيص",expired:!0,data:d};const D=Math.ceil((p.getTime()-m)/(1e3*60*60*24));return{valid:!0,data:d,daysRemaining:D}}getLicenseFeatures(d){const m={trial:{name:"تجريبي",maxProducts:50,maxInvoices:100,maxUsers:1,supportLevel:"basic"},standard:{name:"عادي",maxProducts:1e3,maxInvoices:5e3,maxUsers:3,supportLevel:"standard"},premium:{name:"مميز",maxProducts:-1,maxInvoices:-1,maxUsers:10,supportLevel:"premium"},lifetime:{name:"مدى الحياة",maxProducts:-1,maxInvoices:-1,maxUsers:-1,supportLevel:"premium"}};return m[d]||m.trial}saveLicenseInfo(d){const m={activated:!0,activationDate:new Date().toISOString(),licenseData:d,lastValidated:new Date().toISOString()},o=CryptoJS.AES.encrypt(JSON.stringify(m),this.masterKey).toString();localStorage.setItem("ysk_license_info",o),console.log("🔐 تم حفظ الترخيص مشفراً محلياً")}loadLicenseInfo(){try{const d=localStorage.getItem("ysk_license_info");if(!d)return null;const o=CryptoJS.AES.decrypt(d,this.masterKey).toString(CryptoJS.enc.Utf8);return o?(console.log("🔓 تم فك تشفير الترخيص المحفوظ بنجاح"),JSON.parse(o)):(console.warn("فشل في فك تشفير بيانات الترخيص المحفوظة"),null)}catch(d){return console.error("خطأ في تحميل الترخيص المحفوظ:",d),localStorage.removeItem("ysk_license_info"),null}}checkActivationStatus(){console.log("التحقق من حالة التفعيل الحالية");const d=this.loadLicenseInfo();if(!d||!d.activated)return{valid:!1,error:"البرنامج غير مفعل"};const m=this.validateLicenseData(d.licenseData);return m.valid?(m.offline=!0,console.log("الترخيص المحفوظ محلياً صحيح")):(localStorage.removeItem("ysk_license_info"),console.log("تم إزالة الترخيص غير الصحيح أو المنتهي")),m}deactivate(){localStorage.removeItem("ysk_license_info"),localStorage.removeItem("isActivated"),console.log("تم إلغاء التفعيل وحذف البيانات المشفرة")}async refreshLicense(){const d=this.loadLicenseInfo();if(!d||!d.activated)return{valid:!1,error:"لا يوجد ترخيص مفعل"};try{return this.validateLicenseData(d.licenseData)}catch(m){return console.error("خطأ في تحديث الترخيص:",m),this.validateLicenseData(d.licenseData)}}}const pi=new lx,ax=({onActivate:u})=>{const[d,m]=A.useState(""),[o,p]=A.useState(""),[D,N]=A.useState(!1),[O,C]=A.useState(null),[R,E]=A.useState(!1);A.useEffect(()=>{if(typeof CryptoJS>"u"){const T=document.createElement("script");T.src="https://cdn.jsdelivr.net/npm/crypto-js@4.2.0/crypto-js.min.js",document.head.appendChild(T)}if(!document.getElementById("material-icons-link")){const T=document.createElement("link");T.id="material-icons-link",T.rel="stylesheet",T.href="https://fonts.googleapis.com/css2?family=Material+Icons+Outlined",document.head.appendChild(T)}},[]);const X=async T=>{T.preventDefault(),N(!0),p(""),C(null);try{await new Promise(S=>setTimeout(S,600));const H=await pi.validateLicense(d.trim());H.valid&&H.data?(pi.saveLicenseInfo(H.data),C(H),E(!0),setTimeout(()=>E(!1),1800)):p(H.error||"كود التفعيل غير صحيح")}catch{p("حدث خطأ في التحقق من كود التفعيل")}finally{N(!1)}},L=T=>{const H=T.toUpperCase().replace(/[^A-Z0-9]/g,"");return("YSK-"+((H.startsWith("YSK")?H.slice(3):H).match(/[A-Z0-9]{1,4}/g)||[]).slice(0,4).join("-")).substring(0,23)},Y=T=>({trial:"تجريبي",standard:"عادي",premium:"مميز",lifetime:"مدى الحياة"})[T]||T,K=A.useMemo(()=>{const H=["#10B981","#059669","#34D399","#6EE7B7","#A7F3D0","#047857"],S=[];for(let $=0;$<28;$++){const G=12.857142857142858*$*Math.PI/180,te=140+Math.random()*140,ue=Math.cos(G)*te,ye=Math.sin(G)*te,he=H[$%H.length];S.push(s.jsx("span",{className:"confetti-piece",style:{"--dx":`${ue}px`,"--dy":`${ye}px`,backgroundColor:he,left:"50%",top:"18%"}},$))}return S},[]);return s.jsxs("div",{className:"min-h-screen bg-gray-50 py-8 px-4",style:{fontFamily:"Cairo, sans-serif"},children:[R&&s.jsx("div",{className:"fixed inset-0 pointer-events-none z-40",children:K}),s.jsxs("div",{className:"max-w-4xl mx-auto relative z-10",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"flex justify-center mb-6",children:s.jsx("img",{src:"/v4/YSK-SALES.png",alt:"YSK POS",className:"h-20 w-20"})}),s.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"تفعيل نظام YSK POS"}),s.jsx("p",{className:"text-xl text-gray-600",children:O?"تم التفعيل بنجاح":"أدخل كود التفعيل لبدء الاستخدام"})]}),!O&&s.jsx("div",{className:"bg-white p-8 rounded-xl shadow-lg mb-8",children:s.jsxs("form",{onSubmit:X,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"serial",className:"block text-lg font-medium text-gray-700 text-right mb-3",children:"كود التفعيل"}),s.jsx("input",{id:"serial",name:"serial",type:"text",value:d,onChange:T=>{const H=L(T.target.value.toUpperCase());m(H),p("")},disabled:D,className:"block w-full px-6 py-4 border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-center tracking-wider font-mono text-xl disabled:bg-gray-100",placeholder:"YSK-XXXX-XXXX-XXXX-XXXX",maxLength:23})]}),o&&s.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg text-center",children:s.jsx("p",{className:"text-red-700",children:o})}),s.jsx("button",{type:"submit",disabled:D||!d.trim(),className:"w-full flex justify-center items-center py-4 px-6 border border-transparent rounded-lg shadow-sm text-xl font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all disabled:bg-gray-400 disabled:cursor-not-allowed",children:D?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white ml-3"}),"جاري التحقق..."]}):"تفعيل النظام"})]})}),O&&O.data&&s.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl p-10 mb-8 shadow-lg",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("span",{className:"material-icons-outlined text-green-600",style:{fontSize:64},children:"verified"})}),s.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-center text-gray-800 mb-8",children:"تم التفعيل بنجاح"}),s.jsxs("div",{className:"space-y-4 text-lg max-w-2xl mx-auto",children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-3",children:[s.jsx("span",{className:"text-gray-700 font-semibold",children:"العميل:"}),s.jsx("span",{className:"text-gray-900",children:O.data.customer.name})]}),s.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-3",children:[s.jsx("span",{className:"text-gray-700 font-semibold",children:"نوع الترخيص:"}),s.jsx("span",{className:"text-blue-600 font-semibold",children:Y(O.data.type)})]}),s.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 pb-3",children:[s.jsx("span",{className:"text-gray-700 font-semibold",children:"تاريخ الانتهاء:"}),s.jsx("span",{className:"text-gray-900",children:new Date(O.data.expires).toLocaleDateString("ar-EG")})]}),O.daysRemaining!==void 0&&s.jsxs("div",{className:"flex items-center justify-between pb-1",children:[s.jsx("span",{className:"text-gray-700 font-semibold",children:"الأيام المتبقية:"}),s.jsxs("span",{className:"text-orange-600 font-bold",children:[O.daysRemaining," يوم"]})]})]}),s.jsxs("div",{className:"mt-8 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center justify-center gap-3",children:[s.jsx("span",{className:"material-icons-outlined text-green-600",children:"shield"}),s.jsxs("p",{className:"text-green-800 m-0 text-center",children:[s.jsx("span",{className:"font-semibold",children:"تم حفظ الترخيص محلياً (مشفر)"}),s.jsx("span",{className:"block text-sm text-green-700",children:"يمكنك العمل بدون اتصال بالإنترنت"})]})]}),s.jsx("div",{className:"mt-8 flex justify-center",children:s.jsxs("button",{onClick:u,className:"inline-flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg shadow",children:[s.jsx("span",{className:"material-icons-outlined",children:"arrow_forward"}),"تخطي والدخول"]})})]}),s.jsxs("div",{className:"mt-10 bg-white rounded-xl border border-gray-200 shadow p-6",children:[s.jsxs("div",{className:"flex items-center justify-center mb-4",children:[s.jsx("span",{className:"material-icons-outlined text-gray-700",style:{fontSize:28},children:"info"}),s.jsx("h3",{className:"text-xl font-bold text-gray-800 mr-2",children:"معلومات المطور"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-right",children:[s.jsxs("a",{href:"tel:01023160657",className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"material-icons-outlined text-blue-600",children:"call"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"الهاتف"}),s.jsx("div",{className:"font-medium text-gray-800",children:"01023160657"})]})]}),s.jsx("span",{className:"material-icons-outlined text-gray-400",children:"chevron_left"})]}),s.jsxs("a",{href:"https://wa.me/201023160657",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"material-icons-outlined text-green-600",children:"chat"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"واتساب"}),s.jsx("div",{className:"font-medium text-gray-800",children:"01023160657"})]})]}),s.jsx("span",{className:"material-icons-outlined text-gray-400",children:"chevron_left"})]}),s.jsxs("a",{href:"mailto:same7redaa@gmail.com",className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"material-icons-outlined text-red-600",children:"mail"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm text-gray-500",children:"الإيميل"}),s.jsx("div",{className:"font-medium text-gray-800",children:"same7redaa@gmail.com"})]})]}),s.jsx("span",{className:"material-icons-outlined text-gray-400",children:"chevron_left"})]})]})]}),s.jsxs("div",{className:"text-center mt-10",children:[s.jsx("p",{className:"text-gray-600",children:"نظام YSK POS - إدارة نقاط البيع والمخزون"}),s.jsx("p",{className:"text-gray-500 mt-1",children:"للدعم الفني والمساعدة برجاء التواصل عبر البيانات أعلاه"})]})]}),s.jsx("style",{jsx:!0,children:`
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap');

        /* قطع الورق المتطاير */
        .confetti-piece {
          position: absolute;
          width: 8px;
          height: 14px;
          border-radius: 2px;
          transform: translate(-50%, -50%);
          animation: confetti-burst 1.2s ease-out forwards, confetti-tilt 1.2s ease-out forwards;
          will-change: transform, opacity;
        }
        @keyframes confetti-burst {
          0% { opacity: 1; transform: translate(-50%, -50%) scale(0.8); }
          100% { opacity: 0; transform: translate(calc(-50% + var(--dx)), calc(-50% + var(--dy))) scale(1); }
        }
        @keyframes confetti-tilt {
          0% { transform: translate(-50%, -50%) rotate(0deg); }
          100% { transform: translate(calc(-50% + var(--dx)), calc(-50% + var(--dy))) rotate(720deg); }
        }
      `})]})},Ya=({title:u,value:d,icon:m,color:o})=>s.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-200 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-medium text-gray-500",children:u}),s.jsx("p",{className:"text-2xl md:text-3xl font-extrabold text-gray-900 mt-1",children:d})]}),s.jsx("div",{className:`p-3 rounded-lg ${o}`,children:m})]}),Xa=({title:u,children:d,right:m})=>s.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800",children:u}),m]}),d]}),am=u=>typeof u.refundedAmount=="number"?u.refundedAmount||0:u.returns?u.items.reduce((d,m)=>d+(u.returns[m.product.id]||0)*m.price,0):0,Vu=()=>{const{products:u,customers:d,invoices:m,expenses:o,users:p}=yt(),[D,N]=A.useState(""),[O,C]=A.useState(""),R=k=>!D&&!O?!0:!(D&&k<D||O&&k>O),E=A.useMemo(()=>m.filter(k=>R(k.date)),[m,D,O]),X=A.useMemo(()=>o.filter(k=>R(k.date)),[o,D,O]),L=E.reduce((k,h)=>k+(h.total||0),0),Y=E.reduce((k,h)=>k+am(h),0),K=X.reduce((k,h)=>k+(h.amount||0),0),T=E.reduce((k,h)=>{const _=h.returns||{},Z=h.items.reduce((W,g)=>{const B=u.find(re=>re.id===g.product.id);if(!B)return W;const V=_[g.product.id]||0,ne=Math.max(0,(g.quantity||0)-V);return W+(g.price-B.purchasePrice)*ne},0);return k+Z},0),H=Math.max(0,L-Y),S=T-K,$=E.length,J=d.length,G=u.length,te={};E.forEach(k=>{const h=k.date;te[h]=te[h]||{sales:0,returns:0,expenses:0},te[h].sales+=k.total||0,te[h].returns+=am(k)}),X.forEach(k=>{const h=k.date;te[h]=te[h]||{sales:0,returns:0,expenses:0},te[h].expenses+=k.amount||0});const ue=Object.keys(te).sort().map(k=>({date:k,...te[k]})),ye=A.useMemo(()=>{const k={};return E.forEach(h=>{var g;const _=h.createdById||"unknown",Z=h.createdByName||((g=p.find(B=>B.id===h.createdById))==null?void 0:g.name)||"غير معروف";k[_]||(k[_]={name:Z,totalSales:0,invoiceCount:0,itemsSold:0}),k[_].totalSales+=h.total||0,k[_].invoiceCount+=1;const W=h.returns||{};h.items.forEach(B=>{const V=W[B.product.id]||0,ne=Math.max(0,(B.quantity||0)-V);k[_].itemsSold+=ne})}),Object.entries(k).map(([h,_])=>({id:h,..._,avgInvoice:_.invoiceCount?_.totalSales/_.invoiceCount:0})).sort((h,_)=>_.totalSales-h.totalSales)},[E,p]),he=E.reduce((k,h)=>{const _=h.returns||{};return h.items.forEach(Z=>{const W=Math.max(0,(Z.quantity||0)-(_[Z.product.id]||0));k[Z.product.name]=(k[Z.product.name]||0)+W}),k},{}),ve=Object.keys(he).map(k=>({name:k.length>18?k.substring(0,18)+"...":k,quantitySold:he[k]})).sort((k,h)=>h.quantitySold-k.quantitySold).slice(0,7),Ue=({invoices:k})=>s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-right",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"p-2",children:"رقم"}),s.jsx("th",{className:"p-2",children:"العميل"}),s.jsx("th",{className:"p-2",children:"التاريخ"}),s.jsx("th",{className:"p-2",children:"الإجمالي"})]})}),s.jsx("tbody",{children:k.slice(0,7).map(h=>{var _;return s.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[s.jsxs("td",{className:"p-2",children:[s.jsx("span",{className:"font-mono",children:h.id}),h.returns&&Object.values(h.returns).some(Z=>Z>0)&&s.jsx("span",{className:"ms-2 px-2 py-0.5 text-[10px] font-semibold bg-red-100 text-red-700 rounded-full",children:"مرتجع"})]}),s.jsx("td",{className:"p-2",children:((_=h.customer)==null?void 0:_.name)||"عميل نقدي"}),s.jsx("td",{className:"p-2",children:h.date}),s.jsxs("td",{className:"p-2",children:[(h.total||0).toFixed(2)," ج.م"]})]},h.id)})})]})});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-extrabold text-gray-900",children:"لوحة التحكم الشاملة"}),s.jsx("p",{className:"text-gray-600",children:"نظرة عامة على المبيعات، الأرباح، المصاريف، المرتجعات، وأداء المستخدمين"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"date",value:D,onChange:k=>N(k.target.value),className:"p-2 border rounded-lg text-sm"}),s.jsx("span",{className:"text-gray-500 text-sm",children:"إلى"}),s.jsx("input",{type:"date",value:O,onChange:k=>C(k.target.value),className:"p-2 border rounded-lg text-sm"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-6 gap-4",children:[s.jsx(Ya,{title:"إجمالي المبيعات",value:`${L.toFixed(2)} ج.م`,icon:s.jsx(La,{className:"h-6 w-6 text-white"}),color:"bg-green-500/90"}),s.jsx(Ya,{title:"إجمالي المرتجعات",value:`${Y.toFixed(2)} ج.م`,icon:s.jsx(Qa,{className:"h-6 w-6 text-white"}),color:"bg-red-500/90"}),s.jsx(Ya,{title:"صافي المبيعات",value:`${H.toFixed(2)} ج.م`,icon:s.jsx(om,{className:"h-6 w-6 text-white"}),color:"bg-blue-500/90"}),s.jsx(Ya,{title:"إجمالي المصاريف",value:`${K.toFixed(2)} ج.م`,icon:s.jsx($0,{className:"h-6 w-6 text-white"}),color:"bg-orange-500/90"}),s.jsx(Ya,{title:"إجمالي الأرباح",value:`${T.toFixed(2)} ج.م`,icon:s.jsx(La,{className:"h-6 w-6 text-white"}),color:"bg-teal-500/90"}),s.jsx(Ya,{title:"صافي الربح",value:`${S.toFixed(2)} ج.م`,icon:s.jsx(La,{className:"h-6 w-6 text-white"}),color:"bg-indigo-500/90"})]}),s.jsx(Xa,{title:"اتجاهات المبيعات والمرتجعات والمصاريف",right:null,children:s.jsx("div",{style:{width:"100%",height:320},children:s.jsx(qu,{children:s.jsxs(z0,{data:ue,children:[s.jsx(Bu,{strokeDasharray:"3 3"}),s.jsx(_u,{dataKey:"date"}),s.jsx(Ru,{}),s.jsx(Hu,{formatter:k=>`${(k||0).toFixed(2)} ج.م`}),s.jsx(ku,{}),s.jsx(Yu,{type:"monotone",dataKey:"sales",name:"المبيعات",stroke:"#3b82f6",strokeWidth:2}),s.jsx(Yu,{type:"monotone",dataKey:"returns",name:"المرتجعات",stroke:"#ef4444",strokeWidth:2}),s.jsx(Yu,{type:"monotone",dataKey:"expenses",name:"المصاريف",stroke:"#f59e0b",strokeWidth:2})]})})})}),s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[s.jsx(Xa,{title:"مبيعات المستخدمين (إجمالي)",right:null,children:s.jsx("div",{style:{width:"100%",height:300},children:s.jsx(qu,{children:s.jsxs(Vf,{data:ye.map(k=>({name:k.name,total:+k.totalSales.toFixed(2)})),children:[s.jsx(Bu,{strokeDasharray:"3 3"}),s.jsx(_u,{dataKey:"name",interval:0,angle:-10,textAnchor:"end",height:60}),s.jsx(Ru,{}),s.jsx(Hu,{formatter:k=>`${(k||0).toFixed(2)} ج.م`}),s.jsx(ku,{}),s.jsx(Kf,{dataKey:"total",name:"إجمالي المبيعات",fill:"#6366f1"})]})})})}),s.jsx(Xa,{title:"أداء المستخدمين",right:null,children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-right text-sm",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-2",children:"المستخدم"}),s.jsx("th",{className:"p-2",children:"إجمالي المبيعات"}),s.jsx("th",{className:"p-2",children:"عدد الفواتير"}),s.jsx("th",{className:"p-2",children:"متوسط الفاتورة"}),s.jsx("th",{className:"p-2",children:"القطع المباعة"})]})}),s.jsxs("tbody",{children:[ye.map(k=>s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"p-2 font-medium",children:k.name}),s.jsxs("td",{className:"p-2",children:[k.totalSales.toFixed(2)," ج.م"]}),s.jsx("td",{className:"p-2",children:k.invoiceCount}),s.jsxs("td",{className:"p-2",children:[k.avgInvoice.toFixed(2)," ج.م"]}),s.jsx("td",{className:"p-2",children:k.itemsSold})]},k.id)),ye.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"text-center p-6 text-gray-500",children:"لا توجد بيانات ضمن الفترة المحددة"})})]})]})})}),s.jsx(Xa,{title:"المنتجات الأكثر مبيعاً (صافي)",right:null,children:s.jsx("div",{style:{width:"100%",height:300},children:s.jsx(qu,{children:s.jsxs(Vf,{data:ve,layout:"vertical",children:[s.jsx(Bu,{strokeDasharray:"3 3"}),s.jsx(_u,{type:"number"}),s.jsx(Ru,{dataKey:"name",type:"category",width:140}),s.jsx(Hu,{formatter:k=>`${k} قطعة`}),s.jsx(ku,{}),s.jsx(Kf,{dataKey:"quantitySold",name:"الكمية المباعة",fill:"#10b981"})]})})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx(Xa,{title:"أحدث الفواتير",right:null,children:s.jsx(Ue,{invoices:E})}),s.jsx(Xa,{title:"ملخص سريع",right:null,children:s.jsxs("div",{className:"space-y-3 text-sm text-gray-700",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"عدد الفواتير"}),s.jsx("span",{className:"font-semibold",children:$})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"عدد العملاء"}),s.jsx("span",{className:"font-semibold",children:J})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"عدد المنتجات"}),s.jsx("span",{className:"font-semibold",children:G})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"صافي المبيعات (المبيعات - المرتجعات)"}),s.jsxs("span",{className:"font-semibold",children:[H.toFixed(2)," ج.م"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"صافي الربح (الربح - المصاريف)"}),s.jsxs("span",{className:"font-semibold",children:[S.toFixed(2)," ج.م"]})]})]})})]})]})};let Ku=null,$s=null,Vs=null;const Ju=u=>{if(Ku)return;let d=null;if(u.scannerApiKey&&u.scannerProjectId?d={apiKey:u.scannerApiKey,authDomain:u.scannerAuthDomain,projectId:u.scannerProjectId}:u.syncApiKey&&u.syncProjectId&&(d={apiKey:u.syncApiKey,authDomain:u.syncAuthDomain,projectId:u.syncProjectId}),!!d)try{Ku=um(d,"scanner"),$s=rm(Ku)}catch(m){console.error("Firebase initialization failed:",m)}},tr=async()=>{if(!$s)return;const u=Ws($s,"scannerSessions","fixed");try{await Is(u,{status:"scanRequested",requestedAt:new Date},{merge:!0})}catch(d){console.error("Failed to request Firebase scan:",d)}},lr=u=>{if(!$s)return()=>{};const d=Ws($s,"scannerSessions","fixed");Vs&&(Vs(),Vs=null);try{return Vs=_0(d,m=>{const o=m.data();o&&o.status==="scanned"&&o.scannedValue&&(u(o.scannedValue),Is(d,{status:"completed"},{merge:!0}).catch(p=>console.error("Failed to reset scan status:",p)))},m=>{console.error("Firebase scanner listener error:",m)}),Vs}catch(m){return console.error("Failed to setup Firebase scanner listener:",m),()=>{}}},dm=({isOpen:u,title:d,message:m,confirmText:o="تأكيد",cancelText:p="إلغاء",onConfirm:D,onCancel:N,type:O="warning"})=>{if(!u)return null;const R=(()=>{switch(O){case"danger":return{icon:"⚠️",iconBg:"bg-red-100",iconColor:"text-red-600",confirmBtn:"bg-red-600 hover:bg-red-700",titleColor:"text-red-900"};case"warning":return{icon:"⚠️",iconBg:"bg-yellow-100",iconColor:"text-yellow-600",confirmBtn:"bg-yellow-600 hover:bg-yellow-700",titleColor:"text-yellow-900"};case"info":return{icon:"ℹ️",iconBg:"bg-blue-100",iconColor:"text-blue-600",confirmBtn:"bg-blue-600 hover:bg-blue-700",titleColor:"text-blue-900"};default:return{icon:"❓",iconBg:"bg-gray-100",iconColor:"text-gray-600",confirmBtn:"bg-gray-600 hover:bg-gray-700",titleColor:"text-gray-900"}}})();return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md transform transition-all",children:[s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:`mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full ${R.iconBg} sm:mx-0 sm:h-10 sm:w-10`,children:s.jsx("span",{className:`text-xl ${R.iconColor}`,children:R.icon})}),s.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ms-4 sm:text-right flex-1",children:[s.jsx("h3",{className:`text-lg leading-6 font-medium ${R.titleColor} mb-2`,children:d}),s.jsx("div",{className:"mt-2",children:s.jsx("p",{className:"text-sm text-gray-500 leading-relaxed",children:m})})]})]})}),s.jsxs("div",{className:"bg-gray-50 px-6 py-3 sm:flex sm:flex-row-reverse rounded-b-lg",children:[s.jsx("button",{type:"button",className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white ${R.confirmBtn} focus:outline-none focus:ring-2 focus:ring-offset-2 sm:ms-3 sm:w-auto sm:text-sm transition-colors`,onClick:D,children:o}),s.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ms-3 sm:w-auto sm:text-sm transition-colors",onClick:N,children:p})]})]})})},sx=({product:u,onClose:d,onSave:m,scannedBarcode:o})=>{var W;const{units:p,saveUnits:D,products:N,suppliers:O}=yt(),[C,R]=A.useState(u||{id:"",name:"",unit:p[0]||{id:0,name:""},supplier:"",productionDate:"",expiryDate:"",barcode:""}),[E,X]=A.useState((u==null?void 0:u.price.toString())||""),[L,Y]=A.useState((u==null?void 0:u.purchasePrice.toString())||""),[K,T]=A.useState((u==null?void 0:u.quantity.toString())||""),[H,S]=A.useState(""),$=A.useMemo(()=>{const g=(C.supplier||"").toLowerCase().trim();return g?(O||[]).filter(B=>(B.name||"").toLowerCase().includes(g)||(B.phone||"").includes(C.supplier)):O||[]},[C.supplier,O]),[J,G]=A.useState(!1),[te,ue]=A.useState(!1),[ye,he]=A.useState(""),ve=!u,Ue=g=>{if(!g.trim())return S(""),!1;if(N.some(V=>V.barcode===g&&(ve||V.id!==(u==null?void 0:u.id)))){const V=N.find(ne=>ne.barcode===g&&(ve||ne.id!==(u==null?void 0:u.id)));return S(`هذا الباركود موجود بالفعل للمنتج: ${V==null?void 0:V.name}`),!0}return S(""),!1};A.useEffect(()=>{o&&(R(g=>({...g,barcode:o})),Ue(o))},[o]),A.useEffect(()=>{const B=lr(V=>{R(ne=>({...ne,barcode:V})),Ue(V)});return()=>{B&&B()}},[]);const k=g=>{const{name:B,value:V}=g.target;if(B==="unitId"){const ne=p.find(re=>re.id===parseInt(V));ne&&R({...C,unit:ne})}else B==="supplier"?(R({...C,supplier:V}),ue(!1),G(!0)):B==="barcode"?(R({...C,[B]:V}),Ue(V)):R({...C,[B]:V})},h=async()=>{if(ye.trim()){const g={id:Date.now(),name:ye.trim()},B=[g,...p];await D(B),R({...C,unit:g}),he("")}},_=async()=>{if(H)return;let g={...C,price:parseFloat(E)||0,purchasePrice:parseFloat(L)||0,quantity:parseInt(K)||0,id:C.id||`p${Date.now()}`,barcode:C.barcode||`${Date.now()}`};await m(g,ve),d()},Z=()=>{const g=`${Date.now()}`;R({...C,barcode:g}),S("")};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-4xl transform transition-all",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:ve?"إضافة منتج جديد":"تعديل المنتج"}),s.jsx("button",{onClick:d,children:s.jsx(kt,{className:"h-6 w-6 text-gray-500 hover:text-gray-800"})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم المنتج"}),s.jsx("input",{type:"text",id:"name",name:"name",value:C.name,onChange:k,placeholder:"اسم المنتج",className:"p-2 border rounded w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"purchasePrice",className:"block text-sm font-medium text-gray-700 mb-1",children:"سعر الشراء"}),s.jsx("input",{type:"number",step:"0.01",id:"purchasePrice",name:"purchasePrice",value:L,onChange:g=>Y(g.target.value),placeholder:"سعر الشراء",className:"p-2 border rounded w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-gray-700 mb-1",children:"سعر البيع"}),s.jsx("input",{type:"number",step:"0.01",id:"price",name:"price",value:E,onChange:g=>X(g.target.value),placeholder:"سعر البيع",className:"p-2 border rounded w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700 mb-1",children:"الكمية"}),s.jsx("input",{type:"number",id:"quantity",name:"quantity",value:K,onChange:g=>T(g.target.value),placeholder:"الكمية",className:"p-2 border rounded w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"unitId",className:"block text-sm font-medium text-gray-700 mb-1",children:"الوحدة"}),s.jsx("select",{id:"unitId",name:"unitId",value:((W=C.unit)==null?void 0:W.id)||"",onChange:k,className:"p-2 border rounded w-full",children:p.map(g=>s.jsx("option",{value:g.id,children:g.name},g.id))}),s.jsxs("div",{className:"flex mt-2",children:[s.jsx("input",{type:"text",value:ye,onChange:g=>he(g.target.value),placeholder:"أو أضف وحدة جديدة",className:"p-2 border rounded-s-md flex-grow"}),s.jsx("button",{onClick:h,className:"bg-blue-500 text-white p-2 rounded-e-md",children:"حفظ"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"supplier",className:"block text-sm font-medium text-gray-700 mb-1",children:"المورد"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",id:"supplier",name:"supplier",value:C.supplier,onChange:k,onFocus:()=>G(!0),placeholder:"اسم المورد أو اكتب للبحث",className:`p-2 border rounded w-full ${te?"bg-blue-50":""}`}),J&&C.supplier&&$&&$.length>0&&s.jsx("div",{className:"absolute z-20 mt-1 w-full bg-white border rounded shadow max-h-40 overflow-auto",children:$.slice(0,10).map(g=>s.jsxs("div",{onClick:()=>{R(B=>({...B,supplier:g.name})),G(!1),ue(!0)},className:"px-3 py-2 hover:bg-blue-50 cursor-pointer flex items-center justify-between",children:[s.jsx("span",{children:g.name}),s.jsx("span",{className:"text-xs text-gray-500",style:{direction:"ltr"},children:g.phone})]},g.id))})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{htmlFor:"barcode",className:"block text-sm font-medium text-gray-700 mb-1",children:"الباركود"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",id:"barcode",name:"barcode",value:C.barcode,onChange:k,placeholder:"يولد تلقائياً اذا ترك فارغاً",className:`p-2 border rounded w-full pe-20 ${H?"border-red-500 bg-red-50":""}`}),s.jsx("button",{onClick:Z,className:"absolute left-12 top-1/2 -translate-y-1/2 text-gray-500",title:"توليد باركود",children:s.jsx(sl,{className:"h-5 w-5"})}),s.jsx("button",{onClick:tr,className:"absolute left-2 top-1/2 -translate-y-1/2 text-gray-500 hover:text-blue-600",title:"مسح باركود",children:s.jsx(er,{className:"h-5 w-5"})})]}),H&&s.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",children:[s.jsx("svg",{className:"h-4 w-4 text-red-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),H]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"productionDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ الإنتاج"}),s.jsx("input",{type:"date",id:"productionDate",name:"productionDate",value:C.productionDate,onChange:k,className:"p-2 border rounded w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"expiryDate",className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ الإنتهاء"}),s.jsx("input",{type:"date",id:"expiryDate",name:"expiryDate",value:C.expiryDate,onChange:k,className:"p-2 border rounded w-full"})]})]}),s.jsxs("div",{className:"mt-6 flex justify-end space-x-3 space-x-reverse",children:[s.jsx("button",{onClick:d,className:"px-4 py-2 bg-gray-200 rounded",children:"إلغاء"}),s.jsx("button",{onClick:_,disabled:!!H,className:`px-4 py-2 rounded ${H?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"}`,children:"حفظ"})]})]})})},nx=()=>{const{products:u,saveProducts:d,addNotification:m}=yt(),[o,p]=A.useState(!1),[D,N]=A.useState(null),[O,C]=A.useState(""),[R,E]=A.useState(""),[X,L]=A.useState("all"),[Y,K]=A.useState(new Set),[T,H]=A.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},type:"warning"});A.useEffect(()=>{let h="",_=Date.now();const Z=W=>{const g=Date.now();if(g-_>100&&(h=""),_=g,W.key==="Enter"&&h.length>0){W.preventDefault(),o?E(h):C(h),h="";return}W.target instanceof HTMLElement&&W.target.tagName!=="INPUT"&&W.target.tagName!=="TEXTAREA"&&W.key.length===1&&(h+=W.key)};return document.addEventListener("keypress",Z),()=>document.removeEventListener("keypress",Z)},[o]),A.useEffect(()=>{const _=lr(Z=>{o?E(Z):C(Z)});return()=>{_&&_()}},[o]);const S=(h,_,Z,W="warning")=>{H({isOpen:!0,title:h,message:_,onConfirm:Z,type:W})},$=()=>{H(h=>({...h,isOpen:!1}))},J=async(h,_)=>{await G(h,_)},G=async(h,_)=>{_?(await d([h,...u]),m("تمت إضافة المنتج بنجاح")):(await d(u.map(Z=>Z.id===h.id?h:Z)),m("تم تحديث المنتج بنجاح"))},te=async h=>{const _=u.find(Z=>Z.id===h);_&&S("حذف المنتج",`هل أنت متأكد من حذف المنتج "${_.name}"؟ لا يمكن التراجع عن هذا الإجراء.`,async()=>{await d(u.filter(Z=>Z.id!==h)),m("تم حذف المنتج","success"),$()},"danger")},ue=async()=>{if(Y.size===0){m("لم يتم تحديد أي منتجات للحذف","error");return}S("حذف المنتجات المحددة",`هل أنت متأكد من حذف ${Y.size} منتج؟ لا يمكن التراجع عن هذا الإجراء.`,async()=>{await d(u.filter(h=>!Y.has(h.id))),m(`تم حذف ${Y.size} منتج`,"success"),K(new Set),$()},"danger")},ye=h=>{const _=`
            <div class="barcode-label">
                <svg class="barcode-svg" jsbarcode-value="${h.barcode}" jsbarcode-format="CODE128" jsbarcode-width="2" jsbarcode-height="60" jsbarcode-displayvalue="false" jsbarcode-fontsize="12"></svg>
                <div class="barcode-text">${h.barcode} - ${h.name}</div>
            </div>
        `,Z=`
            @page {
                size: 58mm 35mm portrait;
                margin: 0;
            }
            @media print {
                html, body {
                    width: 58mm !important;
                    height: 35mm !important;
                    margin: 0 !important;
                    padding: 0 !important;
                    overflow: hidden !important;
                    font-family: 'Cairo', Arial, sans-serif;
                }
                * {
                    box-sizing: border-box;
                }
            }
            .barcode-label {
                width: 58mm;
                height: 35mm;
                padding: 1mm;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                text-align: center;
                background: white;
            }
            .barcode-svg {
                width: 56mm !important;
                height: 28mm !important;
                margin: 0 !important;
                padding: 0 !important;
                display: block !important;
            }
            .barcode-text {
                font-size: 12px;
                font-weight: bold;
                line-height: 1;
                margin: -20px 0 0 0;
                padding: 0;
                text-align: center;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
                max-width: 56mm;
            }
        `,W=window.open("","_blank");W&&(W.document.write(`
                <html>
                    <head>
                        <meta charset="UTF-8">
                        <title>ملصق باركود - ${h.name}</title>
                        <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
                        <style>${Z}</style>
                    </head>
                    <body>
                        ${_}
                        <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"><\/script>
                        <script>
                            try {
                                JsBarcode(".barcode-svg").init();
                                setTimeout(() => {
                                    window.print();
                                    window.close();
                                }, 500);
                            } catch (e) {
                                console.error('JsBarcode Error:', e);
                                document.body.innerHTML = '<div style="padding:10px;text-align:center;">خطأ في توليد الباركود</div>';
                                setTimeout(() => window.close(), 2000);
                            }
                        <\/script>
                    </body>
                </html>
            `),W.document.close())},he=()=>{if(Y.size===0){m("لم يتم تحديد أي منتجات للطباعة","error");return}const _=u.filter(g=>Y.has(g.id)).map(g=>`
            <div class="barcode-item">
                <svg class="barcode-svg" jsbarcode-value="${g.barcode}" jsbarcode-format="CODE128" jsbarcode-width="2" jsbarcode-height="60" jsbarcode-displayvalue="false" jsbarcode-fontsize="12"></svg>
                <div class="barcode-text">${g.barcode} - ${g.name}</div>
            </div>
        `).join(""),Z=`
            @page {
                size: 58mm auto;
                margin: 0;
            }
            @media print {
                html, body {
                    width: 58mm !important;
                    margin: 0 !important;
                    padding: 0 !important;
                    font-family: 'Cairo', Arial, sans-serif;
                }
                * {
                    box-sizing: border-box;
                }
            }
            body {
                font-family: 'Cairo', Arial, sans-serif;
                display: flex;
                flex-direction: column;
                gap: 0mm;
            }
            .barcode-item {
                width: 58mm;
                height: 35mm;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                text-align: center;
                page-break-inside: avoid;
                padding: 1mm;
                background: white;
                border-bottom: 1px dashed #ccc;
            }
            .barcode-item:last-child {
                border-bottom: none;
            }
            .barcode-svg {
                width: 56mm !important;
                height: 28mm !important;
                margin: 0 !important;
                padding: 0 !important;
                display: block !important;
            }
            .barcode-text {
                font-size: 12px;
                font-weight: bold;
                line-height: 1;
                margin: -20px 0 0 0;
                padding: 0;
                text-align: center;
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
                max-width: 56mm;
            }
        `,W=window.open("","_blank");W&&(W.document.write(`
                <html>
                    <head>
                        <meta charset="UTF-8">
                        <title>طباعة باركودات متعددة</title>
                        <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
                        <style>${Z}</style>
                    </head>
                    <body>
                        ${_}
                        <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"><\/script>
                        <script>
                            try {
                                JsBarcode(".barcode-svg").init();
                                setTimeout(() => {
                                    window.print();
                                    window.close();
                                }, 500);
                            } catch (e) {
                                console.error('JsBarcode Error:', e);
                                window.close();
                            }
                        <\/script>
                    </body>
                </html>
            `),W.document.close())},ve=h=>{const _=new Set(Y);_.has(h)?_.delete(h):_.add(h),K(_)},Ue=h=>{h.target.checked?K(new Set(k.map(_=>_.id))):K(new Set)},k=A.useMemo(()=>u.filter(h=>{if(X==="lowStock")return h.quantity<10;if(X==="expiringSoon"&&h.expiryDate){const _=new Date,Z=new Date(h.expiryDate),W=Math.ceil((Z.getTime()-_.getTime())/(1e3*3600*24));return W<=30&&W>=0}return!0}).filter(h=>h.name.toLowerCase().includes(O.toLowerCase())||h.barcode.includes(O)||h.supplier.toLowerCase().includes(O.toLowerCase())),[u,O,X]);return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"إدارة المنتجات"}),s.jsxs("button",{onClick:()=>{N(null),p(!0)},className:"flex items-center bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700 transition",children:[s.jsx(Ga,{className:"h-5 w-5 me-2"}),"إضافة منتج جديد"]})]}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative md:col-span-2",children:[s.jsx("input",{type:"text",placeholder:"ابحث بالاسم، الباركود، المورد...",className:"w-full p-3 ps-10 border rounded-lg",value:O,onChange:h=>C(h.target.value)}),s.jsx(Za,{className:"absolute top-1/2 -translate-y-1/2 right-3 h-5 w-5 text-gray-400"}),s.jsx("button",{onClick:tr,className:"absolute top-1/2 -translate-y-1/2 left-3 text-gray-500 hover:text-blue-600",children:s.jsx(er,{className:"h-5 w-5"})})]}),s.jsxs("select",{value:X,onChange:h=>L(h.target.value),className:"w-full p-3 border rounded-lg",children:[s.jsx("option",{value:"all",children:"كل المنتجات"}),s.jsx("option",{value:"lowStock",children:"مخزون منخفض"}),s.jsx("option",{value:"expiringSoon",children:"قرب انتهاء الصلاحية"})]})]})}),s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:["عدد المنتجات: ",s.jsx("span",{className:"font-bold text-blue-600",children:k.length})]}),Y.size>0&&s.jsxs("span",{className:"text-sm text-green-600",children:["محدد: ",s.jsx("span",{className:"font-bold",children:Y.size})]})]}),s.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:Y.size>0&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:he,className:"flex items-center bg-green-500 text-white px-3 py-2 rounded-lg shadow hover:bg-green-600 transition text-sm",children:[s.jsx(tm,{className:"h-4 w-4 me-1"}),"طباعة المحدد (",Y.size,")"]}),s.jsxs("button",{onClick:ue,className:"flex items-center bg-red-500 text-white px-3 py-2 rounded-lg shadow hover:bg-red-600 transition text-sm",children:[s.jsx(Ol,{className:"h-4 w-4 me-1"}),"حذف المحدد (",Y.size,")"]})]})})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-x-auto",children:s.jsxs("table",{className:"w-full text-center",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4",children:s.jsx("input",{type:"checkbox",onChange:Ue,checked:k.length>0&&Y.size===k.length,className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"})}),s.jsx("th",{className:"p-4 font-semibold",children:"اسم المنتج"}),s.jsx("th",{className:"p-4 font-semibold",children:"سعر البيع"}),s.jsx("th",{className:"p-4 font-semibold",children:"الكمية"}),s.jsx("th",{className:"p-4 font-semibold",children:"المورد"}),s.jsx("th",{className:"p-4 font-semibold",children:"الباركود"}),s.jsx("th",{className:"p-4 font-semibold",children:"إجراءات"})]})}),s.jsxs("tbody",{children:[k.map(h=>s.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[s.jsx("td",{className:"p-4",children:s.jsx("input",{type:"checkbox",checked:Y.has(h.id),onChange:()=>ve(h.id),className:"w-5 h-5 text-blue-600 rounded focus:ring-blue-500"})}),s.jsx("td",{className:"p-4 font-medium",children:h.name}),s.jsxs("td",{className:"p-4",children:[h.price.toFixed(2)," ج.م"]}),s.jsxs("td",{className:`p-4 font-bold ${h.quantity<10?"text-red-500":"text-green-600"}`,children:[h.quantity," ",h.unit.name]}),s.jsx("td",{className:"p-4",children:h.supplier}),s.jsx("td",{className:"p-4 font-mono text-sm",children:h.barcode}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex justify-center items-center space-x-2 space-x-reverse",children:[s.jsx("button",{onClick:()=>{N(h),p(!0)},title:"تعديل",className:"text-blue-600 hover:text-blue-800 p-1",children:s.jsx(sl,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>ye(h),title:"طباعة باركود",className:"text-green-600 hover:text-green-800 p-1",children:s.jsx(tm,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>te(h.id),title:"حذف",className:"text-red-600 hover:text-red-800 p-1",children:s.jsx(Ol,{className:"h-5 w-5"})})]})})]},h.id)),k.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"text-center p-8 text-gray-500",children:"لا توجد منتجات مطابقة للبحث"})})]})]})}),o&&s.jsx(sx,{product:D,onClose:()=>{p(!1),E("")},onSave:J,scannedBarcode:R}),s.jsx(dm,{isOpen:T.isOpen,title:T.title,message:T.message,onConfirm:T.onConfirm,onCancel:$,type:T.type,confirmText:T.type==="danger"?"حذف":"تأكيد",cancelText:"إلغاء"})]})},ix=(u,d)=>{const m=u.items.map((E,X)=>`
        <tr>
            <td>${X+1}</td>
            <td class="product-name">${E.product.name}</td>
            <td>${E.quantity}</td>
            <td>${E.price.toFixed(2)}</td>
            <td>${(E.price*E.quantity).toFixed(2)}</td>
        </tr>
    `).join(""),o=()=>typeof u.discount=="number"?`${u.discount}%`:u.discount.type==="percentage"?`${u.discount.value}%`:`${u.discount.value.toFixed(2)} ج.م`,p=()=>typeof u.tax=="number"?`${u.tax}%`:u.tax.type==="percentage"?`${u.tax.value}%`:`${u.tax.value.toFixed(2)} ج.م`,D=d.customInvoiceBarcode?`
        <div class="barcode-area">
            <p>${d.barcodeText||""}</p>
            <img src="${d.customInvoiceBarcode}" alt="Barcode"/>
        </div>
    `:"",N=new Date(u.date),O=N.toLocaleDateString("ar-EG"),C=u.time||N.toLocaleTimeString("ar-EG",{hour:"2-digit",minute:"2-digit",hour12:!0});let R="";return u.customer?R=`العميل: ${u.customer.name}`:u.paymentType==="نقدي"?R="عميل نقدي":u.paymentType==="آجل"&&(R="عميل آجل"),`
        <div class="invoice-box">
            <div class="header">
                <h3>${d.companyName||""}</h3>
                <p>${d.companyAddress||""}</p>
                <p>${d.companyPhone||""}</p>
                <p>التاريخ: ${O}</p>
                <p>الوقت: ${C}</p>
                <p>رقم الفاتورة: ${u.id}</p>
                ${R?`<p>${R}</p>`:""}
            </div>
            <h3 class="title">فاتورة بيع</h3>
            <table class="items-table">
                <thead>
                    <tr>
                        <th>#</th>
                        <th class="product-name">المنتج</th>
                        <th>الكمية</th>
                        <th>السعر</th>
                        <th>الإجمالي</th>
                    </tr>
                </thead>
                <tbody>${m}</tbody>
            </table>
            <div class="totals-section">
                <div><span>المجموع:</span> <span>${u.subtotal.toFixed(2)}</span></div>
                <div><span>الخصم:</span> <span>${o()}</span></div>
                <div><span>الضريبة:</span> <span>${p()}</span></div>
                <div class="final-total"><span>الإجمالي النهائي:</span> <span>${u.total.toFixed(2)}</span></div>
            </div>
            <div class="payment-method">طريقة الدفع: ${u.paymentType}</div>
            <div class="footer">
                ${D}
                <p>${d.thankYouMessage||""}</p>
            </div>
        </div>
    `},fm=(u,d)=>{const m=ix(u,d),o=`
        @page { 
            size: 58mm auto;
            margin: 0;
        }
        @media print {
            html, body {
                width: 58mm !important;
                margin: 0 !important;
                padding: 0 !important;
                direction: ltr; /* Force LTR on page for Edge bug */
            }
            * {
                box-sizing: border-box;
            }
        }
        .invoice-box {
            font-family: 'Cairo', sans-serif;
            width: 100%;
            padding: 1.5mm;
            direction: rtl; /* Apply RTL to the content itself */
            font-weight: bold; /* Make all text bold */
        }
        .header, .footer, .title { text-align: center; }
        .header h3 { margin: 0; font-size: 12px; }
        .header p { margin: 0; font-size: 9px; }
        .title { font-size: 11px; margin: 2mm 0; }
        .items-table { width: 100%; border-collapse: collapse; font-size: 9px; }
        .items-table th, .items-table td { padding: 1mm; text-align: center; border-bottom: 1px dashed #999; }
        .items-table th { background-color: #eee; border-top: 1px dashed #999; }
        .items-table .product-name { text-align: center; }
        .totals-section { margin-top: 2mm; text-align: center; }
        .totals-section div { font-size: 9px; margin-bottom: 0.5mm; }
        .totals-section .final-total { font-size: 11px; padding-top: 1mm; border-top: 1px solid #000; margin-top: 1mm; }
        .payment-method { text-align: center; font-size: 9px; margin-top: 2mm; }
        .footer { font-size: 9px; margin-top: 2mm; text-align: center; }
        .barcode-area { margin-top: 2mm; }
        .barcode-area p { margin: 0 0 1mm 0; font-size: 8px; }
        .barcode-area img { max-width: 100%; height: auto; max-height: 50px; }
    `,p=window.open("","_blank");p&&(p.document.write(`
            <html lang="ar" dir="rtl">
                <head>
                    <meta charset="UTF-8">
                    <title>فاتورة بيع</title>
                    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
                    <style>${o}</style>
                </head>
                <body>
                    ${m}
                </body>
            </html>
        `),p.document.close(),setTimeout(()=>{p.print(),p.close()},500))},cx=({invoice:u,onClose:d,autoPrint:m=!1})=>{const{settings:o}=yt();return A.useEffect(()=>{m&&(fm(u,o),d())},[u,o,m,d]),null},ux=({customer:u,onClose:d,onSave:m})=>{const[o,p]=A.useState(u||{id:"",name:"",phone:"",address:"",notes:"",debt:0,invoiceCount:0,lastTransaction:""}),D=!u,N=C=>{p({...o,[C.target.name]:C.target.value})},O=async()=>{if(!o.name)return;let C={...o};D&&(C.id=`c${Date.now()}`),await m(C,D),d()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:D?"إضافة عميل جديد":"تعديل بيانات العميل"}),s.jsx("button",{onClick:d,children:s.jsx(kt,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"cust-name",className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم العميل"}),s.jsx("input",{type:"text",id:"cust-name",name:"name",value:o.name,onChange:N,placeholder:"الاسم",className:"p-2 border rounded w-full",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"cust-phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم الموبايل"}),s.jsx("input",{type:"text",id:"cust-phone",name:"phone",value:o.phone,onChange:N,placeholder:"رقم الموبايل",className:"p-2 border rounded w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"cust-address",className:"block text-sm font-medium text-gray-700 mb-1",children:"العنوان"}),s.jsx("input",{type:"text",id:"cust-address",name:"address",value:o.address,onChange:N,placeholder:"العنوان",className:"p-2 border rounded w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"cust-notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"ملاحظات"}),s.jsx("textarea",{id:"cust-notes",name:"notes",value:o.notes,onChange:N,placeholder:"ملاحظات",className:"p-2 border rounded w-full h-24"})]})]}),s.jsxs("div",{className:"mt-6 flex justify-end space-x-3 space-x-reverse",children:[s.jsx("button",{onClick:d,className:"px-4 py-2 bg-gray-200 rounded",children:"إلغاء"}),s.jsx("button",{onClick:O,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"حفظ"})]})]})})},rx=()=>{const{products:u,saveProducts:d,customers:m,saveCustomers:o,invoices:p,saveInvoices:D,addNotification:N,currentUser:O}=yt(),[C,R]=A.useState([]),[E,X]=A.useState(""),[L,Y]=A.useState([]),[K,T]=A.useState(null),[H,S]=A.useState(""),[$,J]=A.useState("percentage"),[G,te]=A.useState(""),[ue,ye]=A.useState("percentage"),[he,ve]=A.useState(!1),[Ue,k]=A.useState(null),[h,_]=A.useState(0),[Z,W]=A.useState(0),[g,B]=A.useState(""),V=A.useCallback(q=>{if(q.quantity<=0){N(`المنتج ${q.name} غير متوفر في المخزون.`,"error");return}const fe=C.findIndex(be=>be.product.id===q.id);if(fe>-1){const be=[...C];be[fe].quantity<q.quantity?(be[fe].quantity+=1,R(be)):N(`لا توجد كمية كافية من ${q.name}`,"error")}else R([...C,{product:q,quantity:1,price:q.price,unit:q.unit}]);X(""),Y([])},[C,N]);A.useEffect(()=>{let q="",fe=Date.now();const be=pe=>{const We=Date.now();if(We-fe>100&&(q=""),fe=We,pe.key==="Enter"&&q.length>0){pe.preventDefault();const Ze=u.find(Ve=>Ve.barcode===q);Ze?(V(Ze),N(`تمت إضافة ${Ze.name} إلى الفاتورة`)):N(`لم يتم العثور على منتج بالباركود: ${q}`,"error"),q="";return}pe.target instanceof HTMLElement&&pe.target.tagName!=="INPUT"&&pe.target.tagName!=="TEXTAREA"&&pe.target.tagName!=="SELECT"&&pe.key.length===1&&(q+=pe.key)};return document.addEventListener("keypress",be),()=>document.removeEventListener("keypress",be)},[u,V,N]),A.useEffect(()=>{Y(E?u.filter(q=>q.name.toLowerCase().includes(E.toLowerCase())||q.barcode.includes(E)):[])},[E,u]),A.useEffect(()=>{const q=lr(fe=>{const be=u.find(pe=>pe.barcode===fe);be?(V(be),N(`تمت إضافة ${be.name} إلى الفاتورة`)):N(`لم يتم العث��ر على منتج بالباركود: ${fe}`,"error")});return()=>q&&q()},[u,V,N]),A.useEffect(()=>{const q=C.reduce((Ze,Ve)=>Ze+Ve.price*Ve.quantity,0);_(q);const fe=$==="percentage"?q*((parseFloat(H)||0)/100):parseFloat(H)||0,be=q-fe,pe=ue==="percentage"?be*((parseFloat(G)||0)/100):parseFloat(G)||0,We=be+pe;W(We)},[C,H,$,G,ue]);const ne=(q,fe)=>{const be=u.find(pe=>pe.id===q);if(be&&fe>be.quantity){N(`الكمية المطلوبة أكبر من المخزون المتاح (${be.quantity})`,"error"),R(C.map(pe=>pe.product.id===q?{...pe,quantity:be.quantity}:pe));return}fe<=0?re(q):R(C.map(pe=>pe.product.id===q?{...pe,quantity:fe}:pe))},re=q=>{R(C.filter(fe=>fe.product.id!==q))},we=async(q,fe)=>{if(fe){const be=[q,...m];await o(be),N("تمت إضافة العميل بنجاح"),T(q)}},oe=async(q,fe)=>{if(C.length===0){N("لا يمكن إنشاء فاتورة فارغة","error");return}if(q===zl.Cash&&(parseFloat(g)||0)<Z){N("المبلغ المدفوع أقل من الإجمالي. استخدم دفع جزئي أو أكمل المبلغ.","error");return}const be={id:`INV-${Date.now()}`,date:new Date().toLocaleDateString("en-CA"),time:new Date().toLocaleTimeString("ar-EG"),customer:K,items:C,subtotal:h,discount:{type:$,value:parseFloat(H)||0},tax:{type:ue,value:parseFloat(G)||0},total:Z,paymentType:q,amountPaid:q===zl.Cash?Z:fe||0,createdById:O==null?void 0:O.id,createdByName:O==null?void 0:O.name},pe=[...u];if(be.items.forEach(We=>{const Ze=pe.findIndex(Ve=>Ve.id===We.product.id);Ze>-1&&(pe[Ze].quantity-=We.quantity)}),await d(pe),K){const We=q===zl.Credit||q===zl.Partial?Z-(fe||0):0,Ze=m.map(Ve=>Ve.id===K.id?{...Ve,debt:Ve.debt+We,invoiceCount:Ve.invoiceCount+1,lastTransaction:be.date}:Ve);await o(Ze)}await D([be,...p]),N(`تم إنشاء الفاتورة ${be.id} بنجاح`),R([]),T(null),S(""),te(""),B(""),k(be)},Q=parseFloat(g)||0,ce=Math.max(0,Z-Q),ee=Math.max(0,Q-Z);return s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 h-[calc(100vh-100px)]",children:[s.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow-md p-6 flex flex-col",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"الفاتورة الحالية"}),s.jsxs("div",{className:"text-lg font-semibold",children:["رقم الفاتورة: ",s.jsx("span",{className:"font-mono",children:`INV-${Date.now()}`})]})]}),s.jsxs("div",{className:"relative mb-4",children:[s.jsx("input",{type:"text",placeholder:"ابحث عن منتج بالإسم أو الباركود...",value:E,onChange:q=>X(q.target.value),className:"w-full p-3 ps-10 border rounded-lg"}),s.jsx(Za,{className:"absolute top-1/2 -translate-y-1/2 right-3 h-5 w-5 text-gray-400"}),s.jsx("button",{onClick:tr,title:"مسح باركود",className:"absolute top-1/2 -translate-y-1/2 left-3 text-gray-500 hover:text-blue-600",children:s.jsx(er,{className:"h-5 w-5"})}),L.length>0&&s.jsx("div",{className:"absolute w-full bg-white border rounded-lg mt-1 z-10 max-h-60 overflow-y-auto shadow-lg",children:L.map(q=>s.jsxs("div",{onClick:()=>V(q),className:"p-3 hover:bg-blue-100 cursor-pointer",children:[q.name," - ",s.jsx("span",{className:"font-mono",children:q.barcode})]},q.id))})]}),s.jsx("div",{className:"flex-grow overflow-y-auto border-y py-2",children:s.jsxs("table",{className:"w-full text-right",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"p-2 font-semibold",children:"المنتج"}),s.jsx("th",{className:"p-2 font-semibold",children:"الكمية"}),s.jsx("th",{className:"p-2 font-semibold",children:"السعر"}),s.jsx("th",{className:"p-2 font-semibold",children:"الإجمالي"}),s.jsx("th",{className:"p-2 font-semibold"})]})}),s.jsx("tbody",{children:C.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"text-center p-8 text-gray-500",children:"لا توجد منتجات في الفاتورة"})}):C.map(q=>s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"p-2",children:q.product.name}),s.jsx("td",{className:"p-2",children:s.jsx("input",{type:"number",value:q.quantity,onChange:fe=>ne(q.product.id,parseInt(fe.target.value)||1),className:"w-20 text-center border rounded"})}),s.jsx("td",{className:"p-2",children:q.price.toFixed(2)}),s.jsx("td",{className:"p-2",children:(q.price*q.quantity).toFixed(2)}),s.jsx("td",{className:"p-2",children:s.jsx("button",{onClick:()=>re(q.product.id),className:"text-red-500 hover:text-red-700",children:s.jsx(Ol,{className:"h-5 w-5"})})})]},q.product.id))})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 flex flex-col justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold mb-4",children:"ملخص الطلب"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"font-semibold",children:"العميل:"}),s.jsxs("select",{value:(K==null?void 0:K.id)||"",onChange:q=>T(m.find(fe=>fe.id===q.target.value)||null),className:"w-full p-2 mt-1 border rounded-lg",children:[s.jsx("option",{value:"",children:"عميل نقدي (بدون تسجيل)"}),m.map(q=>s.jsxs("option",{value:q.id,children:[q.name," - ",q.phone]},q.id))]}),s.jsx("button",{onClick:()=>ve(!0),className:"text-blue-600 text-sm mt-1 hover:underline",children:"إضافة عميل جديد"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"الإجمالي الفرعي"}),s.jsxs("span",{children:[h.toFixed(2)," ج.م"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:"خصم"}),s.jsxs("div",{className:"flex items-center border rounded",children:[s.jsx("input",{type:"number",value:H,onChange:q=>S(q.target.value),placeholder:"0",className:"w-20 text-center p-1 rounded-s-md"}),s.jsx("button",{onClick:()=>J($==="percentage"?"fixed":"percentage"),className:"bg-gray-200 p-1 px-2 rounded-e-md",children:$==="percentage"?"%":"ج.م"})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:"ضريبة"}),s.jsxs("div",{className:"flex items-center border rounded",children:[s.jsx("input",{type:"number",value:G,onChange:q=>te(q.target.value),placeholder:"0",className:"w-20 text-center p-1 rounded-s-md"}),s.jsx("button",{onClick:()=>ye(ue==="percentage"?"fixed":"percentage"),className:"bg-gray-200 p-1 px-2 rounded-e-md",children:ue==="percentage"?"%":"ج.م"})]})]}),s.jsx("hr",{}),s.jsxs("div",{className:"flex justify-between text-2xl font-bold text-blue-600",children:[s.jsx("span",{children:"الإجمالي النهائي"}),s.jsxs("span",{children:[Z.toFixed(2)," ج.م"]})]}),s.jsxs("div",{className:"mt-4 rounded-xl border border-gray-200 bg-white shadow-sm",children:[s.jsxs("div",{className:"px-4 py-3 border-b flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center",children:s.jsx(La,{className:"h-5 w-5 text-green-600"})}),s.jsx("h4",{className:"text-sm font-semibold text-gray-800",children:"الدفع النقدي"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>B(Z.toFixed(2)),className:"text-xs bg-green-50 hover:bg-green-100 text-green-700 px-2 py-1 rounded border border-green-200",children:"مطابقة الإجمالي"}),s.jsx("button",{onClick:()=>B(""),className:"text-xs bg-gray-50 hover:bg-gray-100 text-gray-700 px-2 py-1 rounded border border-gray-200",children:"مسح"})]})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("label",{className:"block text-sm font-medium mb-2 text-gray-700",children:"المبلغ المدفوع"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",value:g,onChange:q=>B(q.target.value),placeholder:"0.00",className:"w-full p-3 pe-16 border rounded-lg focus:ring-2 focus:ring-green-200 focus:border-green-400 outline-none"}),s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm select-none",children:"ج.م"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-4",children:[s.jsxs("div",{className:"rounded-lg border border-orange-200 bg-orange-50 p-3",children:[s.jsx("div",{className:"text-xs text-orange-600",children:"الباقي على العميل"}),s.jsxs("div",{className:"text-lg font-bold text-orange-700",children:[ce.toFixed(2)," ج.م"]})]}),s.jsxs("div",{className:"rounded-lg border border-green-200 bg-green-50 p-3",children:[s.jsx("div",{className:"text-xs text-green-700",children:"الباقي للعميل (صرف)"}),s.jsxs("div",{className:"text-lg font-bold text-green-700",children:[ee.toFixed(2)," ج.م"]})]})]})]})]})]})]}),s.jsxs("div",{className:"space-y-3 mt-6",children:[s.jsx("button",{onClick:()=>oe(zl.Cash),className:"w-full bg-green-500 text-white font-bold py-3 rounded-lg text-lg hover:bg-green-600 transition",children:"دفع نقدي"}),s.jsx("button",{onClick:()=>{if(!K){N("الرجاء اختيار عميل للبيع الآجل","error");return}oe(zl.Credit)},className:"w-full bg-orange-500 text-white font-bold py-3 rounded-lg text-lg hover:bg-orange-600 transition disabled:bg-gray-400",disabled:!K,children:"دفع آجل"}),s.jsx("button",{onClick:()=>{if(!K){N("الرجاء اختيار عميل للدفع الجزئي","error");return}const q=prompt("الرجاء إدخال المبلغ المدفوع:","0");q!==null&&oe(zl.Partial,parseFloat(q))},className:"w-full bg-yellow-500 text-white font-bold py-3 rounded-lg text-lg hover:bg-yellow-600 transition disabled:bg-gray-400",disabled:!K,children:"دفع جزئي"})]})]}),he&&s.jsx(ux,{customer:null,onClose:()=>ve(!1),onSave:we}),Ue&&s.jsx(cx,{invoice:Ue,onClose:()=>k(null),autoPrint:!0})]})},ox=({customer:u,onClose:d,onSettle:m})=>{const[o,p]=A.useState(u.debt.toString()),D=()=>{const N=parseFloat(o);!isNaN(N)&&N>0&&N<=u.debt?(m(N),d()):alert("الرجاء إدخال مبلغ صحيح.")};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold",children:["تسديد ديون ",u.name]}),s.jsx("button",{onClick:d,children:s.jsx(kt,{className:"h-6 w-6"})})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"mb-4",children:["الدين الحالي: ",s.jsxs("span",{className:"font-bold text-red-600",children:[u.debt.toFixed(2)," ج.م"]})]}),s.jsx("label",{htmlFor:"settle-amount",className:"block text-sm font-medium text-gray-700 mb-1",children:"المبلغ المسدد"}),s.jsx("input",{type:"number",id:"settle-amount",value:o,onChange:N=>p(N.target.value),className:"p-2 border rounded w-full",max:u.debt,min:"0.01",step:"0.01"})]}),s.jsxs("div",{className:"mt-6 flex justify-end space-x-3 space-x-reverse",children:[s.jsx("button",{onClick:d,className:"px-4 py-2 bg-gray-200 rounded",children:"إلغاء"}),s.jsx("button",{onClick:D,className:"px-4 py-2 bg-green-600 text-white rounded",children:"تسديد"})]})]})})},dx=({customer:u,onClose:d,onSave:m})=>{const[o,p]=A.useState(u||{id:"",name:"",phone:"",address:"",notes:"",debt:0,invoiceCount:0,lastTransaction:""}),D=!u,N=C=>{p({...o,[C.target.name]:C.target.value})},O=async()=>{let C={...o};D&&(C.id=`c${Date.now()}`),await m(C,D),d()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:D?"إضافة عميل جديد":"تعديل بيانات العميل"}),s.jsx("button",{onClick:d,children:s.jsx(kt,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"الاسم"}),s.jsx("input",{type:"text",id:"name",name:"name",value:o.name,onChange:N,placeholder:"الاسم",className:"p-2 border rounded w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم الموبايل"}),s.jsx("input",{type:"text",id:"phone",name:"phone",value:o.phone,onChange:N,placeholder:"رقم الموبايل",className:"p-2 border rounded w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"العنوان"}),s.jsx("input",{type:"text",id:"address",name:"address",value:o.address,onChange:N,placeholder:"العنوان",className:"p-2 border rounded w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700 mb-1",children:"ملاحظات"}),s.jsx("textarea",{id:"notes",name:"notes",value:o.notes,onChange:N,placeholder:"ملاحظات",className:"p-2 border rounded w-full h-24"})]})]}),s.jsxs("div",{className:"mt-6 flex justify-end space-x-3 space-x-reverse",children:[s.jsx("button",{onClick:d,className:"px-4 py-2 bg-gray-200 rounded",children:"إلغاء"}),s.jsx("button",{onClick:O,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"حفظ"})]})]})})},fx=()=>{const{customers:u,saveCustomers:d,addNotification:m}=yt(),[o,p]=A.useState(!1),[D,N]=A.useState(null),[O,C]=A.useState(null),[R,E]=A.useState(""),X=async(T,H)=>{H?(await d([T,...u]),m("تمت إضافة العميل بنجاح")):(await d(u.map(S=>S.id===T.id?T:S)),m("تم تحديث بيانات العميل"))},L=async T=>{const H=u.find(S=>S.id===T);if(H&&H.debt>0){m("لا يمكن حذف عميل عليه ديون.","error");return}window.confirm("هل أنت متأكد من حذف هذا العميل؟")&&(await d(u.filter(S=>S.id!==T)),m("تم حذف العميل","error"))},Y=async T=>{if(O){const H=O.debt-T;await d(u.map(S=>S.id===O.id?{...S,debt:H}:S)),m(`تم تسديد مبلغ ${T.toFixed(2)} ج.م بنجاح.`),C(null)}},K=A.useMemo(()=>u.filter(T=>T.name.toLowerCase().includes(R.toLowerCase())||T.phone.includes(R)),[u,R]);return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"إدارة العملاء"}),s.jsxs("button",{onClick:()=>{N(null),p(!0)},className:"flex items-center bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700 transition",children:[s.jsx(Ga,{className:"h-5 w-5 me-2"}),"إضافة عميل جديد"]})]}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"ابحث بالاسم أو رقم الهاتف...",className:"w-full p-3 ps-10 border rounded-lg",value:R,onChange:T=>E(T.target.value)}),s.jsx(Za,{className:"absolute top-1/2 -translate-y-1/2 right-3 h-5 w-5 text-gray-400"})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-x-auto",children:s.jsxs("table",{className:"w-full text-right",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 font-semibold",children:"الاسم"}),s.jsx("th",{className:"p-4 font-semibold",children:"رقم الهاتف"}),s.jsx("th",{className:"p-4 font-semibold",children:"العنوان"}),s.jsx("th",{className:"p-4 font-semibold",children:"الرصيد (الديون)"}),s.jsx("th",{className:"p-4 font-semibold",children:"آخر معاملة"}),s.jsx("th",{className:"p-4 font-semibold",children:"إجراءات"})]})}),s.jsx("tbody",{children:K.map(T=>s.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[s.jsx("td",{className:"p-4",children:T.name}),s.jsx("td",{className:"p-4",style:{direction:"ltr",textAlign:"right"},children:T.phone}),s.jsx("td",{className:"p-4",children:T.address}),s.jsxs("td",{className:`p-4 font-bold ${T.debt>0?"text-red-600":"text-green-600"}`,children:[T.debt.toFixed(2)," ج.م"]}),s.jsx("td",{className:"p-4",children:T.lastTransaction||"لا يوجد"}),s.jsxs("td",{className:"p-4 flex space-x-2 space-x-reverse",children:[s.jsx("button",{onClick:()=>{N(T),p(!0)},className:"text-blue-600 hover:text-blue-800",children:s.jsx(sl,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>L(T.id),className:"text-red-600 hover:text-red-800",children:s.jsx(Ol,{className:"h-5 w-5"})}),T.debt>0&&s.jsxs("button",{onClick:()=>C(T),className:"text-sm bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 flex items-center",children:[s.jsx(La,{className:"h-4 w-4 me-1"}),"تسديد"]})]})]},T.id))})]})}),o&&s.jsx(dx,{customer:D,onClose:()=>p(!1),onSave:X}),O&&s.jsx(ox,{customer:O,onClose:()=>C(null),onSettle:Y})]})},mx=()=>{const{invoices:u,settings:d,products:m,saveProducts:o,customers:p,saveCustomers:D,saveInvoices:N,addNotification:O}=yt(),[C,R]=A.useState(""),[E,X]=A.useState({open:!1,invoice:null,quantities:{},refundType:"cash",alreadyReturned:{}}),L=S=>{const $={...S.returns||{}},J={};S.items.forEach(G=>{J[G.product.id]=0}),X({open:!0,invoice:S,quantities:J,refundType:S.customer?"debt":"cash",alreadyReturned:$})},Y=()=>X({open:!1,invoice:null,quantities:{},refundType:"cash",alreadyReturned:{}}),K=async()=>{const S=E.invoice;if(!S)return;const $=S.items.map(h=>({it:h,qty:Math.min(Math.max(0,E.quantities[h.product.id]||0),Math.max(0,h.quantity-(E.alreadyReturned[h.product.id]||0)))})).filter(h=>h.qty>0);if($.length===0){O("لم يتم اختيار أي كمية للمرتجع","error");return}const J=$.reduce((h,_)=>h+_.it.price*_.qty,0),G=[...m];if($.forEach(h=>{const _=G.findIndex(Z=>Z.id===h.it.product.id);_>-1&&(G[_].quantity+=h.qty)}),await o(G),S.customer&&E.refundType==="debt"){const h=p.map(_=>{if(_.id!==S.customer.id)return _;const Z=Math.max(0,_.debt-J);return{..._,debt:Z,lastTransaction:new Date().toLocaleDateString("en-CA")}});await D(h)}const te={...S.returns||{}};$.forEach(h=>{te[h.it.product.id]=(te[h.it.product.id]||0)+h.qty});const ue=Math.max(0,S.subtotal-J),ye=S.discount.type==="percentage"?ue*(S.discount.value/100):S.discount.value,he=Math.max(0,ue-ye),ve=S.tax.type==="percentage"?he*(S.tax.value/100):S.tax.value,Ue=Math.max(0,he+ve),k={...S,returns:te,refundedAmount:(S.refundedAmount||0)+J,subtotal:ue,total:Ue};await N(u.map(h=>h.id===S.id?k:h)),O("تم تنفيذ المرتجع على نفس الفاتورة بنجاح"),Y()},T=S=>{fm(S,d)},H=A.useMemo(()=>u.filter(S=>{const $=S.customer?S.customer.name.toLowerCase():"عميل نقدي",J=C.toLowerCase();return S.id.toLowerCase().includes(J)||$.includes(J)||S.date.includes(J)}),[u,C]);return s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsx("h1",{className:"text-3xl font-bold",children:"سجل الفواتير"})}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"ابحث برقم الفاتورة، اسم العميل، أو التاريخ...",className:"w-full p-3 ps-10 border rounded-lg",value:C,onChange:S=>R(S.target.value)}),s.jsx(Za,{className:"absolute top-1/2 -translate-y-1/2 right-3 h-5 w-5 text-gray-400"})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-x-auto",children:s.jsxs("table",{className:"w-full text-right",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 font-semibold",children:"رقم الفاتورة"}),s.jsx("th",{className:"p-4 font-semibold",children:"التاريخ"}),s.jsx("th",{className:"p-4 font-semibold",children:"العميل"}),s.jsx("th",{className:"p-4 font-semibold",children:"الإجمالي"}),s.jsx("th",{className:"p-4 font-semibold",children:"حالة الدفع"}),s.jsx("th",{className:"p-4 font-semibold",children:"إجراءات"})]})}),s.jsxs("tbody",{children:[H.map(S=>s.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[s.jsxs("td",{className:"p-4 font-mono",children:[S.id,S.returns&&Object.values(S.returns).some($=>$>0)&&s.jsx("span",{className:"ms-2 px-2 py-1 text-xs font-semibold bg-red-100 text-red-700 rounded-full",children:"مرتجع"})]}),s.jsx("td",{className:"p-4",children:S.date}),s.jsx("td",{className:"p-4",children:S.customer?S.customer.name:"عميل نقدي"}),s.jsxs("td",{className:"p-4 font-bold",children:[S.total.toFixed(2)," ج.م"]}),s.jsx("td",{className:"p-4",children:s.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${S.paymentType==="نقدي"?"bg-green-100 text-green-800":S.paymentType==="آجل"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:S.paymentType})}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("button",{onClick:()=>T(S),className:"text-blue-600 hover:text-blue-800 flex items-center",children:[s.jsx(W0,{className:"h-5 w-5 me-2"})," طباعة"]}),s.jsx("button",{onClick:()=>L(S),className:"text-red-600 hover:text-red-800",children:"مرتجع"})]})})]},S.id)),H.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center p-8 text-gray-500",children:"لا توجد فواتير مطابقة للبحث"})})]})]})}),E.open&&E.invoice&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl",children:[s.jsx("div",{className:"p-4 border-b",children:s.jsxs("h3",{className:"text-xl font-bold",children:["مرتجع على الفاتورة ",E.invoice.id]})}),s.jsxs("div",{className:"p-4",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-right",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-2",children:"المنتج"}),s.jsx("th",{className:"p-2",children:"المباع"}),s.jsx("th",{className:"p-2",children:"المتاح للمرتجع"}),s.jsx("th",{className:"p-2",children:"كمية المرتجع"})]})}),s.jsx("tbody",{children:E.invoice.items.map(S=>{const $=S.quantity,J=E.alreadyReturned[S.product.id]||0,G=Math.max(0,$-J),te=E.quantities[S.product.id]||0;return s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"p-2",children:S.product.name}),s.jsx("td",{className:"p-2",children:$}),s.jsx("td",{className:"p-2",children:G}),s.jsx("td",{className:"p-2",children:s.jsx("input",{type:"number",className:"w-24 text-center border rounded",min:0,max:G,value:te,onChange:ue=>{const ye=Math.max(0,Math.min(G,parseInt(ue.target.value||"0")));X(he=>({...he,quantities:{...he.quantities,[S.product.id]:ye}}))},disabled:G===0})})]},S.product.id)})})]})}),s.jsxs("div",{className:"mt-4 flex items-center gap-6",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",id:"ret-cash",name:"refundType",checked:E.refundType==="cash",onChange:()=>X(S=>({...S,refundType:"cash"}))}),s.jsx("label",{htmlFor:"ret-cash",children:"استرجاع نقدي"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"radio",id:"ret-debt",name:"refundType",checked:E.refundType==="debt",onChange:()=>X(S=>({...S,refundType:"debt"})),disabled:!E.invoice.customer}),s.jsx("label",{htmlFor:"ret-debt",className:E.invoice.customer?"":"text-gray-400",children:"تخفيض دين العميل"})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded border text-sm",children:s.jsxs("div",{children:["قيمة المرتجع: ",s.jsxs("span",{className:"font-bold text-red-600",children:[E.invoice.items.reduce((S,$)=>S+(E.quantities[$.product.id]||0)*$.price,0).toFixed(2)," ج.م"]})]})}),s.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[s.jsx("button",{onClick:Y,className:"px-4 py-2 bg-gray-200 rounded",children:"إلغاء"}),s.jsx("button",{onClick:K,className:"px-4 py-2 bg-red-600 text-white rounded",children:"تأكيد المرتجع"})]})]})]})})]})},hx=({expense:u,onClose:d,onSave:m})=>{const[o,p]=A.useState(u||{id:"",date:new Date().toISOString().slice(0,10),category:"",description:"",amount:0}),D=!u,N=R=>{const{name:E,value:X}=R.target;p(L=>({...L,[E]:E==="amount"?parseFloat(X)||0:X}))},O=async()=>{if(!o.category||!o.date||!o.amount)return;const R={...o,id:o.id||`ex${Date.now()}`};await m(R,D),d()},C=["إيجار","رواتب","كهرباء","مياه","نقل","صيانة","مشتريات مكتبية","أخرى"];return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold",children:D?"إضافة مصروف":"تعديل المصروف"}),s.jsx("button",{onClick:d,children:s.jsx(kt,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"date",children:"التاريخ"}),s.jsx("input",{id:"date",name:"date",type:"date",value:o.date,onChange:N,className:"p-2 border rounded w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"category",children:"التصنيف"}),s.jsxs("select",{id:"category",name:"category",value:o.category,onChange:N,className:"p-2 border rounded w-full",children:[s.jsx("option",{value:"",children:"اختر تصنيف"}),C.map(R=>s.jsx("option",{value:R,children:R},R))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"description",children:"الوصف"}),s.jsx("textarea",{id:"description",name:"description",value:o.description,onChange:N,className:"p-2 border rounded w-full h-20"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",htmlFor:"amount",children:"المبلغ"}),s.jsx("input",{id:"amount",name:"amount",type:"number",step:"0.01",value:o.amount,onChange:N,className:"p-2 border rounded w-full"})]})]}),s.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[s.jsx("button",{onClick:d,className:"px-4 py-2 bg-gray-200 rounded",children:"إلغاء"}),s.jsx("button",{onClick:O,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"حفظ"})]})]})})},xx=()=>{const{expenses:u,saveExpenses:d,addNotification:m}=yt(),[o,p]=A.useState(!1),[D,N]=A.useState(null),[O,C]=A.useState(""),[R,E]=A.useState(""),[X,L]=A.useState(""),[Y,K]=A.useState(""),T=A.useMemo(()=>{const G=new Set(u.map(te=>te.category).filter(Boolean));return Array.from(G)},[u]),H=A.useMemo(()=>u.filter(G=>!O||G.description.toLowerCase().includes(O.toLowerCase())||G.category.toLowerCase().includes(O.toLowerCase())).filter(G=>!R||G.category===R).filter(G=>!X||G.date>=X).filter(G=>!Y||G.date<=Y).sort((G,te)=>te.date.localeCompare(G.date)),[u,O,R,X,Y]),S=A.useMemo(()=>H.reduce((G,te)=>G+(te.amount||0),0),[H]),$=async(G,te)=>{te?(await d([G,...u]),m("تمت إضافة المصروف")):(await d(u.map(ue=>ue.id===G.id?G:ue)),m("تم تحديث المصروف"))},J=async G=>{confirm("هل أنت متأكد من حذف المصروف؟")&&(await d(u.filter(te=>te.id!==G)),m("تم حذف المصروف","success"))};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"المصاريف"}),s.jsxs("button",{onClick:()=>{N(null),p(!0)},className:"flex items-center bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700 transition",children:[s.jsx(Ga,{className:"h-5 w-5 me-2"}),"إضافة مصروف"]})]}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"relative md:col-span-2",children:[s.jsx("input",{type:"text",placeholder:"ابحث بالوصف أو التصنيف...",className:"w-full p-3 ps-10 border rounded-lg",value:O,onChange:G=>C(G.target.value)}),s.jsx(Za,{className:"absolute top-1/2 -translate-y-1/2 right-3 h-5 w-5 text-gray-400"})]}),s.jsxs("select",{value:R,onChange:G=>E(G.target.value),className:"w-full p-3 border rounded-lg",children:[s.jsx("option",{value:"",children:"كل التصنيفات"}),T.map(G=>s.jsx("option",{value:G,children:G},G))]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("input",{type:"date",value:X,onChange:G=>L(G.target.value),className:"p-3 border rounded-lg"}),s.jsx("input",{type:"date",value:Y,onChange:G=>K(G.target.value),className:"p-3 border rounded-lg"})]})]})}),s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:["عدد النتائج: ",s.jsx("span",{className:"font-bold text-blue-600",children:H.length})]}),s.jsxs("span",{className:"text-sm text-green-700",children:["إجمالي الفترة: ",s.jsxs("span",{className:"font-bold",children:[S.toFixed(2)," ج.م"]})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-x-auto",children:s.jsxs("table",{className:"w-full text-right",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 font-semibold",children:"التاريخ"}),s.jsx("th",{className:"p-4 font-semibold",children:"التصنيف"}),s.jsx("th",{className:"p-4 font-semibold",children:"الوصف"}),s.jsx("th",{className:"p-4 font-semibold",children:"المبلغ"}),s.jsx("th",{className:"p-4 font-semibold",children:"إجراءات"})]})}),s.jsxs("tbody",{children:[H.map(G=>s.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[s.jsx("td",{className:"p-4",children:G.date}),s.jsx("td",{className:"p-4",children:G.category}),s.jsx("td",{className:"p-4",children:G.description||"-"}),s.jsxs("td",{className:"p-4 font-bold",children:[(G.amount||0).toFixed(2)," ج.م"]}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex justify-center items-center space-x-2 space-x-reverse",children:[s.jsx("button",{onClick:()=>{N(G),p(!0)},className:"text-blue-600 hover:text-blue-800 p-1",title:"تعديل",children:s.jsx(sl,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>J(G.id),className:"text-red-600 hover:text-red-800 p-1",title:"حذف",children:s.jsx(Ol,{className:"h-5 w-5"})})]})})]},G.id)),H.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"text-center p-8 text-gray-500",children:"لا توجد مصاريف مطابقة"})})]})]})}),o&&s.jsx(hx,{expense:D,onClose:()=>p(!1),onSave:$})]})},gx=({isOpen:u,title:d,message:m,placeholder:o="",defaultValue:p="",confirmText:D="تأكيد",cancelText:N="إلغاء",onConfirm:O,onCancel:C,inputType:R="text",required:E=!1})=>{const[X,L]=A.useState(p),[Y,K]=A.useState("");if(A.useEffect(()=>{u&&(L(p),K(""))},[u,p]),!u)return null;const T=()=>{if(E&&!X.trim()){K("هذا الحقل مطلوب");return}O(X)},H=S=>{S.key==="Enter"?T():S.key==="Escape"&&C()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md transform transition-all",children:[s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:d}),s.jsx("button",{onClick:C,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(kt,{className:"h-5 w-5"})})]}),m&&s.jsx("p",{className:"text-sm text-gray-500 mb-4",children:m}),s.jsxs("div",{className:"mb-4",children:[s.jsx("input",{type:R,value:X,onChange:S=>{L(S.target.value),Y&&K("")},onKeyPress:H,placeholder:o,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${Y?"border-red-500":"border-gray-300"}`,autoFocus:!0}),Y&&s.jsx("p",{className:"mt-1 text-sm text-red-600",children:Y})]})]}),s.jsxs("div",{className:"bg-gray-50 px-6 py-3 sm:flex sm:flex-row-reverse rounded-b-lg",children:[s.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ms-3 sm:w-auto sm:text-sm transition-colors",onClick:T,children:D}),s.jsx("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ms-3 sm:w-auto sm:text-sm transition-colors",onClick:C,children:N})]})]})})};let $u=null,sm=null;function mm(u){return(u.syncCollectionPrefix||"pos").trim()}function hm(u){if(!u.syncEnabled||!u.syncApiKey||!u.syncProjectId)return null;try{if(!$u){const d={apiKey:u.syncApiKey,authDomain:u.syncAuthDomain,projectId:u.syncProjectId};$u=R0().find(o=>o.name==="sync")?H0("sync"):um(d,"sync"),sm=rm($u)}return sm}catch(d){return console.error("Failed to initialize sync Firebase:",d),null}}async function xm(u){try{const d=hm(u);if(!d)return!1;const m=mm(u),o=Ws(d,`${m}_connection`,"test");return await Is(o,{ts:new Date().toISOString()},{merge:!0}),!0}catch(d){return console.error("Sync connection test failed:",d),!1}}async function Ks(u,d,m,o){for(let p=0;p<m.length;p++){const D=m[p],N=D.id||void 0||`${Date.now()}_${p}`,O=Ws(k0(u,d),String(N));await Is(O,D,{merge:!0})}}async function gm(u,d){const m={ok:!1,pushed:{}};try{const o=hm(u);if(!o)return{ok:!1,pushed:{},error:"Sync not enabled or config missing"};const p=mm(u),D=u.syncWhat||{};if(D.products&&d.products&&(await Ks(o,`${p}_products`,d.products),m.pushed.products=d.products.length),D.customers&&d.customers&&(await Ks(o,`${p}_customers`,d.customers),m.pushed.customers=d.customers.length),D.invoices&&d.invoices&&(await Ks(o,`${p}_invoices`,d.invoices),m.pushed.invoices=d.invoices.length),D.expenses&&d.expenses&&(await Ks(o,`${p}_expenses`,d.expenses),m.pushed.expenses=d.expenses.length),D.users&&d.users&&(await Ks(o,`${p}_users`,d.users),m.pushed.users=d.users.length),D.settings&&d.settings){const N=Ws(o,`${p}_settings`,"app");await Is(N,d.settings,{merge:!0}),m.pushed.settings=1}return m.ok=!0,m}catch(o){return console.error("syncPush failed:",o),m.ok=!1,m.error=(o==null?void 0:o.message)||String(o),m}}const yi=({title:u,children:d,onClose:m})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl transform transition-all",children:[s.jsxs("div",{className:"p-6 border-b flex justify-between items-center",children:[s.jsx("h2",{className:"text-2xl font-bold",children:u}),s.jsx("button",{onClick:m,className:"text-gray-500 hover:text-gray-800",children:s.jsx(kt,{className:"h-6 w-6"})})]}),s.jsx("div",{className:"p-6",children:d})]})}),bx=({settings:u,onSave:d,onClose:m})=>{const[o,p]=A.useState(u),D=O=>{p({...o,[O.target.name]:O.target.value})},N=()=>{d(o),m()};return s.jsxs(yi,{title:"تعديل معلومات الشركة",onClose:m,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"systemName",className:"block text-sm font-medium text-gray-700",children:"اسم النظام"}),s.jsx("input",{type:"text",id:"systemName",name:"systemName",value:o.systemName||"",onChange:D,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"companyName",className:"block text-sm font-medium text-gray-700",children:"اسم الشركة"}),s.jsx("input",{type:"text",id:"companyName",name:"companyName",value:o.companyName,onChange:D,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"companyAddress",className:"block text-sm font-medium text-gray-700",children:"عنوان الشركة"}),s.jsx("input",{type:"text",id:"companyAddress",name:"companyAddress",value:o.companyAddress,onChange:D,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"companyPhone",className:"block text-sm font-medium text-gray-700",children:"رقم هاتف الشركة"}),s.jsx("input",{type:"text",id:"companyPhone",name:"companyPhone",value:o.companyPhone,onChange:D,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md"})]})]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{onClick:N,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"حفظ التغييرات"})})]})},px=({settings:u,onSave:d,onClose:m})=>{const[o,p]=A.useState(u),D=C=>{p({...o,[C.target.name]:C.target.value})},N=C=>{var E;const R=(E=C.target.files)==null?void 0:E[0];if(R){const X=new FileReader;X.onloadend=()=>{p(L=>({...L,customInvoiceBarcode:X.result}))},X.readAsDataURL(R)}},O=()=>{d(o),m()};return s.jsxs(yi,{title:"تخصيص الفاتورة",onClose:m,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"paperSize",className:"block text-sm font-medium text-gray-700",children:"حجم ورق الطباعة"}),s.jsxs("select",{id:"paperSize",name:"paperSize",value:o.paperSize||"58mm",onChange:D,className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",children:[s.jsx("option",{value:"58mm",children:"58mm"}),s.jsx("option",{value:"80mm",children:"80mm"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"thankYouMessage",className:"block text-sm font-medium text-gray-700",children:"رسالة شكر في الفاتورة"}),s.jsx("input",{type:"text",id:"thankYouMessage",name:"thankYouMessage",value:o.thankYouMessage||"",onChange:D,placeholder:"شكراً لتعاملكم معنا!",className:"mt-1 block w-full p-2 border border-gray-300 rounded-md"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"barcodeText",className:"block text-sm font-medium text-gray-700",children:"النص فوق الباركود"}),s.jsx("input",{type:"text",id:"barcodeText",name:"barcodeText",value:o.barcodeText||"",onChange:D,placeholder:"امسح الكود للمتابعة",className:"mt-1 block w-full p-2 border border-gray-300 rounded-md"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"customInvoiceBarcode",className:"block text-sm font-medium text-gray-700",children:"صورة باركود مخصصة للفاتورة"}),s.jsxs("div",{className:"mt-1 flex items-center",children:[s.jsx("input",{type:"file",accept:"image/*",id:"customInvoiceBarcode",onChange:N,className:"hidden"}),s.jsxs("label",{htmlFor:"customInvoiceBarcode",className:"cursor-pointer bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 flex items-center",children:[s.jsx(P0,{className:"h-5 w-5 me-2"}),"اختر صورة"]}),o.customInvoiceBarcode&&s.jsx("img",{src:o.customInvoiceBarcode,alt:"preview",className:"ms-4 h-16 w-auto border p-1 rounded"})]})]})]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{onClick:O,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"حفظ التغييرات"})})]})},yx=({settings:u,onSave:d,onClose:m})=>{const[o,p]=A.useState(u),[D,N]=A.useState("idle"),[O,C]=A.useState("idle"),R=L=>{const{name:Y,value:K,type:T,checked:H}=L.target;if(Y.startsWith("syncWhat.")){const S=Y.split(".")[1];p($=>({...$,syncWhat:{...$.syncWhat||{},[S]:H}}))}else p(Y==="syncEnabled"?S=>({...S,syncEnabled:H}):Y==="autoSync"?S=>({...S,autoSync:H}):Y==="autoSyncInterval"?S=>({...S,autoSyncInterval:parseInt(K)}):S=>({...S,[Y]:K}))},E=async()=>{await d(o),m()},X=async()=>{if(N("loading"),!await xm(o)){N("fail");return}try{(await gm(o,{settings:o})).ok?(N("ok"),await d({...o,lastSyncAt:new Date().toISOString()})):N("fail")}catch{N("fail")}};return s.jsxs(yi,{title:"إعدادات المزامنة",onClose:m,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{id:"syncEnabled",name:"syncEnabled",type:"checkbox",checked:!!o.syncEnabled,onChange:R}),s.jsx("label",{htmlFor:"syncEnabled",className:"text-sm font-medium",children:"تفعيل المزامنة"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"API Key"}),s.jsx("input",{name:"syncApiKey",value:o.syncApiKey||"",onChange:R,className:"mt-1 block w-full p-2 border rounded"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Auth Domain"}),s.jsx("input",{name:"syncAuthDomain",value:o.syncAuthDomain||"",onChange:R,className:"mt-1 block w-full p-2 border rounded"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Project ID"}),s.jsx("input",{name:"syncProjectId",value:o.syncProjectId||"",onChange:R,className:"mt-1 block w-full p-2 border rounded"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"بادئة المجموعات (Collection Prefix)"}),s.jsx("input",{name:"syncCollectionPrefix",value:o.syncCollectionPrefix||"pos",onChange:R,className:"mt-1 block w-full p-2 border rounded"})]})]}),s.jsxs("div",{className:"mt-2",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"اختر ما يتم مزامنته"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["products","customers","invoices","expenses","users","settings"].map(L=>s.jsxs("label",{className:"flex items-center gap-2 p-2 rounded border bg-gray-50",children:[s.jsx("input",{type:"checkbox",name:`syncWhat.${L}`,checked:!!(o.syncWhat&&o.syncWhat[L]),onChange:R}),s.jsx("span",{className:"text-sm",children:{products:"المنتجات",customers:"العملاء",invoices:"الفواتير",expenses:"المصاريف",users:"المستخدمون",settings:"الإعدادات"}[L]})]},L))})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("h4",{className:"font-semibold mb-2",children:"المزامنة التلقائية"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",name:"autoSync",checked:!!o.autoSync,onChange:R}),s.jsx("span",{className:"text-sm",children:"تفعيل المزامنة التلقائية"})]}),o.autoSync&&s.jsx("div",{className:"ml-6 space-y-2",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"فترة المزامنة (بالدقائق)"}),s.jsxs("select",{name:"autoSyncInterval",value:o.autoSyncInterval||30,onChange:R,className:"p-2 border rounded text-sm",children:[s.jsx("option",{value:5,children:"كل 5 دقائق"}),s.jsx("option",{value:15,children:"كل 15 دقيقة"}),s.jsx("option",{value:30,children:"كل 30 دقيقة"}),s.jsx("option",{value:60,children:"كل ساعة"}),s.jsx("option",{value:180,children:"كل 3 ساعات"})]})]})})]})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["آخر مزامنة: ",o.lastSyncAt?new Date(o.lastSyncAt).toLocaleString("ar-EG"):"لم تتم بعد"]})]}),s.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:X,className:"px-4 py-2 rounded bg-gray-100 hover:bg-gray-200",children:"اختبار الاتصال"}),D==="loading"&&s.jsx("span",{className:"text-gray-600 text-sm",children:"جاري الاختبار"}),D==="ok"&&s.jsx("span",{className:"text-green-600 text-sm",children:"الاتصال ناجح"}),D==="fail"&&s.jsx("span",{className:"text-red-600 text-sm",children:"فشل الاتصال"})]}),s.jsx("button",{onClick:E,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"حفظ"})]})]})},vx=({user:u,onClose:d,onSave:m})=>{const[o,p]=A.useState(u||{id:"",name:"",password:"",status:"نشط",permissions:{[P.Dashboard]:!0,[P.Products]:!0,[P.Pos]:!0,[P.Customers]:!0,[P.Invoices]:!0,[P.Expenses]:!0,[P.Settings]:!1}}),[D,N]=A.useState(""),[O,C]=A.useState(""),[R,E]=A.useState(""),X=!u,L=o.id==="u1",Y=S=>{p({...o,[S.target.name]:S.target.value})},K=(S,$)=>{p(J=>({...J,permissions:{...J.permissions,[S]:$}}))},T=async()=>{if(!o.name.trim()){E("اسم المستخدم مطلوب.");return}if(X&&!D.trim()){E("كلمة المرور مطلوبة.");return}if(D&&D!==O){E("كلمات المرور غير متطابقة.");return}if(D&&D.length<4){E("كلمة المرور قصيرة جداً.");return}E("");let S={...o};D&&(S.password=D),S.id==="u1"&&(S.permissions={[P.Dashboard]:!0,[P.Products]:!0,[P.Pos]:!0,[P.Customers]:!0,[P.Invoices]:!0,[P.Expenses]:!0,[P.Settings]:!0},S.status="نشط"),await m({...S,id:X?`u${Date.now()}`:o.id}),d()},H={Dashboard:"لوحة التحكم",Products:"المنتجات",Pos:"نقطة البيع",Customers:"العملاء",Suppliers:"الموردين",Invoices:"الفواتير",Expenses:"المصاريف",Settings:"الإعدادات",Notifications:"التنبيهات"};return s.jsxs(yi,{title:X?"إضافة مستخدم جديد":"تعديل المستخدم",onClose:d,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("input",{type:"text",name:"name",value:o.name,onChange:Y,placeholder:"اسم المستخدم",className:"p-2 border rounded w-full"}),s.jsx("input",{type:"password",value:D,onChange:S=>N(S.target.value),placeholder:"كلمة المرور الجديدة",className:"p-2 border rounded w-full"}),s.jsx("input",{type:"password",value:O,onChange:S=>C(S.target.value),placeholder:"تأكيد كلمة المرور",className:"p-2 border rounded w-full"}),R&&s.jsx("p",{className:"text-red-500 text-sm",children:R}),L?s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full me-2"}),s.jsx("span",{className:"text-sm font-medium text-green-800",children:"المدير الرئيسي نشط دائماً ولا يمكن تعطيله"})]})}):s.jsxs("select",{name:"status",value:o.status,onChange:Y,className:"p-2 border rounded w-full",children:[s.jsx("option",{value:"نشط",children:"نشط"}),s.jsx("option",{value:"غير نشط",children:"غير نشط"})]}),!L&&s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-lg font-bold pt-4",children:"صلاحيات الوصول"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.values(P).filter(S=>typeof S=="number").map(S=>{var $;return s.jsxs("label",{className:"flex items-center p-3 rounded-lg bg-gray-100 hover:bg-blue-100 border",children:[s.jsx("input",{type:"checkbox",checked:(($=o.permissions)==null?void 0:$[S])||!1,onChange:J=>K(S,J.target.checked),className:"h-5 w-5 text-blue-600 rounded"}),s.jsx("span",{className:"ms-3 text-sm font-medium",children:H[P[S]]})]},S)})})]}),L&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Pu,{className:"h-5 w-5 text-blue-600 me-2"}),s.jsx("span",{className:"text-sm font-medium text-blue-800",children:"المدير الرئيسي يملك جميع الصلاحيات تلقائياً ولا يمكن تعديلها"})]})})]}),s.jsx("div",{className:"mt-6 flex justify-end",children:s.jsx("button",{onClick:T,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700",children:"حفظ"})})]})},jx=()=>{const{settings:u,saveSettings:d,users:m,saveUsers:o,currentUser:p,setCurrentUser:D,addNotification:N,storageMode:O,directoryName:C,requestDirectoryPermission:R,resetAllData:E,products:X,customers:L,invoices:Y,expenses:K}=yt(),[T,H]=A.useState(null),[S,$]=A.useState(null),[J,G]=A.useState("idle"),[te,ue]=A.useState("idle"),[ye,he]=A.useState({open:!1,action:"changeStorage"}),[ve,Ue]=A.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},type:"warning"}),k=(Q,ce,ee,q="warning")=>{Ue({isOpen:!0,title:Q,message:ce,onConfirm:ee,type:q})},h=()=>{Ue(Q=>({...Q,isOpen:!1}))},_=Q=>he({open:!0,action:Q}),Z=Q=>{const ce=m.find(q=>q.id==="u1"),ee=ye.action;if(he({open:!1,action:ee}),!ce){N("لا يوجد مستخدم مدير رئيسي (u1).","error");return}if((ce.password||"")!==Q){N("كلمة المرور غير صحيحة.","error");return}ee==="changeStorage"?R():V()},W=async Q=>{await d(Q),N("تم حفظ الإعدادات بنجاح")},g=async Q=>{const ce=!m.some(q=>q.id===Q.id),ee=ce?[...m,Q]:m.map(q=>q.id===Q.id?Q:q);await o(ee),N(ce?"تمت إضافة المستخدم":"تم تحديث المستخدم"),p&&p.id===Q.id&&D(Q)},B=async Q=>{if(m.length<=1||(p==null?void 0:p.id)===Q){N("لا يمكن حذف المستخدم الوحيد أو حسابك الحالي.","error");return}const ce=m.find(ee=>ee.id===Q);ce&&k("حذف المستخدم",`هل أنت متأكد من حذف المستخدم "${ce.name}"؟ لا يمكن التراجع عن هذا الإجراء.`,async()=>{await o(m.filter(ee=>ee.id!==Q)),N("تم حذف المستخدم","success"),h()},"danger")},V=()=>{k("إعادة تعيين جميع البيانات","هل أنت متأكد من أنك تريد إعادة تعيين كل شيء؟ سيتم حذف جميع البيانات بشكل دائم ولا يمكن التراجع عن هذا الإجراء.",async()=>{await E(),h()},"danger")},ne=async()=>{G("loading");const Q=await xm(u);G(Q?"ok":"fail"),N(Q?"الاتصال بـ Firebase ناجح":"فشل الاتصال بـ Firebase",Q?"success":"error")},re=async()=>{if(!u.syncEnabled){N("المزامنة غير مفعلة في الإعدادات","error");return}ue("loading");try{const Q=u.syncWhat||{},ce={};Q.products&&(ce.products=X),Q.customers&&(ce.customers=L),Q.invoices&&(ce.invoices=Y),Q.expenses&&(ce.expenses=K),Q.users&&(ce.users=m),Q.settings&&(ce.settings=u);const ee=await gm(u,ce);ue(ee.ok?"ok":"fail"),ee.ok?(await d({...u,lastSyncAt:new Date().toISOString()}),N("تمت المزامنة بنجاح")):N("فشلت ا��مزامنة: "+(ee.error||""),"error")}catch{ue("fail"),N("فشلت المزامنة","error")}},we=Q=>{$(Q),H("user")},oe=()=>{switch(T){case"company":return s.jsx(bx,{settings:u,onSave:W,onClose:()=>H(null)});case"invoice":return s.jsx(px,{settings:u,onSave:W,onClose:()=>H(null)});case"sync":return s.jsx(yx,{settings:u,onSave:W,onClose:()=>H(null)});case"user":return s.jsx(vx,{user:S,onSave:g,onClose:()=>H(null)});default:return null}};return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"الإعدادات"}),s.jsx("p",{className:"text-gray-600",children:"إدارة وتخصيص إعدادات النظام والمستخدمين"})]}),s.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4 mb-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full me-2"}),s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"النظام يعمل بشكل طبيعي"})]}),s.jsxs("div",{className:"text-sm text-gray-600",children:["وضع التخزين: ",s.jsx("span",{className:"font-medium",children:O==="fs"?"ملفات محلية":"متصفح"})]}),C&&s.jsxs("div",{className:"text-sm text-gray-600",children:["المجلد: ",s.jsx("span",{className:"font-medium",children:C})]})]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["المستخدم الحالي: ",s.jsx("span",{className:"font-medium text-blue-600",children:p==null?void 0:p.name})]})]})}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[s.jsx(bi,{className:"h-7 w-7 me-3 text-blue-600"}),"إعدادات النشاط التجاري"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-shadow duration-200",children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center me-3",children:s.jsx(bi,{className:"h-5 w-5 text-blue-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"معلومات الشركة"})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"إدارة تفاصيل النشاط التجاري والعلامة التجارية"}),s.jsxs("div",{className:"space-y-1 text-sm text-gray-500",children:[s.jsxs("div",{children:["الشركة: ",s.jsx("span",{className:"font-medium",children:u.companyName||"غير محدد"})]}),s.jsxs("div",{children:["الهاتف: ",s.jsx("span",{className:"font-medium",children:u.companyPhone||"غير محدد"})]})]})]}),s.jsx("button",{onClick:()=>H("company"),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:s.jsx(sl,{className:"h-5 w-5"})})]})})}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-shadow duration-200",children:s.jsx("div",{className:"p-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center me-3",children:s.jsx(Qa,{className:"h-5 w-5 text-green-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"تخصيص الفاتورة"})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"تعديل شكل الفاتورة وحجم الورق"}),s.jsxs("div",{className:"space-y-1 text-sm text-gray-500",children:[s.jsxs("div",{children:["حجم الورق: ",s.jsx("span",{className:"font-medium",children:u.paperSize||"58mm"})]}),s.jsxs("div",{children:["رسالة الشكر: ",s.jsx("span",{className:"font-medium",children:u.thankYouMessage?"محددة":"افتراضية"})]})]})]}),s.jsx("button",{onClick:()=>H("invoice"),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",children:s.jsx(sl,{className:"h-5 w-5"})})]})})}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-shadow duration-200",children:s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center me-3",children:s.jsx(Qa,{className:"h-5 w-5 text-yellow-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"إعدادات التنبيهات"})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"تحديد حدود انخفاض المخزون وحد الديون لتنشيط التنبيهات"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"حد انخفاض المخزون"}),s.jsx("input",{type:"number",min:0,value:u.lowStockThreshold??10,onChange:Q=>d({...u,lowStockThreshold:Math.max(0,parseInt(Q.target.value||"0"))}),className:"mt-1 block w-full p-2 border rounded"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"حد الديون"}),s.jsx("input",{type:"number",min:0,step:"0.01",value:u.debtThreshold??0,onChange:Q=>d({...u,debtThreshold:Math.max(0,parseFloat(Q.target.value||"0"))}),className:"mt-1 block w-full p-2 border rounded"})]})]})]})})})})]})]}),s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[s.jsx(Wu,{className:"h-7 w-7 me-3 text-purple-600"}),"إعدادات النظام"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-shadow duration-200",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center me-3",children:s.jsx(Iu,{className:"h-5 w-5 text-yellow-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"إدارة البيانات"})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"إدارة مجلد الحفظ وإعادة تعيين البيانات"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>_("changeStorage"),className:"w-full flex items-center justify-center px-4 py-2 bg-gray-50 hover:bg-gray-100 text-gray-700 rounded-lg transition-colors text-sm font-medium",children:[s.jsx(Iu,{className:"h-4 w-4 me-2"}),"تغيير مجلد الحفظ"]}),s.jsxs("button",{onClick:()=>_("resetAll"),className:"w-full flex items-center justify-center px-4 py-2 bg-red-50 hover:bg-red-100 text-red-700 rounded-lg transition-colors text-sm font-medium",children:[s.jsx(Ol,{className:"h-4 w-4 me-2"}),"إعادة تعيين كل البيانات"]})]})]})}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-shadow duration-200",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center mb-2",children:[s.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center me-3",children:s.jsx(Wu,{className:"h-5 w-5 text-blue-600"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"إعدادات المزامنة"})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"مزامنة البيانات مع Firebase (العرض والمسح من تطبيق منفصل)"}),s.jsxs("div",{className:"space-y-1 text-sm text-gray-500",children:[s.jsxs("div",{children:["الحالة: ",s.jsx("span",{className:`font-medium ${u.syncEnabled?"text-green-600":"text-gray-400"}`,children:u.syncEnabled?"مفعلة":"غير مفعلة"})]}),s.jsxs("div",{children:["المشروع: ",s.jsx("span",{className:"font-medium",children:u.syncProjectId||"غير محدد"})]}),s.jsxs("div",{children:["المزامنة التلقائية: ",s.jsx("span",{className:`font-medium ${u.autoSync?"text-green-600":"text-gray-400"}`,children:u.autoSync?`كل ${u.autoSyncInterval||30} دقيقة`:"غير مفعلة"})]})]})]}),s.jsx("button",{onClick:()=>H("sync"),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:s.jsx(sl,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:ne,className:"px-3 py-1.5 rounded bg-gray-100 hover:bg-gray-200 text-sm",children:"اختبار الاتصال"}),J==="loading"&&s.jsx("span",{className:"text-gray-600 text-xs",children:"جارٍ الاختبار..."}),J==="ok"&&s.jsx("span",{className:"text-green-600 text-xs",children:"الاتصال ناجح"}),J==="fail"&&s.jsx("span",{className:"text-red-600 text-xs",children:"فشل الاتصال"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:re,className:"px-3 py-1.5 rounded bg-blue-50 text-blue-700 border border-blue-200 hover:bg-blue-100 text-sm",disabled:!u.syncEnabled,children:"مزامنة الآن"}),te==="loading"&&s.jsx("span",{className:"text-gray-600 text-xs",children:"جارٍ المزامنة..."}),te==="ok"&&s.jsx("span",{className:"text-green-600 text-xs",children:"تمت المزامنة"}),te==="fail"&&s.jsx("span",{className:"text-red-600 text-xs",children:"فشلت المزامنة"})]})]})]})})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[s.jsx(Pu,{className:"h-7 w-7 me-3 text-purple-600"}),"إدارة المستخدمين"]}),s.jsxs("button",{onClick:()=>we(null),className:"flex items-center bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors font-medium",children:[s.jsx(Ga,{className:"h-5 w-5 me-2"}),"إضافة مستخدم جديد"]})]}),s.jsx("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm",children:s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"space-y-4",children:m.map((Q,ce)=>s.jsxs("div",{className:`flex items-center justify-between p-4 rounded-lg border ${ce===0?"border-blue-200 bg-blue-50":"border-gray-200 bg-gray-50"}`,children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center me-4 ${Q.status==="نشط"?"bg-green-100":"bg-gray-100"}`,children:s.jsx(Pu,{className:`h-5 w-5 ${Q.status==="نشط"?"text-green-600":"text-gray-400"}`})}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("h4",{className:"font-semibold text-gray-900 me-2",children:Q.name}),Q.id==="u1"&&s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-purple-100 text-purple-800 rounded-full",children:"مدير النظام"}),(p==null?void 0:p.id)===Q.id&&s.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full me-2",children:"أنت"})]}),s.jsxs("p",{className:"text-sm text-gray-600",children:["الصلاحيات: ",Object.values(Q.permissions||{}).filter(Boolean).length," من ",Object.values(P).filter(ee=>typeof ee=="number").length]})]})]}),s.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[s.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${Q.status==="نشط"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:Q.status}),s.jsx("button",{onClick:()=>we(Q),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:s.jsx(sl,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>B(Q.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",disabled:m.length<=1||(p==null?void 0:p.id)===Q.id,children:s.jsx(Ol,{className:"h-4 w-4"})})]})]},Q.id))})})})]})]}),oe(),s.jsx(dm,{isOpen:ve.isOpen,title:ve.title,message:ve.message,onConfirm:ve.onConfirm,onCancel:h,type:ve.type,confirmText:ve.type==="danger"?"حذف":"تأكيد",cancelText:"إلغاء"}),s.jsx(gx,{isOpen:ye.open,title:"تأكيد الهوية",message:"أدخل كلمة مرور المدير الرئيسي (u1) للمتابعة",inputType:"password",required:!0,confirmText:"تأكيد",cancelText:"إلغاء",onConfirm:Z,onCancel:()=>he(Q=>({...Q,open:!1}))})]})},Nx=()=>{const{products:u,customers:d,currentUser:m,settings:o,saveSettings:p,setCurrentUser:D,addNotification:N}=yt(),[O,C]=A.useState("all"),R=o.notificationsReadIds||[],E=A.useMemo(()=>{const T=[];m&&m.id==="u1"&&T.push({id:"admin-usage",type:"admin-usage",title:"تنبيه أمان",message:"لا يُنصح بالعمل من خلال المستخدم الرئيسي (المدير). يرجى إنشاء حساب عمل منفصل لاستخدامه يومياً.",severity:"warning",createdAt:new Date().toISOString()});const H=Math.max(0,o.lowStockThreshold??10);u.forEach(J=>{var G;J.quantity<=H&&T.push({id:`stock-${J.id}`,type:"stock",title:"انخفاض المخزون",message:`المنتج "${J.name}" منخفض المخزون: المتاح ${J.quantity} ${((G=J.unit)==null?void 0:G.name)||""}`,severity:J.quantity<=0?"danger":"warning",linkedId:J.id,createdAt:new Date().toISOString()})});const S=Math.max(0,o.debtThreshold??0);d.forEach(J=>{(J.debt||0)>S&&T.push({id:`debt-${J.id}`,type:"debt",title:"ديون العملاء",message:`العميل "${J.name}" عليه رصيد مستحق قدره ${(J.debt||0).toFixed(2)} ج.م`,severity:"warning",linkedId:J.id,createdAt:new Date().toISOString()})});const $={danger:0,warning:1,info:2};return T.sort((J,G)=>$[J.severity]-$[G.severity])},[u,d,m]),X=A.useMemo(()=>E.filter(T=>O==="all"||T.type===O),[E,O]),L=T=>R.includes(T),Y=async T=>{if(L(T))return;const H=Array.from(new Set([...o.notificationsReadIds||[],T]));await p({...o,notificationsReadIds:H}),N("تم تعليم التنبيه كمقروء")},K=async()=>{const T=E.map(S=>S.id),H=Array.from(new Set([...o.notificationsReadIds||[],...T]));await p({...o,notificationsReadIds:H}),N("تم تعليم كل التنبيهات كمقروء")};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"التنبيهات"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"تنبيهات انخفاض المخزون، الديون، وتنبيه استخدام المدير الرئيسي"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("select",{value:O,onChange:T=>C(T.target.value),className:"p-2 border rounded-lg",children:[s.jsx("option",{value:"all",children:"الكل"}),s.jsx("option",{value:"stock",children:"انخفاض المخزون"}),s.jsx("option",{value:"debt",children:"الديون"}),s.jsx("option",{value:"admin-usage",children:"استخدام المدير"}),s.jsx("option",{value:"promo",children:"عروض"})]}),s.jsx("button",{onClick:K,className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm",children:"تعليم الكل كمقروء"})]})]}),(O==="all"||O==="promo")&&s.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-l from-emerald-50 to-white border border-emerald-200 rounded-xl shadow-sm p-4 md:p-5",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:"/v4/YSK%20PHONE.png",alt:"YSK Phone",className:"w-16 h-16 object-contain rounded"}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"promo-badge px-2 py-0.5 rounded-full text-xs font-bold text-emerald-900 bg-emerald-200",children:"عرض خاص"}),L("promo-ysk-phone")&&s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs font-bold text-gray-700 bg-gray-100",children:"مقروء"}),s.jsx("h3",{className:"font-extrabold text-emerald-700 text-lg",children:"YSK Phone – امسح الباركود بالموبايل"})]}),s.jsx("p",{className:"text-gray-800 mt-1 text-sm md:text-base",children:"بدل ما تشتري سكانر USB، استخدم موبايلك للمسح والبيع والبحث وعرض المخزون — كل اللي محتاجه إنترنت بس."}),s.jsxs("div",{className:"mt-2",children:[s.jsx("span",{className:"inline-block bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold animate-pulse",children:"لفترة محدودة: 500 ج بدل 1500 ج"}),s.jsx("span",{className:"inline-block ms-2 text-sm text-green-700 font-bold float-slow",children:"وفّرت 1000 ج 👌"})]})]})]}),L("promo-ysk-phone")?s.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-700",children:"مقروء"}):s.jsx("button",{onClick:()=>Y("promo-ysk-phone"),className:"text-sm text-blue-600 hover:underline",children:"تعليم كمقروء"})]}),s.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[s.jsx("a",{href:"tel:01023160657",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:"اتصل دلوقتي"}),s.jsx("a",{href:"https://wa.me/201023160657",target:"_blank",className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm",children:"كلّمنا واتساب"}),s.jsx("span",{className:"text-xs text-gray-500",children:"لشراء الميزة وتفعيلها"})]}),s.jsx("style",{children:`
              @keyframes floatSlow { 0%{transform:translateY(0)} 50%{transform:translateY(-2px)} 100%{transform:translateY(0)} }
              .float-slow { animation: floatSlow 3s ease-in-out infinite; }
              @keyframes badgeGlow { 0%{box-shadow:0 0 0 0 rgba(16,185,129,.3)} 70%{box-shadow:0 0 0 10px rgba(16,185,129,0)} 100%{box-shadow:0 0 0 0 rgba(16,185,129,0)} }
              .promo-badge { animation: badgeGlow 2.2s ease-out infinite; }
            `})]}),s.jsx("div",{className:"bg-white rounded-lg shadow border",children:X.length===0?s.jsx("div",{className:"p-6 text-center text-gray-500",children:"لا توجد تنبيهات حالياً"}):s.jsx("ul",{children:X.map(T=>s.jsx("li",{className:`p-4 border-b ${T.type==="promo"?"bg-gradient-to-l from-green-50 to-white":""} flex items-start gap-3`,children:T.type!=="promo"?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${T.severity==="danger"?"bg-red-100":T.severity==="warning"?"bg-yellow-100":"bg-blue-100"}`,children:s.jsx(Qa,{className:`h-5 w-5 ${T.severity==="danger"?"text-red-600":T.severity==="warning"?"text-yellow-600":"text-blue-600"}`})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-gray-800",children:T.title}),L(T.id)?s.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-700",children:"مقروء"}):s.jsx("button",{onClick:()=>Y(T.id),className:"text-sm text-blue-600 hover:underline",children:"تعليم كمقروء"})]}),s.jsx("p",{className:"text-gray-700 mt-1",children:T.message})]})]}):s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("img",{src:"/v4/YSK%20PHONE.png",alt:"YSK Phone",className:"w-14 h-14 object-contain rounded"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-green-700 text-lg",children:"عرض خاص: YSK Phone – امسح الباركود بالموبايل"}),s.jsx("p",{className:"text-gray-700 mt-1",children:"بدل ما تشتري سكانر USB، استخدم موبايلك:"}),s.jsxs("ul",{className:"text-gray-700 list-disc ms-6 mt-1 space-y-1 text-sm",children:[s.jsx("li",{children:"بيع وتمسح الباركود بالموبايل مباشرةً"}),s.jsx("li",{children:"تبحث عن المنتجات وتعرض بيانات المخزون"}),s.jsx("li",{children:"كل اللي محتاجه إنترنت بس — ولا أسلاك ولا أجهزة إضافية"})]}),s.jsxs("div",{className:"mt-3",children:[s.jsx("span",{className:"inline-block bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm font-semibold",children:"لفترة محدودة: 500 ج بدل 1500 ج"}),s.jsx("span",{className:"inline-block ms-2 text-sm text-green-700 font-bold",children:"وفّرت 1000 ج 👌"})]})]})]}),L(T.id)?s.jsx("span",{className:"px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-700",children:"مقروء"}):s.jsx("button",{onClick:()=>Y(T.id),className:"text-sm text-blue-600 hover:underline",children:"تعليم كمقروء"})]}),s.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[s.jsx("a",{href:"tel:01023160657",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 text-sm",children:"اتصل دلوقتي"}),s.jsx("a",{href:"https://wa.me/201023160657",target:"_blank",className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 text-sm",children:"كلّمنا واتساب"}),s.jsx("span",{className:"text-xs text-gray-500",children:"لشراء الميزة وتفعيلها"})]})]})},T.id))})}),(m==null?void 0:m.id)==="u1"&&s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[s.jsx("div",{className:"font-semibold text-yellow-800 mb-1",children:"نصيحة أمان"}),s.jsx("div",{className:"text-yellow-800 text-sm",children:"أنشئ حساب عمل منفصل للاستخدام اليومي وحافظ على حساب المدير للاعدادات فقط."})]})]})},Sx=({supplier:u,onClose:d,onSettle:m})=>{const[o,p]=A.useState(u.balance.toString()),D=()=>{const N=parseFloat(o);!isNaN(N)&&N>0&&N<=u.balance?(m(N),d()):alert("الرجاء إدخال مبلغ صحيح.")};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-md",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold",children:["تسوية رصيد ",u.name]}),s.jsx("button",{onClick:d,children:s.jsx(kt,{className:"h-6 w-6"})})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"mb-4",children:["الرصيد الحالي: ",s.jsxs("span",{className:"font-bold text-red-600",children:[u.balance.toFixed(2)," ج.م"]})]}),s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المبلغ المسدد"}),s.jsx("input",{type:"number",value:o,onChange:N=>p(N.target.value),className:"p-2 border rounded w-full",min:"0.01",step:"0.01"})]}),s.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[s.jsx("button",{onClick:d,className:"px-4 py-2 bg-gray-200 rounded",children:"إلغاء"}),s.jsx("button",{onClick:D,className:"px-4 py-2 bg-green-600 text-white rounded",children:"تسوية"})]})]})})},wx=({supplier:u,onClose:d,onSave:m})=>{const[o,p]=A.useState(u||{id:"",name:"",phone:"",address:"",notes:"",balance:0,purchaseCount:0,lastTransaction:""}),D=!u,N=C=>{const{name:R,value:E}=C.target;p(X=>({...X,[R]:E}))},O=async()=>{if(!o.name.trim())return;const C={...o,id:o.id||`s${Date.now()}`};await m(C,D),d()};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 w-full max-w-lg",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-2xl font-bold",children:D?"إضافة مورد":"تعديل مورد"}),s.jsx("button",{onClick:d,children:s.jsx(kt,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الاسم"}),s.jsx("input",{name:"name",value:o.name,onChange:N,className:"p-2 border rounded w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم الهاتف"}),s.jsx("input",{name:"phone",value:o.phone,onChange:N,className:"p-2 border rounded w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"العنوان"}),s.jsx("input",{name:"address",value:o.address,onChange:N,className:"p-2 border rounded w-full"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ملاحظات"}),s.jsx("textarea",{name:"notes",value:o.notes,onChange:N,className:"p-2 border rounded w-full h-20"})]})]}),s.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[s.jsx("button",{onClick:d,className:"px-4 py-2 bg-gray-200 rounded",children:"إلغاء"}),s.jsx("button",{onClick:O,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"حفظ"})]})]})})},Dx=()=>{const{suppliers:u,saveSuppliers:d,addNotification:m,products:o,saveProducts:p,purchases:D,savePurchases:N}=yt(),[O,C]=A.useState(!1),[R,E]=A.useState(null),[X,L]=A.useState(null),[Y,K]=A.useState(""),[T,H]=A.useState({open:!1,supplier:null,items:[],discountType:"percentage",discountValue:"0",taxType:"percentage",taxValue:"0",amountPaid:"0",note:""}),S=A.useMemo(()=>u.filter(h=>h.name.toLowerCase().includes(Y.toLowerCase())||h.phone.includes(Y)),[u,Y]),$=async(h,_)=>{_?(await d([h,...u]),m("تمت إضافة المورد")):(await d(u.map(Z=>Z.id===h.id?h:Z)),m("تم تحديث المورد"))},J=async h=>{confirm("هل أنت متأكد من حذف المورد؟")&&(await d(u.filter(_=>_.id!==h)),m("تم حذف المورد","success"))},G=async h=>{if(!X)return;const _=u.map(Z=>Z.id===X.id?{...Z,balance:Math.max(0,Z.balance-h)}:Z);await d(_),m(`تم تسديد مبلغ ${h.toFixed(2)} ج.م للمورد ${X.name}`),L(null)},te=A.useMemo(()=>S.reduce((h,_)=>h+(_.balance||0),0),[S]),ue=h=>{H({open:!0,supplier:h,items:[{productId:"",quantity:"",unitCost:""}],discountType:"percentage",discountValue:"0",taxType:"percentage",taxValue:"0",amountPaid:"0",note:""})},ye=()=>H(h=>({...h,items:[...h.items,{productId:"",quantity:"",unitCost:""}]})),he=h=>H(_=>({..._,items:_.items.filter((Z,W)=>W!==h)})),ve=(h,_)=>H(Z=>({...Z,items:Z.items.map((W,g)=>g===h?{...W,..._}:W)})),Ue=()=>T.items.reduce((h,_)=>h+(parseFloat(_.quantity||"0")||0)*(parseFloat(_.unitCost||"0")||0),0),k=async()=>{const h=T.supplier,_=T.items.filter(ee=>ee.productId&&(parseFloat(ee.quantity||"0")||0)>0).map(ee=>{const q=o.find(fe=>fe.id===ee.productId);return{productId:q.id,productName:q.name,quantity:parseFloat(ee.quantity),unitCost:parseFloat(ee.unitCost||"0")}});if(_.length===0){m("الرجاء إضافة صنف واحد على الأقل","error");return}const Z=Ue(),W={type:T.discountType,value:parseFloat(T.discountValue||"0")},g=W.type==="percentage"?Z-Z*(W.value/100):Z-W.value,B={type:T.taxType,value:parseFloat(T.taxValue||"0")},V=B.type==="percentage"?g*(B.value/100):B.value,ne=Math.max(0,g+V),re=Math.max(0,parseFloat(T.amountPaid||"0")),we=[...o];_.forEach(ee=>{const q=we.findIndex(fe=>fe.id===ee.productId);q>-1&&(we[q].quantity=(we[q].quantity||0)+ee.quantity,ee.unitCost>0&&(we[q].purchasePrice=ee.unitCost),h.name&&!we[q].supplier&&(we[q].supplier=h.name))}),await p(we);const oe=Math.max(0,ne-re),Q=u.map(ee=>ee.id===h.id?{...ee,balance:(ee.balance||0)+oe,purchaseCount:(ee.purchaseCount||0)+1,lastTransaction:new Date().toLocaleDateString("en-CA")}:ee);await d(Q);const ce={id:`PO-${Date.now()}`,supplierId:h.id,supplierName:h.name,date:new Date().toLocaleDateString("en-CA"),items:_,subtotal:Z,discount:W,tax:B,total:ne,amountPaid:re,note:T.note||""};await(N?N([ce,...D||[]]):Promise.resolve()),m(`تم تسجيل شراء من ${h.name} بقيمة ${ne.toFixed(2)} ج.م`),H(ee=>({...ee,open:!1}))};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"إدارة الموردين"}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("button",{onClick:()=>{E(null),C(!0)},className:"flex items-center bg-blue-600 text-white px-4 py-2 rounded-lg shadow hover:bg-blue-700 transition",children:[s.jsx(Ga,{className:"h-5 w-5 me-2"}),"إضافة مورد"]})})]}),s.jsx("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6",children:s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",placeholder:"ابحث بالاسم أو رقم الهاتف...",className:"w-full p-3 ps-10 border rounded-lg",value:Y,onChange:h=>K(h.target.value)}),s.jsx(Za,{className:"absolute top-1/2 -translate-y-1/2 right-3 h-5 w-5 text-gray-400"})]})}),s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:["عدد الموردين: ",s.jsx("span",{className:"font-bold text-blue-600",children:S.length})]}),s.jsxs("span",{className:"text-sm text-red-700",children:["إجمالي رصيد الموردين: ",s.jsxs("span",{className:"font-bold",children:[te.toFixed(2)," ج.م"]})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-x-auto",children:s.jsxs("table",{className:"w-full text-right",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-4 font-semibold",children:"الاسم"}),s.jsx("th",{className:"p-4 font-semibold",children:"رقم الهاتف"}),s.jsx("th",{className:"p-4 font-semibold",children:"العنوان"}),s.jsx("th",{className:"p-4 font-semibold",children:"الرصيد"}),s.jsx("th",{className:"p-4 font-semibold",children:"آخر معاملة"}),s.jsx("th",{className:"p-4 font-semibold",children:"إجراءات"})]})}),s.jsxs("tbody",{children:[S.map(h=>s.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[s.jsx("td",{className:"p-4",children:h.name}),s.jsx("td",{className:"p-4",style:{direction:"ltr",textAlign:"right"},children:h.phone}),s.jsx("td",{className:"p-4",children:h.address}),s.jsxs("td",{className:`p-4 font-bold ${h.balance>0?"text-red-600":"text-green-600"}`,children:[(h.balance||0).toFixed(2)," ج.م"]}),s.jsx("td",{className:"p-4",children:h.lastTransaction||"لا يوجد"}),s.jsx("td",{className:"p-4",children:s.jsxs("div",{className:"flex justify-center items-center space-x-2 space-x-reverse",children:[s.jsx("button",{onClick:()=>{E(h),C(!0)},className:"text-blue-600 hover:text-blue-800",children:s.jsx(sl,{className:"h-5 w-5"})}),s.jsx("button",{onClick:()=>J(h.id),className:"text-red-600 hover:text-red-800",children:s.jsx(Ol,{className:"h-5 w-5"})}),s.jsxs("button",{onClick:()=>ue(h),className:"text-sm bg-blue-500 text-white px-2 py-1 rounded hover:bg-blue-600 flex items-center",children:[s.jsx(Ga,{className:"h-4 w-4 me-1"}),"شراء"]}),h.balance>0&&s.jsxs("button",{onClick:()=>L(h),className:"text-sm bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600 flex items-center",children:[s.jsx(La,{className:"h-4 w-4 me-1"}),"تسوية"]})]})})]},h.id)),S.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center p-8 text-gray-500",children:"لا توجد نتائج"})})]})]})}),O&&s.jsx(wx,{supplier:R,onClose:()=>C(!1),onSave:$}),X&&s.jsx(Sx,{supplier:X,onClose:()=>L(null),onSettle:G}),T.open&&T.supplier&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex justify-center items-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl",children:[s.jsxs("div",{className:"p-4 border-b flex items-center justify-between",children:[s.jsxs("h3",{className:"text-xl font-bold",children:["عملية شراء من ",T.supplier.name]}),s.jsx("button",{onClick:()=>H(h=>({...h,open:!1})),children:s.jsx(kt,{className:"h-6 w-6"})})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-right",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"p-2",children:"الصنف"}),s.jsx("th",{className:"p-2",children:"الكمية"}),s.jsx("th",{className:"p-2",children:"سعر الشراء"}),s.jsx("th",{className:"p-2"})]})}),s.jsx("tbody",{children:T.items.map((h,_)=>s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"p-2",children:s.jsxs("select",{value:h.productId,onChange:Z=>ve(_,{productId:Z.target.value}),className:"p-2 border rounded w-full",children:[s.jsx("option",{value:"",children:"اختر منتج"}),o.map(Z=>s.jsx("option",{value:Z.id,children:Z.name},Z.id))]})}),s.jsx("td",{className:"p-2",children:s.jsx("input",{type:"number",min:0,value:h.quantity,onChange:Z=>ve(_,{quantity:Z.target.value}),className:"p-2 border rounded w-full"})}),s.jsx("td",{className:"p-2",children:s.jsx("input",{type:"number",min:0,step:"0.01",value:h.unitCost,onChange:Z=>ve(_,{unitCost:Z.target.value}),className:"p-2 border rounded w-full"})}),s.jsx("td",{className:"p-2",children:s.jsx("button",{onClick:()=>he(_),className:"text-red-600 hover:text-red-800",children:"حذف"})})]},_))})]})}),s.jsx("div",{children:s.jsx("button",{onClick:ye,className:"text-sm text-blue-600",children:"+ إضافة صنف"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:"خصم"}),s.jsx("input",{type:"number",value:T.discountValue,onChange:h=>H(_=>({..._,discountValue:h.target.value})),className:"p-2 border rounded w-24 text-center"}),s.jsx("button",{onClick:()=>H(h=>({...h,discountType:h.discountType==="percentage"?"fixed":"percentage"})),className:"px-2 py-1 bg-gray-100 rounded",children:T.discountType==="percentage"?"%":"ج.م"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:"ضريبة"}),s.jsx("input",{type:"number",value:T.taxValue,onChange:h=>H(_=>({..._,taxValue:h.target.value})),className:"p-2 border rounded w-24 text-center"}),s.jsx("button",{onClick:()=>H(h=>({...h,taxType:h.taxType==="percentage"?"fixed":"percentage"})),className:"px-2 py-1 bg-gray-100 rounded",children:T.taxType==="percentage"?"%":"ج.م"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:"المدفوع"}),s.jsx("input",{type:"number",value:T.amountPaid,onChange:h=>H(_=>({..._,amountPaid:h.target.value})),className:"p-2 border rounded w-32 text-center"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:"ملاحظة"}),s.jsx("input",{type:"text",value:T.note,onChange:h=>H(_=>({..._,note:h.target.value})),className:"p-2 border rounded flex-1"})]})]}),s.jsx("div",{className:"bg-gray-50 p-3 rounded border text-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:"الإجمالي الفرعي"}),s.jsxs("span",{children:[Ue().toFixed(2)," ج.م"]})]})})]}),s.jsxs("div",{className:"p-4 border-t flex items-center justify-end gap-2",children:[s.jsx("button",{onClick:()=>H(h=>({...h,open:!1})),className:"px-4 py-2 bg-gray-200 rounded",children:"إلغاء"}),s.jsx("button",{onClick:k,className:"px-4 py-2 bg-blue-600 text-white rounded",children:"تسجيل الشراء"})]})]})})]})},Tx="pos-db-v2",Fs="pos-store",Ax=1;function bm(){return new Promise((u,d)=>{if(!window.indexedDB){d("IndexedDB not supported");return}const m=indexedDB.open(Tx,Ax);m.onupgradeneeded=()=>{m.result.createObjectStore(Fs)},m.onsuccess=()=>u(m.result),m.onerror=()=>d(m.error)})}async function nm(u){const d=await bm();return new Promise((m,o)=>{const N=d.transaction(Fs,"readonly").objectStore(Fs).get(u);N.onsuccess=()=>m(N.result),N.onerror=()=>o(N.error)})}async function xi(u,d){const m=await bm();return new Promise((o,p)=>{const O=m.transaction(Fs,"readwrite").objectStore(Fs).put(d,u);O.onsuccess=()=>o(),O.onerror=()=>p(O.error)})}async function im(u){const d={mode:"readwrite"};try{if(await u.queryPermission(d)==="granted"||await u.requestPermission(d)==="granted")return!0}catch(m){console.error("Error verifying permission:",m)}return!1}async function Cx(){try{return await window.showDirectoryPicker()}catch(u){return u instanceof DOMException&&u.name==="AbortError"?console.log("User cancelled directory picker."):console.error("Error selecting directory:",u),null}}async function Ex(u,d){try{const p=await(await(await u.getFileHandle(d)).getFile()).text();return JSON.parse(p)}catch(m){return m instanceof DOMException&&m.name==="NotFoundError"||console.error(`Error reading file ${d}:`,m),null}}async function cm(u,d,m){try{const p=await(await u.getFileHandle(d,{create:!0})).createWritable();await p.write(JSON.stringify(m,null,2)),await p.close()}catch(o){console.error(`Error writing file ${d}:`,o)}}const Js={systemName:"نظامي",companyName:"شركة ABC للتجارة",companyAddress:"123 شارع التجارة، القاهرة",companyPhone:"01234567890",customInvoiceBarcode:"",allowInvoiceEditing:!1,enableStockAlerts:!0,notificationsReadIds:[],lowStockThreshold:10,debtThreshold:0},Fu=[{id:1,name:"قطعة"},{id:2,name:"عبوة"},{id:3,name:"كرتونة"}],gi=[{id:"u1",name:"admin",password:"admin",status:"نشط",permissions:{[P.Dashboard]:!0,[P.Products]:!0,[P.Pos]:!0,[P.Customers]:!0,[P.Invoices]:!0,[P.Settings]:!0,[P.Expenses]:!0,[P.Notifications]:!0}}],pm=A.createContext(null),yt=()=>{const u=A.useContext(pm);if(!u)throw new Error("useAppContext must be used within an AppProvider");return u},Mx=({onPickDirectory:u})=>s.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-4",children:s.jsxs("div",{className:"w-full max-w-lg p-8 space-y-6 bg-white rounded-xl shadow-lg text-center",children:[s.jsx(I0,{className:"mx-auto h-16 w-16 text-blue-600"}),s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"تحديد مجلد الحفظ"}),s.jsxs("p",{className:"mt-2 text-gray-600",children:["لضمان حفظ بياناتك بشكل دائم وآمن على جهازك، يرجى تحديد مجلد لحفظ ملفات النظام.",s.jsx("br",{}),"ستكون بياناتك (المنتجات, الفواتير, إلخ) محفوظة داخل هذا المجلد ولن تُفقد."]}),s.jsxs("button",{onClick:u,className:"w-full flex justify-center items-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-lg font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[s.jsx(Iu,{className:"me-2 h-6 w-6"}),"اختر مجلد الحفظ"]}),s.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"هذه الميزة مدعومة بشكل أفضل في متصفحات Chrome و Edge."})]})}),zx=()=>{var Ka,tn,ln,nl,tt,Et;const[u,d]=A.useState(!1),[m,o]=A.useState(null),[p,D]=A.useState(!0),[N,O]=A.useState("pending"),[C,R]=A.useState(null),[E,X]=A.useState(!1),[L,Y]=A.useState(P.Dashboard),[K,T]=A.useState([]),[H,S]=A.useState([]),[$,J]=A.useState([]),[G,te]=A.useState([]),[ue,ye]=A.useState([]),[he,ve]=A.useState([]),[Ue,k]=A.useState([]),[h,_]=A.useState([]),[Z,W]=A.useState(Js),[g,B]=A.useState([]),[V,ne]=A.useState({}),[re,we]=A.useState(!1),oe=(le,je="success")=>{const qe=Date.now();B(Mt=>[...Mt,{id:qe,message:le,type:je}]),setTimeout(()=>{B(Mt=>Mt.filter(il=>il.id!==qe))},4e3)};A.useEffect(()=>{const le=document.getElementById("splash-screen");le&&setTimeout(()=>{le.style.display="none"},500),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/v4/sw.js").then(je=>{console.log("SW registered: ",je)}).catch(je=>{console.log("SW registration failed: ",je)})}),Q()},[]),A.useEffect(()=>{if(N!=="pending"){const le=pi.checkActivationStatus();if(d(le.valid===!0),le&&le.valid&&le.data){const je=le.data;let qe=le.daysRemaining;if(qe==null&&(je!=null&&je.expires))try{const Mt=new Date(je.expires).getTime()-Date.now();qe=Math.ceil(Mt/(1e3*60*60*24))}catch{}ne({type:je==null?void 0:je.type,days:qe}),console.log("License meta:",{type:je==null?void 0:je.type,days:qe})}else ne({})}},[N]),A.useEffect(()=>{},[]),A.useEffect(()=>{const le=localStorage.getItem("promoOfferDismissed")==="1";we(le)},[]),A.useEffect(()=>{Ju(Z)},[Z.syncApiKey,Z.syncProjectId,Z.syncAuthDomain]);const Q=async()=>{if("showDirectoryPicker"in window){const je=await nm("directoryHandle");je&&await im(je)?(R(je),O("fs"),await ee(je,"fs")):X(!0)}else localStorage.getItem("fsSupportNotified")||(oe("المتصفح لا يدعم حفظ الملفات, سيتم الحفظ في المتصفح.","error"),localStorage.setItem("fsSupportNotified","true")),O("indexeddb"),await ee(null,"indexeddb")},ce=async()=>{const le=await Cx();le?await im(le)?(await xi("directoryHandle",le),R(le),O("fs"),X(!1),oe(`تم اختيار المجلد "${le.name}" بنجاح. سيتم تحميل البيانات منه.`,"success"),await ee(le,"fs")):(oe("Permission to access folder was denied.","error"),C||(O("indexeddb"),await ee(null,"indexeddb"))):C||(O("indexeddb"),X(!1),await ee(null,"indexeddb"))},ee=async(le,je)=>{D(!0);const qe=je==="fs"?async st=>Ex(le,`${st}.json`):async st=>nm(st),Mt=je==="fs"?async(st,Xt)=>cm(le,`${st}.json`,Xt):async(st,Xt)=>xi(st,Xt),[il,Il,Yt,Pl,cl,Ja,ea,an,$a]=await Promise.all([qe("products"),qe("customers"),qe("invoices"),qe("expenses"),qe("units"),qe("users"),qe("settings"),qe("suppliers"),qe("purchases")]);if(T(il??[]),S(Il??[]),J(Yt??[]),ye(Pl??[]),cl?ve(cl):(ve(Fu),await Mt("units",Fu)),Ja&&Ja.length>0){const st=Ja.map(Xt=>({...Xt,permissions:Xt.permissions||(Xt.role==="مدير النظام"?gi[0].permissions:{})}));k(st)}else k(gi),await Mt("users",gi);_(an??[]),te($a??[]),ea?(W(ea),Ju(ea)):(W(Js),await Mt("settings",Js),Ju(Js)),D(!1)},q=(le,je)=>async qe=>{le(qe),N==="fs"&&C?await cm(C,`${je}.json`,qe):N==="indexeddb"&&await xi(je,qe)},fe=q(T,"products"),be=q(S,"customers"),pe=q(J,"invoices"),We=q(ve,"units"),Ze=q(k,"users"),Ve=q(_,"suppliers"),Fl=q(W,"settings"),Va=q(ye,"expenses"),vi=q(te,"purchases"),ji=async()=>{if(window.confirm("هل أنت متأكد من أنك تريد إعادة تعيين كل شيء؟ سيتم حذف جميع البيانات بشكل دائم ولا يمكن التراجع عن هذا الإجراء.")){console.log("Starting data reset..."),D(!0);try{await fe([]),await be([]),await pe([]),await We(Fu),await Ze(gi),await Fl(Js),N==="fs"&&await xi("directoryHandle",null),localStorage.removeItem("isActivated"),localStorage.removeItem("rememberedUser"),oe("تمت إعادة تعيين جميع البيانات بنجاح. سيتم إعادة تشغيل التطبيق.","success"),setTimeout(()=>{window.location.reload()},2e3)}catch(le){console.error("Failed to reset data:",le),oe("فشل في إعادة تعيين البيانات.","error"),D(!1)}}},dt=A.useCallback(le=>{Y(le)},[]),Ni=()=>{var je;if(!m)return s.jsx(lm,{});if(!(m.id==="u1"||((je=m.permissions)==null?void 0:je[L])===!0))return dt(P.Dashboard),oe("ليس لديك صلاحية للوصول إلى هذه الصفحة.","error"),s.jsx(Vu,{});switch(L){case P.Dashboard:return s.jsx(Vu,{});case P.Products:return s.jsx(nx,{});case P.Pos:return s.jsx(rx,{});case P.Customers:return s.jsx(fx,{});case P.Invoices:return s.jsx(mx,{});case P.Expenses:return s.jsx(xx,{});case P.Settings:return s.jsx(jx,{});case P.Notifications:return s.jsx(Nx,{});case P.Suppliers:return s.jsx(Dx,{});default:return s.jsx(Vu,{})}},Ps=()=>{const le=pi.checkActivationStatus();d(le.valid===!0)},en=()=>{o(null),localStorage.removeItem("rememberedUser"),Y(P.Dashboard)},Wl=u&&(((ln=(Ka=V.type)==null?void 0:(tn=Ka.toString()).toLowerCase)==null?void 0:ln.call(tn))==="trial"||V.type==="تجريبي")&&(V.days??999)<=7,Si={page:L,setPage:dt,products:K,saveProducts:fe,customers:H,saveCustomers:be,invoices:$,saveInvoices:pe,expenses:ue,saveExpenses:Va,units:he,saveUnits:We,users:Ue,saveUsers:Ze,suppliers:h,saveSuppliers:Ve,purchases:G,savePurchases:vi,currentUser:m,setCurrentUser:o,settings:Z,saveSettings:Fl,addNotification:oe,storageMode:N,directoryName:(C==null?void 0:C.name)||null,requestDirectoryPermission:ce,resetAllData:ji,showSidebarPromo:Wl};return E?s.jsx(Mx,{onPickDirectory:ce}):p||N==="pending"?s.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 font-bold text-xl",children:"التحقق من إعدادات التخزين..."}):u?s.jsxs(pm.Provider,{value:Si,children:[s.jsx("div",{className:"bg-gray-100 min-h-screen text-gray-800",children:m?s.jsx(tx,{onLogout:en,children:Ni()}):s.jsx(lm,{})}),s.jsx("div",{className:"fixed bottom-5 left-5 z-50 space-y-3",children:g.map(le=>s.jsx("div",{className:`px-6 py-3 rounded-lg shadow-lg text-white ${le.type==="success"?"bg-green-500":"bg-red-500"}`,children:le.message},le.id))}),u&&(((Et=(nl=V.type)==null?void 0:(tt=nl.toString()).toLowerCase)==null?void 0:Et.call(tt))==="trial"||V.type==="تجريبي")&&(V.days??999)<=7&&(!re||(V.days??999)<=3)&&s.jsx("div",{className:"fixed bottom-5 right-5 z-50",children:s.jsxs("div",{className:"relative max-w-sm w-80 bg-white border border-amber-200 rounded-xl shadow-xl overflow-hidden",children:[s.jsx("div",{className:"absolute top-2 left-2",children:s.jsx("button",{onClick:()=>{we(!0),localStorage.setItem("promoOfferDismissed","1")},className:"text-gray-500 hover:text-gray-700",children:"✕"})}),s.jsx("div",{className:"bg-gradient-to-l from-amber-100 to-white p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-200 flex items-center justify-center text-amber-700 font-extrabold",children:"⚡"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-sm text-amber-700 font-bold",children:"عرض خاص قبل انتهاء التجربة"}),s.jsx("div",{className:"text-lg font-extrabold text-gray-800",children:"مدى الحياة 4500 ج + YSK Phone مجاناً"}),s.jsx("div",{className:"mt-1 text-xs text-gray-700 leading-5",children:"YSK Phone: تطبيق موبايل تمسح بيه الباركود بالموبايل وتبيع وتبحث وتعرض المخزون بدون ما تشتري سكانر USB. محتاج إنترنت بس."}),s.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[s.jsx("a",{href:"tel:01023160657",className:"px-3 py-1.5 rounded bg-blue-600 text-white text-xs hover:bg-blue-700",children:"اتصل للشراء"}),s.jsx("a",{href:"https://wa.me/201023160657",target:"_blank",className:"px-3 py-1.5 rounded bg-green-600 text-white text-xs hover:bg-green-700",children:"كلّمنا واتساب"}),s.jsxs("span",{className:"text-[10px] text-gray-500",children:["متبقي ",V.days??0," يوم من التجربة"]})]})]})]})})]})})]}):s.jsx(ax,{onActivate:Ps})},ym=document.getElementById("root");if(!ym)throw new Error("Could not find root element to mount to");const Ox=K0.createRoot(ym);Ox.render(s.jsx(O0.StrictMode,{children:s.jsx(zx,{})}));
